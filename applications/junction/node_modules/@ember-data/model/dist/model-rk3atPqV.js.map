{"version":3,"file":"model-rk3atPqV.js","sources":["../src/-private/util.ts","../src/-private/promise-proxy-base.js","../../../node_modules/.pnpm/decorat_bfe8edbefc8aced6f61ce140cd72ecf2/node_modules/decorator-transforms/dist/runtime-BPCpkOf1.js","../src/-private/promise-belongs-to.ts","../src/-private/promise-many-array.ts","../src/-private/debug/assert-polymorphic-type.ts","../src/-private/references/has-many.ts","../src/-private/references/belongs-to.ts","../src/-private/legacy-relationships-support.ts","../src/-private/errors.ts","../src/-private/model-methods.ts","../src/-private/notify-changes.ts","../src/-private/record-state.ts","../src/-private/model.ts"],"sourcesContent":["import { deprecate } from '@ember/debug';\n\nimport { dasherize } from '@ember-data/request-utils/string';\nimport { DEPRECATE_NON_STRICT_TYPES } from '@warp-drive/build-config/deprecations';\n\nexport type DecoratorPropertyDescriptor = (PropertyDescriptor & { initializer?: () => unknown }) | undefined;\n\nexport function isElementDescriptor(args: unknown[]): args is [object, string, DecoratorPropertyDescriptor] {\n  const [maybeTarget, maybeKey, maybeDesc] = args;\n\n  return (\n    // Ensure we have the right number of args\n    args.length === 3 &&\n    // Make sure the target is a class or object (prototype)\n    (typeof maybeTarget === 'function' || (typeof maybeTarget === 'object' && maybeTarget !== null)) &&\n    // Make sure the key is a string\n    typeof maybeKey === 'string' &&\n    // Make sure the descriptor is the right shape\n    ((typeof maybeDesc === 'object' &&\n      maybeDesc !== null &&\n      'enumerable' in maybeDesc &&\n      'configurable' in maybeDesc) ||\n      // TS compatibility\n      maybeDesc === undefined)\n  );\n}\n\nexport function normalizeModelName(type: string): string {\n  if (DEPRECATE_NON_STRICT_TYPES) {\n    const result = dasherize(type);\n\n    deprecate(\n      `The resource type '${type}' is not normalized. Update your application code to use '${result}' instead of '${type}'.`,\n      result === type,\n      {\n        id: 'ember-data:deprecate-non-strict-types',\n        until: '6.0',\n        for: 'ember-data',\n        since: {\n          available: '4.13',\n          enabled: '5.3',\n        },\n      }\n    );\n\n    return result;\n  }\n\n  return type;\n}\n","import PromiseProxyMixin from '@ember/object/promise-proxy-mixin';\nimport ObjectProxy from '@ember/object/proxy';\n\nexport const PromiseObject = ObjectProxy.extend(PromiseProxyMixin);\n","const deferred = /* @__PURE__ */ new WeakMap();\nfunction deferDecorator(proto, prop, desc) {\n  let map = deferred.get(proto);\n  if (!map) {\n    map = /* @__PURE__ */ new Map();\n    deferred.set(proto, map);\n  }\n  map.set(prop, desc);\n}\nfunction findDeferredDecorator(target, prop) {\n  var _a;\n  let cursor = target.prototype;\n  while (cursor) {\n    let desc = (_a = deferred.get(cursor)) == null ? void 0 : _a.get(prop);\n    if (desc) {\n      return desc;\n    }\n    cursor = cursor.prototype;\n  }\n}\nfunction decorateFieldV1(target, prop, decorators, initializer) {\n  return decorateFieldV2(target.prototype, prop, decorators, initializer);\n}\nfunction decorateFieldV2(prototype, prop, decorators, initializer) {\n  let desc = {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    initializer: null\n  };\n  if (initializer) {\n    desc.initializer = initializer;\n  }\n  for (let decorator of decorators) {\n    desc = decorator(prototype, prop, desc) || desc;\n  }\n  if (desc.initializer === void 0) {\n    Object.defineProperty(prototype, prop, desc);\n  } else {\n    deferDecorator(prototype, prop, desc);\n  }\n}\nfunction decorateMethodV1({ prototype }, prop, decorators) {\n  return decorateMethodV2(prototype, prop, decorators);\n}\nfunction decorateMethodV2(prototype, prop, decorators) {\n  const origDesc = Object.getOwnPropertyDescriptor(prototype, prop);\n  let desc = { ...origDesc };\n  for (let decorator of decorators) {\n    desc = decorator(prototype, prop, desc) || desc;\n  }\n  if (desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(prototype) : void 0;\n    desc.initializer = void 0;\n  }\n  Object.defineProperty(prototype, prop, desc);\n}\nfunction initializeDeferredDecorator(target, prop) {\n  let desc = findDeferredDecorator(target.constructor, prop);\n  if (desc) {\n    Object.defineProperty(target, prop, {\n      enumerable: desc.enumerable,\n      configurable: desc.configurable,\n      writable: desc.writable,\n      value: desc.initializer ? desc.initializer.call(target) : void 0\n    });\n  }\n}\nfunction decorateClass(target, decorators) {\n  return decorators.reduce(\n    (accum, decorator) => decorator(accum) || accum,\n    target\n  );\n}\nfunction decoratePOJO(pojo, decorated) {\n  for (let [type, prop, decorators] of decorated) {\n    if (type === \"field\") {\n      decoratePojoField(pojo, prop, decorators);\n    } else {\n      decorateMethodV2(pojo, prop, decorators);\n    }\n  }\n  return pojo;\n}\nfunction decoratePojoField(pojo, prop, decorators) {\n  let desc = {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    initializer: () => {\n      var _a;\n      return (_a = Object.getOwnPropertyDescriptor(pojo, prop)) == null ? void 0 : _a.value;\n    }\n  };\n  for (let decorator of decorators) {\n    desc = decorator(pojo, prop, desc) || desc;\n  }\n  if (desc.initializer) {\n    desc.value = desc.initializer.call(pojo);\n    delete desc.initializer;\n  }\n  Object.defineProperty(pojo, prop, desc);\n}\nconst runtime = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  c: decorateClass,\n  f: decorateFieldV1,\n  g: decorateFieldV2,\n  i: initializeDeferredDecorator,\n  m: decorateMethodV1,\n  n: decorateMethodV2,\n  p: decoratePOJO\n}, Symbol.toStringTag, { value: \"Module\" }));\nexport {\n  decorateFieldV2 as a,\n  decorateMethodV1 as b,\n  decorateMethodV2 as c,\n  decorateFieldV1 as d,\n  decorateClass as e,\n  decoratePOJO as f,\n  initializeDeferredDecorator as i,\n  runtime as r\n};\n//# sourceMappingURL=runtime-BPCpkOf1.js.map\n","import { computed } from '@ember/object';\nimport type PromiseProxyMixin from '@ember/object/promise-proxy-mixin';\nimport type ObjectProxy from '@ember/object/proxy';\n\nimport type Store from '@ember-data/store';\nimport { cached } from '@ember-data/tracking';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { OpaqueRecordInstance, TypeFromInstanceOrString } from '@warp-drive/core-types/record';\n\nimport type { LegacySupport } from './legacy-relationships-support';\nimport { PromiseObject } from './promise-proxy-base';\n\nexport interface BelongsToProxyMeta<T = unknown> {\n  key: string;\n  store: Store;\n  legacySupport: LegacySupport;\n  modelName: TypeFromInstanceOrString<T>;\n}\nexport interface BelongsToProxyCreateArgs<T = unknown> {\n  promise: Promise<T | null>;\n  content?: T | null;\n  _belongsToState: BelongsToProxyMeta<T>;\n}\n\nexport const LegacyPromiseProxy = Symbol.for('LegacyPromiseProxy');\n\ninterface PromiseObjectType<T> extends PromiseProxyMixin<T | null>, ObjectProxy<T> {\n  // eslint-disable-next-line @typescript-eslint/no-misused-new\n  new <PT>(...args: unknown[]): PromiseObjectType<PT>;\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-extraneous-class\ndeclare class PromiseObjectType<T> {}\n\nconst Extended: PromiseObjectType<OpaqueRecordInstance> =\n  PromiseObject as unknown as PromiseObjectType<OpaqueRecordInstance>;\n\n/**\n @module @ember-data/model\n */\n\n/**\n  A PromiseBelongsTo is a PromiseObject that also proxies certain method calls\n  to the underlying belongsTo model.\n  Right now we proxy:\n    * `reload()`\n  @class PromiseBelongsTo\n  @extends PromiseObject\n  @private\n*/\nclass PromiseBelongsTo<T = unknown> extends Extended<T> {\n  declare _belongsToState: BelongsToProxyMeta<T>;\n\n  @cached\n  get id(): string | null {\n    const { key, legacySupport } = this._belongsToState;\n    const ref = legacySupport.referenceFor('belongsTo', key);\n\n    return ref.id();\n  }\n\n  // we don't proxy meta because we would need to proxy it to the relationship state container\n  //  however, meta on relationships does not trigger change notifications.\n  //  if you need relationship meta, you should do `record.belongsTo(relationshipName).meta()`\n  @computed()\n  get meta() {\n    // eslint-disable-next-line no-constant-condition\n    if (1) {\n      assert(\n        'You attempted to access meta on the promise for the async belongsTo relationship ' +\n          `${this._belongsToState.modelName}:${this._belongsToState.key}'.` +\n          '\\nUse `record.belongsTo(relationshipName).meta()` instead.',\n        false\n      );\n    }\n    return;\n  }\n\n  async reload(options: Record<string, unknown>): Promise<this> {\n    assert('You are trying to reload an async belongsTo before it has been created', this.content !== undefined);\n    const { key, legacySupport } = this._belongsToState;\n    await legacySupport.reloadBelongsTo(key, options);\n    return this;\n  }\n\n  [LegacyPromiseProxy] = true as const;\n}\n\nexport { PromiseBelongsTo };\n","import type { RelatedCollection as ManyArray } from '@ember-data/store/-private';\nimport type { BaseFinderOptions } from '@ember-data/store/types';\nimport { compat } from '@ember-data/tracking';\nimport { defineSignal } from '@ember-data/tracking/-private';\nimport { DEPRECATE_COMPUTED_CHAINS } from '@warp-drive/build-config/deprecations';\nimport { assert } from '@warp-drive/build-config/macros';\n\nimport { LegacyPromiseProxy } from './promise-belongs-to';\n\nexport interface HasManyProxyCreateArgs<T = unknown> {\n  promise: Promise<ManyArray<T>>;\n  content?: ManyArray<T>;\n}\n\n/**\n @module @ember-data/model\n */\n/**\n  This class is returned as the result of accessing an async hasMany relationship\n  on an instance of a Model extending from `@ember-data/model`.\n\n  A PromiseManyArray is an iterable proxy that allows templates to consume related\n  ManyArrays and update once their contents are no longer pending.\n\n  In your JS code you should resolve the promise first.\n\n  ```js\n  const comments = await post.comments;\n  ```\n\n  @class PromiseManyArray\n  @public\n*/\nexport class PromiseManyArray<T = unknown> {\n  declare promise: Promise<ManyArray<T>> | null;\n  declare isDestroyed: boolean;\n  declare content: ManyArray<T> | null;\n\n  constructor(promise: Promise<ManyArray<T>>, content?: ManyArray<T>) {\n    this._update(promise, content);\n    this.isDestroyed = false;\n  }\n\n  /**\n   * Retrieve the length of the content\n   * @property length\n   * @public\n   */\n  @compat\n  get length(): number {\n    // shouldn't be needed, but ends up being needed\n    // for computed chains even in 4.x\n    if (DEPRECATE_COMPUTED_CHAINS) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this['[]'];\n    }\n    return this.content ? this.content.length : 0;\n  }\n\n  /**\n   * Iterate the proxied content. Called by the glimmer iterator in #each\n   * We do not guarantee that forEach will always be available. This\n   * may eventually be made to use Symbol.Iterator once glimmer supports it.\n   *\n   * @method forEach\n   * @param cb\n   * @return\n   * @private\n   */\n  forEach(cb: (item: T, index: number, array: T[]) => void) {\n    if (this.content && this.length) {\n      this.content.forEach(cb);\n    }\n  }\n\n  /**\n   * Reload the relationship\n   * @method reload\n   * @public\n   * @param options\n   * @return\n   */\n  reload(options: Omit<BaseFinderOptions, ''>) {\n    assert('You are trying to reload an async manyArray before it has been created', this.content);\n    void this.content.reload(options);\n    return this;\n  }\n\n  //----  Properties/Methods from the PromiseProxyMixin that we will keep as our API\n\n  /**\n   * Whether the loading promise is still pending\n   *\n   * @property {boolean} isPending\n   * @public\n   */\n  declare isPending: boolean;\n  /**\n   * Whether the loading promise rejected\n   *\n   * @property {boolean} isRejected\n   * @public\n   */\n  declare isRejected: boolean;\n  /**\n   * Whether the loading promise succeeded\n   *\n   * @property {boolean} isFulfilled\n   * @public\n   */\n  declare isFulfilled: boolean;\n  /**\n   * Whether the loading promise completed (resolved or rejected)\n   *\n   * @property {boolean} isSettled\n   * @public\n   */\n  declare isSettled: boolean;\n\n  /**\n   * chain this promise\n   *\n   * @method then\n   * @public\n   * @param success\n   * @param fail\n   * @return Promise\n   */\n  then(s: Parameters<Promise<ManyArray<T>>['then']>[0], f?: Parameters<Promise<ManyArray<T>>['then']>[1]) {\n    return this.promise!.then(s, f);\n  }\n\n  /**\n   * catch errors thrown by this promise\n   * @method catch\n   * @public\n   * @param callback\n   * @return Promise\n   */\n  catch(cb: Parameters<Promise<ManyArray<T>>['catch']>[0]) {\n    return this.promise!.catch(cb);\n  }\n\n  /**\n   * run cleanup after this promise completes\n   *\n   * @method finally\n   * @public\n   * @param callback\n   * @return Promise\n   */\n  finally(cb: Parameters<Promise<ManyArray<T>>['finally']>[0]) {\n    return this.promise!.finally(cb);\n  }\n\n  //---- Methods on EmberObject that we should keep\n\n  destroy() {\n    this.isDestroyed = true;\n    this.content = null;\n    this.promise = null;\n  }\n\n  //---- Methods/Properties on ManyArray that we own and proxy to\n\n  /**\n   * Retrieve the links for this relationship\n   * @property links\n   * @public\n   */\n  @compat\n  get links() {\n    return this.content ? this.content.links : undefined;\n  }\n\n  /**\n   * Retrieve the meta for this relationship\n   * @property meta\n   * @public\n   */\n  @compat\n  get meta() {\n    return this.content ? this.content.meta : undefined;\n  }\n\n  //---- Our own stuff\n\n  _update(promise: Promise<ManyArray<T>>, content?: ManyArray<T>) {\n    if (content !== undefined) {\n      this.content = content;\n    }\n\n    this.promise = tapPromise(this, promise);\n  }\n\n  static create<T>({ promise, content }: HasManyProxyCreateArgs<T>): PromiseManyArray<T> {\n    return new this(promise, content);\n  }\n\n  [LegacyPromiseProxy] = true as const;\n}\ndefineSignal(PromiseManyArray.prototype, 'content', null);\ndefineSignal(PromiseManyArray.prototype, 'isPending', false);\ndefineSignal(PromiseManyArray.prototype, 'isRejected', false);\ndefineSignal(PromiseManyArray.prototype, 'isFulfilled', false);\ndefineSignal(PromiseManyArray.prototype, 'isSettled', false);\n\n// this will error if someone tries to call\n// A(identifierArray) since it is not configurable\n// which is preferrable to the `meta` override we used\n// before which required importing all of Ember\nif (DEPRECATE_COMPUTED_CHAINS) {\n  const desc = {\n    enumerable: true,\n    configurable: false,\n    get: function (this: PromiseManyArray) {\n      return this.content?.length && this.content;\n    },\n  };\n  compat(desc);\n\n  // ember-source < 3.23 (e.g. 3.20 lts)\n  // requires that the tag `'[]'` be notified\n  // on the ArrayProxy in order for `{{#each}}`\n  // to recompute. We entangle the '[]' tag from content\n\n  Object.defineProperty(PromiseManyArray.prototype, '[]', desc);\n}\n\nfunction tapPromise<T>(proxy: PromiseManyArray<T>, promise: Promise<ManyArray<T>>) {\n  proxy.isPending = true;\n  proxy.isSettled = false;\n  proxy.isFulfilled = false;\n  proxy.isRejected = false;\n  return Promise.resolve(promise).then(\n    (content) => {\n      proxy.isPending = false;\n      proxy.isFulfilled = true;\n      proxy.isSettled = true;\n      proxy.content = content;\n      return content;\n    },\n    (error) => {\n      proxy.isPending = false;\n      proxy.isFulfilled = false;\n      proxy.isRejected = true;\n      proxy.isSettled = true;\n      throw error;\n    }\n  );\n}\n","import type { UpgradedMeta } from '@ember-data/graph/-private';\nimport type Store from '@ember-data/store';\nimport { DEBUG } from '@warp-drive/build-config/env';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\n\n/*\n  Assert that `addedRecord` has a valid type so it can be added to the\n  relationship of the `record`.\n\n  The assert basically checks if the `addedRecord` can be added to the\n  relationship (specified via `relationshipMeta`) of the `record`.\n\n  This utility should only be used internally, as both record parameters must\n  be stable record identifiers and the `relationshipMeta` needs to be the meta\n  information about the relationship, retrieved via\n  `record.relationshipFor(key)`.\n*/\nlet assertPolymorphicType: (\n  parentIdentifier: StableRecordIdentifier,\n  parentDefinition: UpgradedMeta,\n  addedIdentifier: StableRecordIdentifier,\n  store: Store\n) => void;\n\nif (DEBUG) {\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  assertPolymorphicType = function assertPolymorphicType(\n    parentIdentifier: StableRecordIdentifier,\n    parentDefinition: UpgradedMeta,\n    addedIdentifier: StableRecordIdentifier,\n    store: Store\n  ) {\n    if (parentDefinition.inverseIsImplicit) {\n      return;\n    }\n    if (parentDefinition.isPolymorphic) {\n      const meta = store.schema.fields(addedIdentifier)?.get(parentDefinition.inverseKey);\n      if (meta) {\n        assert(\n          `Expected the schema for the field ${parentDefinition.inverseKey} on ${addedIdentifier.type} to be for a legacy relationship`,\n          meta.kind === 'belongsTo' || meta.kind === 'hasMany'\n        );\n        assert(\n          `The schema for the relationship '${parentDefinition.inverseKey}' on '${addedIdentifier.type}' type does not implement '${parentDefinition.type}' and thus cannot be assigned to the '${parentDefinition.key}' relationship in '${parentIdentifier.type}'. The definition should specify 'as: \"${parentDefinition.type}\"' in options.`,\n          meta?.options?.as === parentDefinition.type\n        );\n      }\n    }\n  };\n}\n\nexport { assertPolymorphicType };\n","import type { CollectionEdge, Graph } from '@ember-data/graph/-private';\nimport type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store';\nimport type { RelatedCollection as ManyArray } from '@ember-data/store/-private';\nimport type { BaseFinderOptions } from '@ember-data/store/types';\nimport { cached, compat } from '@ember-data/tracking';\nimport { defineSignal } from '@ember-data/tracking/-private';\nimport { DEBUG } from '@warp-drive/build-config/env';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport type { CollectionRelationship } from '@warp-drive/core-types/cache/relationship';\nimport type { TypeFromInstanceOrString } from '@warp-drive/core-types/record';\nimport type {\n  CollectionResourceDocument,\n  CollectionResourceRelationship,\n  ExistingResourceObject,\n  LinkObject,\n  Meta,\n  PaginationLinks,\n} from '@warp-drive/core-types/spec/json-api-raw';\n\nimport type { IsUnknown } from '../belongs-to';\nimport { assertPolymorphicType } from '../debug/assert-polymorphic-type';\nimport type { LegacySupport } from '../legacy-relationships-support';\nimport { areAllInverseRecordsLoaded, LEGACY_SUPPORT } from '../legacy-relationships-support';\nimport type { MaybeHasManyFields } from '../type-utils';\n\n/**\n  @module @ember-data/model\n*/\ninterface ResourceIdentifier {\n  links?: {\n    related?: string | LinkObject;\n  };\n  meta?: Meta;\n}\n\ntype ArrayItemType<T> = T extends (infer U)[] ? U : never;\n\nfunction isResourceIdentiferWithRelatedLinks(\n  value: CollectionResourceRelationship | ResourceIdentifier | null\n): value is ResourceIdentifier & { links: { related: string | LinkObject | null } } {\n  return Boolean(value && value.links && value.links.related);\n}\n/**\n A `HasManyReference` is a low-level API that allows access\n and manipulation of a hasMany relationship.\n\n It is especially useful when you're dealing with `async` relationships\n from `@ember-data/model` as it allows synchronous access to\n the relationship data if loaded, as well as APIs for loading, reloading\n the data or accessing available information without triggering a load.\n\n It may also be useful when using `sync` relationships with `@ember-data/model`\n that need to be loaded/reloaded with more precise timing than marking the\n relationship as `async` and relying on autofetch would have allowed.\n\n However,keep in mind that marking a relationship as `async: false` will introduce\n bugs into your application if the data is not always guaranteed to be available\n by the time the relationship is accessed. Ergo, it is recommended when using this\n approach to utilize `links` for unloaded relationship state instead of identifiers.\n\n Reference APIs are entangled with the relationship's underlying state,\n thus any getters or cached properties that utilize these will properly\n invalidate if the relationship state changes.\n\n References are \"stable\", meaning that multiple calls to retrieve the reference\n  for a given relationship will always return the same HasManyReference.\n\n @class HasManyReference\n @public\n */\nexport default class HasManyReference<\n  T = unknown,\n  K extends string = IsUnknown<T> extends true ? string : MaybeHasManyFields<T>,\n  Related = K extends keyof T ? ArrayItemType<Awaited<T[K]>> : unknown,\n> {\n  declare graph: Graph;\n  declare store: Store;\n  declare hasManyRelationship: CollectionEdge;\n  /**\n   * The field name on the parent record for this has-many relationship.\n   *\n   * @property {String} key\n   * @public\n   */\n  declare key: K;\n\n  /**\n   * The type of resource this relationship will contain.\n   *\n   * @property {String} type\n   * @public\n   */\n  declare type: TypeFromInstanceOrString<Related>;\n\n  // unsubscribe tokens given to us by the notification manager\n  ___token!: object;\n  ___identifier: StableRecordIdentifier<TypeFromInstanceOrString<T>>;\n  ___relatedTokenMap!: Map<StableRecordIdentifier, object>;\n\n  declare _ref: number;\n\n  constructor(\n    store: Store,\n    graph: Graph,\n    parentIdentifier: StableRecordIdentifier<TypeFromInstanceOrString<T>>,\n    hasManyRelationship: CollectionEdge,\n    key: K\n  ) {\n    this.graph = graph;\n    this.key = key;\n    this.hasManyRelationship = hasManyRelationship;\n    this.type = hasManyRelationship.definition.type as TypeFromInstanceOrString<Related>;\n\n    this.store = store;\n    this.___identifier = parentIdentifier;\n    this.___token = store.notifications.subscribe(\n      parentIdentifier,\n      (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n        if (bucket === 'relationships' && notifiedKey === key) {\n          this._ref++;\n        }\n      }\n    );\n    this.___relatedTokenMap = new Map();\n    // TODO inverse\n  }\n\n  /**\n   * This method should never be called by user code.\n   *\n   * @internal\n   */\n  destroy() {\n    this.store.notifications.unsubscribe(this.___token);\n    this.___relatedTokenMap.forEach((token) => {\n      this.store.notifications.unsubscribe(token);\n    });\n    this.___relatedTokenMap.clear();\n  }\n\n  /**\n   * An array of identifiers for the records that this reference refers to.\n   *\n   * @property {StableRecordIdentifier[]} identifiers\n   * @public\n   */\n  @cached\n  @compat\n  get identifiers(): StableRecordIdentifier<TypeFromInstanceOrString<Related>>[] {\n    ensureRefCanSubscribe(this);\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    this._ref;\n\n    const resource = this._resource();\n\n    const map = this.___relatedTokenMap;\n    this.___relatedTokenMap = new Map();\n\n    if (resource && resource.data) {\n      return resource.data.map((resourceIdentifier) => {\n        const identifier = this.store.identifierCache.getOrCreateRecordIdentifier(resourceIdentifier);\n        let token = map.get(identifier);\n\n        if (token) {\n          map.delete(identifier);\n        } else {\n          token = this.store.notifications.subscribe(\n            identifier,\n            (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n              if (bucket === 'identity' || (bucket === 'attributes' && notifiedKey === 'id')) {\n                this._ref++;\n              }\n            }\n          );\n        }\n        this.___relatedTokenMap.set(identifier, token);\n\n        return identifier as StableRecordIdentifier<TypeFromInstanceOrString<Related>>;\n      });\n    }\n\n    map.forEach((token) => {\n      this.store.notifications.unsubscribe(token);\n    });\n    map.clear();\n\n    return [];\n  }\n\n  _resource() {\n    const cache = this.store.cache;\n    return cache.getRelationship(this.___identifier, this.key) as CollectionResourceRelationship;\n  }\n\n  /**\n   This returns a string that represents how the reference will be\n   looked up when it is loaded. If the relationship has a link it will\n   use the \"link\" otherwise it defaults to \"id\".\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   // get the identifier of the reference\n   if (commentsRef.remoteType() === \"ids\") {\n     let ids = commentsRef.ids();\n   } else if (commentsRef.remoteType() === \"link\") {\n     let link = commentsRef.link();\n   }\n   ```\n\n   @method remoteType\n   @public\n   @return {String} The name of the remote type. This should either be `link` or `ids`\n   */\n  remoteType(): 'link' | 'ids' {\n    const value = this._resource();\n    if (value && value.links && value.links.related) {\n      return 'link';\n    }\n\n    return 'ids';\n  }\n\n  /**\n   `ids()` returns an array of the record IDs in this relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.ids(); // ['1']\n   ```\n\n   @method ids\n    @public\n   @return {Array} The ids in this has-many relationship\n   */\n  ids(): Array<string | null> {\n    return this.identifiers.map((identifier) => identifier.id);\n  }\n\n  /**\n   The link Ember Data will use to fetch or reload this belongs-to\n   relationship. By default it uses only the \"related\" resource linkage.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: '/articles/1/author'\n            }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"link\") {\n      let link = userRef.link();\n    }\n   ```\n\n   @method link\n   @public\n   @return {String} The link Ember Data will use to fetch or reload this belongs-to relationship.\n   */\n  link(): string | null {\n    const resource = this._resource();\n\n    if (isResourceIdentiferWithRelatedLinks(resource)) {\n      if (resource.links) {\n        const related = resource.links.related;\n        return !related || typeof related === 'string' ? related : related.href;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * any links that have been received for this relationship\n   *\n   * @method links\n   * @public\n   * @return\n   */\n  links(): PaginationLinks | null {\n    const resource = this._resource();\n\n    return resource && resource.links ? resource.links : null;\n  }\n\n  /**\n   The meta data for the has-many relationship.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { hasMany } from '@ember-data/model';\n   export default Model.extend({\n      users: hasMany('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          users: {\n            links: {\n              related: {\n                href: '/articles/1/authors'\n              },\n            },\n            meta: {\n              lastUpdated: 1458014400000\n            }\n          }\n        }\n      }\n    });\n\n   let usersRef = blog.hasMany('user');\n\n   usersRef.meta() // { lastUpdated: 1458014400000 }\n   ```\n\n  @method meta\n  @public\n  @return {Object|null} The meta information for the belongs-to relationship.\n  */\n  meta(): Meta | null {\n    let meta: Meta | null = null;\n    const resource = this._resource();\n    if (resource && resource.meta && typeof resource.meta === 'object') {\n      meta = resource.meta;\n    }\n    return meta;\n  }\n\n  /**\n   `push` can be used to update the data in the relationship and EmberData\n   will treat the new data as the canonical value of this relationship on\n   the backend. An empty array will signify the canonical value should be\n   empty.\n\n   Example model\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   Setup some initial state, note we haven't loaded the comments yet:\n\n   ```js\n   const post = store.push({\n     data: {\n       type: 'post',\n       id: '1',\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: '1' }]\n         }\n       }\n     }\n   });\n\n   const commentsRef = post.hasMany('comments');\n   commentsRef.ids(); // ['1']\n   ```\n\n   Update the state using `push`, note we can do this even without\n   having loaded these comments yet by providing resource identifiers.\n\n   Both full resources and resource identifiers are supported.\n\n   ```js\n   await commentsRef.push({\n    data: [\n     { type: 'comment', id: '2' },\n     { type: 'comment', id: '3' },\n    ]\n   });\n\n   commentsRef.ids(); // ['2', '3']\n   ```\n\n   For convenience, you can also pass in an array of resources or resource identifiers\n   without wrapping them in the `data` property:\n\n   ```js\n   await commentsRef.push([\n     { type: 'comment', id: '4' },\n     { type: 'comment', id: '5' },\n   ]);\n\n   commentsRef.ids(); // ['4', '5']\n   ```\n\n   When using the `data` property, you may also include other resource data via included,\n   as well as provide new links and meta to the relationship.\n\n   ```js\n   await commentsRef.push({\n     links: {\n       related: '/posts/1/comments'\n     },\n     meta: {\n       total: 2\n     },\n     data: [\n       { type: 'comment', id: '4' },\n       { type: 'comment', id: '5' },\n     ],\n     included: [\n       { type: 'other-thing', id: '1', attributes: { foo: 'bar' },\n     ]\n   });\n   ```\n\n   By default, the store will attempt to fetch any unloaded records before resolving\n   the returned promise with the ManyArray.\n\n   Alternatively, pass `true` as the second argument to avoid fetching unloaded records\n   and instead the promise will resolve with void without attempting to fetch. This is\n   particularly useful if you want to update the state of the relationship without\n   forcing the load of all of the associated records.\n\n   @method push\n   @public\n   @param {Array|Object} doc a JSONAPI document object describing the new value of this relationship.\n   @param {Boolean} [skipFetch] if `true`, do not attempt to fetch unloaded records\n   @return {Promise<ManyArray | void>}\n  */\n  async push(\n    doc: ExistingResourceObject[] | CollectionResourceDocument,\n    skipFetch?: boolean\n  ): Promise<ManyArray<Related> | void> {\n    const { store } = this;\n    const dataDoc = Array.isArray(doc) ? { data: doc } : doc;\n    const isResourceData = Array.isArray(dataDoc.data) && dataDoc.data.length > 0 && isMaybeResource(dataDoc.data[0]);\n\n    // enforce that one of links, meta or data is present\n    assert(\n      `You must provide at least one of 'links', 'meta' or 'data' when calling hasManyReference.push`,\n      'links' in dataDoc || 'meta' in dataDoc || 'data' in dataDoc\n    );\n\n    const identifiers = !Array.isArray(dataDoc.data)\n      ? []\n      : isResourceData\n        ? (store._push(dataDoc, true) as StableRecordIdentifier[])\n        : dataDoc.data.map((i) => store.identifierCache.getOrCreateRecordIdentifier(i));\n    const { identifier } = this.hasManyRelationship;\n\n    if (DEBUG) {\n      const relationshipMeta = this.hasManyRelationship.definition;\n\n      identifiers.forEach((added) => {\n        assertPolymorphicType(identifier, relationshipMeta, added, store);\n      });\n    }\n\n    const newData: CollectionResourceRelationship = {};\n    // only set data if it was passed in\n    if (Array.isArray(dataDoc.data)) {\n      newData.data = identifiers;\n    }\n    if ('links' in dataDoc) {\n      newData.links = dataDoc.links;\n    }\n    if ('meta' in dataDoc) {\n      newData.meta = dataDoc.meta;\n    }\n    store._join(() => {\n      this.graph.push({\n        op: 'updateRelationship',\n        record: identifier,\n        field: this.key,\n        value: newData,\n      });\n    });\n\n    if (!skipFetch) return this.load();\n  }\n\n  _isLoaded() {\n    const hasRelationshipDataProperty = this.hasManyRelationship.state.hasReceivedData;\n    if (!hasRelationshipDataProperty) {\n      return false;\n    }\n\n    const relationship = this.graph.getData(this.hasManyRelationship.identifier, this.key) as CollectionRelationship;\n\n    return relationship.data?.every((identifier) => {\n      return this.store._instanceCache.recordIsLoaded(identifier, true) === true;\n    });\n  }\n\n  /**\n   `value()` synchronously returns the current value of the has-many\n   relationship. Unlike `record.relationshipName`, calling\n   `value()` on a reference does not trigger a fetch if the async\n   relationship is not yet loaded. If the relationship is not loaded\n   it will always return `null`.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   post.comments.then(function(comments) {\n     commentsRef.value() === comments\n   })\n   ```\n\n   @method value\n    @public\n   @return {ManyArray}\n   */\n  value(): ManyArray<Related> | null {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n\n    if (!ensureRefCanSubscribe(this)) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this._ref;\n      return null;\n    }\n\n    return support.getManyArray<Related>(this.key);\n  }\n\n  /**\n   Loads the relationship if it is not already loaded.  If the\n   relationship is already loaded this method does not trigger a new\n   load. This causes a request to the specified\n   relationship link or reloads all items currently in the relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.load().then(function(comments) {\n     //...\n   });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference.\n\n   Example\n\n   ```javascript\n   commentsRef.load({ adapterOptions: { isPrivate: true } })\n     .then(function(comments) {\n       //...\n     });\n   ```\n\n   ```app/adapters/comment.js\n   export default ApplicationAdapter.extend({\n     findMany(store, type, id, snapshots) {\n       // In the adapter you will have access to adapterOptions.\n       let adapterOptions = snapshots[0].adapterOptions;\n     }\n   });\n   ```\n\n   @method load\n   @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the ManyArray in\n   this has-many relationship.\n   */\n  async load(options?: BaseFinderOptions): Promise<ManyArray<Related>> {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    const fetchSyncRel =\n      !this.hasManyRelationship.definition.isAsync && !areAllInverseRecordsLoaded(this.store, this._resource());\n    return fetchSyncRel\n      ? (support.reloadHasMany(this.key, options) as Promise<ManyArray<Related>>)\n      : // we cast to fix the return type since typescript and eslint don't understand async functions\n        // properly\n        (support.getHasMany(this.key, options) as Promise<ManyArray<Related>> | ManyArray<Related>);\n  }\n\n  /**\n   Reloads this has-many relationship. This causes a request to the specified\n   relationship link or reloads all items currently in the relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.reload().then(function(comments) {\n     //...\n   });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference. A full example\n   can be found in the `load` method.\n\n   Example\n\n   ```javascript\n   commentsRef.reload({ adapterOptions: { isPrivate: true } })\n   ```\n\n   @method reload\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the ManyArray in this has-many relationship.\n   */\n  reload(options?: BaseFinderOptions): Promise<ManyArray<Related>> {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    return support.reloadHasMany(this.key, options) as Promise<ManyArray<Related>>;\n  }\n}\ndefineSignal(HasManyReference.prototype, '_ref', 0);\n\nexport function isMaybeResource(object: ExistingResourceObject | ResourceIdentifier): object is ExistingResourceObject {\n  const keys = Object.keys(object).filter((k) => k !== 'id' && k !== 'type' && k !== 'lid');\n  return keys.length > 0;\n}\n\nfunction ensureRefCanSubscribe(rel: HasManyReference) {\n  const loaded = rel._isLoaded();\n\n  if (!loaded) {\n    // subscribe to changes\n    // for when we are not loaded yet\n    //\n    // because the graph optimizes the case where a relationship has never been subscribed,\n    // we force accessed to be true here. When we make the graph public we should create a\n    // subscribe/unsubscribe API\n    const edge = rel.graph.get(rel.___identifier, rel.key);\n    assert(`Expected a hasMany relationship for ${rel.___identifier.type}:${rel.key}`, 'accessed' in edge);\n    edge.accessed = true;\n\n    return false;\n  }\n  return true;\n}\n","import type { Graph, ResourceEdge } from '@ember-data/graph/-private';\nimport type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store';\nimport { cached, compat } from '@ember-data/tracking';\nimport { defineSignal } from '@ember-data/tracking/-private';\nimport { DEBUG } from '@warp-drive/build-config/env';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport type { StableExistingRecordIdentifier } from '@warp-drive/core-types/identifier';\nimport type { TypeFromInstance, TypeFromInstanceOrString } from '@warp-drive/core-types/record';\nimport type {\n  LinkObject,\n  Links,\n  Meta,\n  SingleResourceDocument,\n  SingleResourceRelationship,\n} from '@warp-drive/core-types/spec/json-api-raw';\n\nimport type { IsUnknown } from '../belongs-to';\nimport { assertPolymorphicType } from '../debug/assert-polymorphic-type';\nimport type { LegacySupport } from '../legacy-relationships-support';\nimport { areAllInverseRecordsLoaded, LEGACY_SUPPORT } from '../legacy-relationships-support';\nimport type { MaybeBelongsToFields } from '../type-utils';\nimport { isMaybeResource } from './has-many';\n\n/**\n  @module @ember-data/model\n*/\n\ninterface ResourceIdentifier {\n  links?: {\n    related?: string | LinkObject;\n  };\n  meta?: Meta;\n}\n\nfunction isResourceIdentiferWithRelatedLinks(\n  value: SingleResourceRelationship | ResourceIdentifier | null\n): value is ResourceIdentifier & { links: { related: string | LinkObject | null } } {\n  return Boolean(value && value.links && value.links.related);\n}\n\n/**\n A `BelongsToReference` is a low-level API that allows access\n and manipulation of a belongsTo relationship.\n\n It is especially useful when you're dealing with `async` relationships\n from `@ember-data/model` as it allows synchronous access to\n the relationship data if loaded, as well as APIs for loading, reloading\n the data or accessing available information without triggering a load.\n\n It may also be useful when using `sync` relationships with `@ember-data/model`\n that need to be loaded/reloaded with more precise timing than marking the\n relationship as `async` and relying on autofetch would have allowed.\n\n However,keep in mind that marking a relationship as `async: false` will introduce\n bugs into your application if the data is not always guaranteed to be available\n by the time the relationship is accessed. Ergo, it is recommended when using this\n approach to utilize `links` for unloaded relationship state instead of identifiers.\n\n Reference APIs are entangled with the relationship's underlying state,\n thus any getters or cached properties that utilize these will properly\n invalidate if the relationship state changes.\n\n References are \"stable\", meaning that multiple calls to retrieve the reference\n  for a given relationship will always return the same HasManyReference.\n\n @class BelongsToReference\n @public\n */\nexport default class BelongsToReference<\n  T = unknown,\n  K extends string = IsUnknown<T> extends true ? string : MaybeBelongsToFields<T>,\n  Related = K extends keyof T ? Exclude<Awaited<T[K]>, null> : unknown,\n> {\n  declare graph: Graph;\n  declare store: Store;\n  declare belongsToRelationship: ResourceEdge;\n  /**\n   * The field name on the parent record for this has-many relationship.\n   *\n   * @property {String} key\n   * @public\n   */\n  declare key: K;\n\n  /**\n   * The type of resource this relationship will contain.\n   *\n   * @property {String} type\n   * @public\n   */\n  declare type: TypeFromInstanceOrString<Related>;\n\n  // unsubscribe tokens given to us by the notification manager\n  declare ___token: object;\n  declare ___identifier: StableRecordIdentifier<TypeFromInstanceOrString<T>>;\n  declare ___relatedToken: object | null;\n\n  declare _ref: number;\n\n  constructor(\n    store: Store,\n    graph: Graph,\n    parentIdentifier: StableRecordIdentifier<TypeFromInstanceOrString<T>>,\n    belongsToRelationship: ResourceEdge,\n    key: K\n  ) {\n    this.graph = graph;\n    this.key = key;\n    this.belongsToRelationship = belongsToRelationship;\n    this.type = belongsToRelationship.definition.type as TypeFromInstanceOrString<Related>;\n    this.store = store;\n    this.___identifier = parentIdentifier;\n    this.___relatedToken = null;\n\n    this.___token = store.notifications.subscribe(\n      parentIdentifier,\n      (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n        if (bucket === 'relationships' && notifiedKey === key) {\n          this._ref++;\n        }\n      }\n    );\n\n    // TODO inverse\n  }\n\n  destroy() {\n    // TODO @feature we need the notification manager often enough\n    // we should potentially just expose it fully public\n    this.store.notifications.unsubscribe(this.___token);\n    this.___token = null as unknown as object;\n    if (this.___relatedToken) {\n      this.store.notifications.unsubscribe(this.___relatedToken);\n      this.___relatedToken = null;\n    }\n  }\n\n  /**\n   * The identifier of the record that this reference refers to.\n   * `null` if no related record is known.\n   *\n   * @property {StableRecordIdentifier | null} identifier\n   * @public\n   */\n  @cached\n  @compat\n  get identifier(): StableRecordIdentifier<TypeFromInstanceOrString<Related>> | null {\n    if (this.___relatedToken) {\n      this.store.notifications.unsubscribe(this.___relatedToken);\n      this.___relatedToken = null;\n    }\n\n    const resource = this._resource();\n    if (resource && resource.data) {\n      const identifier = this.store.identifierCache.getOrCreateRecordIdentifier(resource.data);\n      this.___relatedToken = this.store.notifications.subscribe(\n        identifier,\n        (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n          if (bucket === 'identity' || (bucket === 'attributes' && notifiedKey === 'id')) {\n            this._ref++;\n          }\n        }\n      );\n\n      return identifier as StableRecordIdentifier<TypeFromInstanceOrString<Related>>;\n    }\n\n    return null;\n  }\n\n  /**\n   The `id` of the record that this reference refers to. Together, the\n   `type()` and `id()` methods form a composite key for the identity\n   map. This can be used to access the id of an async relationship\n   without triggering a fetch that would normally happen if you\n   attempted to use `record.relationship.id`.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n    @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"id\") {\n      let id = userRef.id();\n    }\n   ```\n\n   @method id\n   @public\n   @return {String} The id of the record in this belongsTo relationship.\n   */\n  id(): string | null {\n    return this.identifier?.id || null;\n  }\n\n  /**\n   The link Ember Data will use to fetch or reload this belongs-to\n   relationship. By default it uses only the \"related\" resource linkage.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: '/articles/1/author'\n            }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"link\") {\n      let link = userRef.link();\n    }\n   ```\n\n   @method link\n   @public\n   @return {String} The link Ember Data will use to fetch or reload this belongs-to relationship.\n   */\n  link(): string | null {\n    const resource = this._resource();\n\n    if (isResourceIdentiferWithRelatedLinks(resource)) {\n      if (resource.links) {\n        const related = resource.links.related;\n        return !related || typeof related === 'string' ? related : related.href;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * any links that have been received for this relationship\n   *\n   * @method links\n   * @public\n   * @return\n   */\n  links(): Links | null {\n    const resource = this._resource();\n\n    return resource && resource.links ? resource.links : null;\n  }\n\n  /**\n   The meta data for the belongs-to relationship.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: {\n                href: '/articles/1/author'\n              },\n            },\n            meta: {\n              lastUpdated: 1458014400000\n            }\n          }\n        }\n      }\n    });\n\n   let userRef = blog.belongsTo('user');\n\n   userRef.meta() // { lastUpdated: 1458014400000 }\n   ```\n\n   @method meta\n    @public\n   @return {Object} The meta information for the belongs-to relationship.\n   */\n  meta(): Meta | null {\n    let meta: Meta | null = null;\n    const resource = this._resource();\n    if (resource && resource.meta && typeof resource.meta === 'object') {\n      meta = resource.meta;\n    }\n    return meta;\n  }\n\n  _resource() {\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    this._ref; // subscribe\n    const cache = this.store.cache;\n    return cache.getRelationship(this.___identifier, this.key) as SingleResourceRelationship<\n      StableRecordIdentifier<TypeFromInstance<Related>>\n    >;\n  }\n\n  /**\n   This returns a string that represents how the reference will be\n   looked up when it is loaded. If the relationship has a link it will\n   use the \"link\" otherwise it defaults to \"id\".\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   // get the identifier of the reference\n   if (commentsRef.remoteType() === \"ids\") {\n     let ids = commentsRef.ids();\n   } else if (commentsRef.remoteType() === \"link\") {\n     let link = commentsRef.link();\n   }\n   ```\n\n   @method remoteType\n   @public\n   @return {String} The name of the remote type. This should either be `link` or `id`\n   */\n  remoteType(): 'link' | 'id' {\n    const value = this._resource();\n    if (isResourceIdentiferWithRelatedLinks(value)) {\n      return 'link';\n    }\n    return 'id';\n  }\n\n  /**\n   `push` can be used to update the data in the relationship and EmberData\n   will treat the new data as the canonical value of this relationship on\n   the backend. A value of `null` (e.g. `{ data: null }`) can be passed to\n   clear the relationship.\n\n   Example model\n\n   ```app/models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @belongsTo('user', { async: true, inverse: null }) user;\n    }\n   ```\n\n   Setup some initial state, note we haven't loaded the user yet:\n\n   ```js\n   const blog = store.push({\n      data: {\n        type: 'blog',\n        id: '1',\n        relationships: {\n          user: {\n            data: { type: 'user', id: '1' }\n          }\n        }\n      }\n   });\n\n   const userRef = blog.belongsTo('user');\n   userRef.id(); // '1'\n   ```\n\n   Update the state using `push`, note we can do this even without\n   having loaded the user yet by providing a resource-identifier.\n\n   Both full a resource and a resource-identifier are supported.\n\n   ```js\n   await userRef.push({\n      data: {\n        type: 'user',\n        id: '2',\n      }\n    });\n\n    userRef.id(); // '2'\n   ```\n\n   You may also pass in links and meta fore the relationship, and sideload\n   additional resources that might be required.\n\n   ```js\n    await userRef.push({\n        data: {\n          type: 'user',\n          id: '2',\n        },\n        links: {\n          related: '/articles/1/author'\n        },\n        meta: {\n          lastUpdated: Date.now()\n        },\n        included: [\n          {\n            type: 'user-preview',\n            id: '2',\n            attributes: {\n              username: '@runspired'\n            }\n          }\n        ]\n      });\n    ```\n\n   By default, the store will attempt to fetch the record if it is not loaded or its\n   resource data is not included in the call to `push` before resolving the returned\n   promise with the new state..\n\n   Alternatively, pass `true` as the second argument to avoid fetching unloaded records\n   and instead the promise will resolve with void without attempting to fetch. This is\n   particularly useful if you want to update the state of the relationship without\n   forcing the load of all of the associated record.\n\n   @method push\n   @public\n   @param {Object} doc a JSONAPI document object describing the new value of this relationship.\n   @param {Boolean} [skipFetch] if `true`, do not attempt to fetch unloaded records\n   @return {Promise<OpaqueRecordInstance | null | void>}\n  */\n  async push(doc: SingleResourceDocument, skipFetch?: boolean): Promise<Related | null | void> {\n    const { store } = this;\n    const isResourceData = doc.data && isMaybeResource(doc.data);\n    const added = isResourceData\n      ? (store._push(doc, true) as StableExistingRecordIdentifier)\n      : doc.data\n        ? (store.identifierCache.getOrCreateRecordIdentifier(doc.data) as StableExistingRecordIdentifier)\n        : null;\n    const { identifier } = this.belongsToRelationship;\n\n    if (DEBUG) {\n      if (added) {\n        assertPolymorphicType(identifier, this.belongsToRelationship.definition, added, store);\n      }\n    }\n\n    const newData: SingleResourceRelationship = {};\n\n    // only set data if it was passed in\n    if (doc.data || doc.data === null) {\n      newData.data = added;\n    }\n    if ('links' in doc) {\n      newData.links = doc.links;\n    }\n    if ('meta' in doc) {\n      newData.meta = doc.meta;\n    }\n    store._join(() => {\n      this.graph.push({\n        op: 'updateRelationship',\n        record: identifier,\n        field: this.key,\n        value: newData,\n      });\n    });\n\n    if (!skipFetch) return this.load();\n  }\n\n  /**\n   `value()` synchronously returns the current value of the belongs-to\n   relationship. Unlike `record.relationshipName`, calling\n   `value()` on a reference does not trigger a fetch if the async\n   relationship is not yet loaded. If the relationship is not loaded\n   it will always return `null`.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.value(); // null\n\n   // provide data for reference\n   userRef.push({\n      data: {\n        type: 'user',\n        id: 1,\n        attributes: {\n          username: \"@user\"\n        }\n      }\n    }).then(function(user) {\n      userRef.value(); // user\n    });\n   ```\n\n   @method value\n    @public\n   @return {Model} the record in this relationship\n   */\n  value(): Related | null {\n    const resource = this._resource();\n    return resource && resource.data ? this.store.peekRecord(resource.data) : null;\n  }\n\n  /**\n   Loads a record in a belongs-to relationship if it is not already\n   loaded. If the relationship is already loaded this method does not\n   trigger a new load.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.value(); // null\n\n   userRef.load().then(function(user) {\n      userRef.value() === user\n    });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference.\n\n   Example\n\n   ```javascript\n   userRef.load({ adapterOptions: { isPrivate: true } }).then(function(user) {\n     userRef.value() === user;\n   });\n   ```\n   ```app/adapters/user.js\n   import Adapter from '@ember-data/adapter';\n\n   export default class UserAdapter extends Adapter {\n     findRecord(store, type, id, snapshot) {\n       // In the adapter you will have access to adapterOptions.\n       let adapterOptions = snapshot.adapterOptions;\n     }\n   });\n   ```\n\n   @method load\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the record in this belongs-to relationship.\n   */\n  async load(options?: Record<string, unknown>): Promise<Related | null> {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    const fetchSyncRel =\n      !this.belongsToRelationship.definition.isAsync && !areAllInverseRecordsLoaded(this.store, this._resource());\n    return fetchSyncRel\n      ? support.reloadBelongsTo(this.key, options).then(() => this.value())\n      : // we cast to fix the return type since typescript and eslint don't understand async functions\n        // properly\n        (support.getBelongsTo(this.key, options) as Promise<Related | null>);\n  }\n\n  /**\n   Triggers a reload of the value in this relationship. If the\n   remoteType is `\"link\"` Ember Data will use the relationship link to\n   reload the relationship. Otherwise it will reload the record by its\n   id.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.reload().then(function(user) {\n      userRef.value() === user\n    });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference. A full example\n   can be found in the `load` method.\n\n   Example\n\n   ```javascript\n   userRef.reload({ adapterOptions: { isPrivate: true } })\n   ```\n\n   @method reload\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the record in this belongs-to relationship after the reload has completed.\n   */\n  reload(options?: Record<string, unknown>) {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    return support.reloadBelongsTo(this.key, options).then(() => this.value());\n  }\n}\ndefineSignal(BelongsToReference.prototype, '_ref', 0);\n","import { dependencySatisfies, importSync, macroCondition } from '@embroider/macros';\n\nimport type { CollectionEdge, Graph, GraphEdge, ResourceEdge, UpgradedMeta } from '@ember-data/graph/-private';\nimport { upgradeStore } from '@ember-data/legacy-compat/-private';\nimport type Store from '@ember-data/store';\nimport type { Document } from '@ember-data/store';\nimport type { LiveArray } from '@ember-data/store/-private';\nimport {\n  fastPush,\n  isStableIdentifier,\n  peekCache,\n  recordIdentifierFor,\n  RelatedCollection as ManyArray,\n  SOURCE,\n  storeFor,\n} from '@ember-data/store/-private';\nimport type { BaseFinderOptions } from '@ember-data/store/types';\nimport { DEBUG } from '@warp-drive/build-config/env';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport { getOrSetGlobal } from '@warp-drive/core-types/-private';\nimport type { Cache } from '@warp-drive/core-types/cache';\nimport type { CollectionRelationship } from '@warp-drive/core-types/cache/relationship';\nimport type { LocalRelationshipOperation } from '@warp-drive/core-types/graph';\nimport type { OpaqueRecordInstance, TypeFromInstanceOrString } from '@warp-drive/core-types/record';\nimport { EnableHydration } from '@warp-drive/core-types/request';\nimport type {\n  CollectionResourceRelationship,\n  InnerRelationshipDocument,\n  SingleResourceRelationship,\n} from '@warp-drive/core-types/spec/json-api-raw';\n\nimport type { MinimalLegacyRecord } from './model-methods';\nimport type { BelongsToProxyCreateArgs, BelongsToProxyMeta } from './promise-belongs-to';\nimport { PromiseBelongsTo } from './promise-belongs-to';\nimport type { HasManyProxyCreateArgs } from './promise-many-array';\nimport { PromiseManyArray } from './promise-many-array';\nimport BelongsToReference from './references/belongs-to';\nimport HasManyReference from './references/has-many';\n\ntype PromiseBelongsToFactory<T = unknown> = { create(args: BelongsToProxyCreateArgs<T>): PromiseBelongsTo<T> };\n\nexport const LEGACY_SUPPORT = getOrSetGlobal(\n  'LEGACY_SUPPORT',\n  new Map<StableRecordIdentifier | MinimalLegacyRecord, LegacySupport>()\n);\n\nexport function lookupLegacySupport(record: MinimalLegacyRecord): LegacySupport {\n  const identifier = recordIdentifierFor(record);\n  assert(`Expected a record`, identifier);\n  let support = LEGACY_SUPPORT.get(identifier);\n\n  if (!support) {\n    assert(`Memory Leak Detected`, !record.isDestroyed && !record.isDestroying);\n    support = new LegacySupport(record);\n    LEGACY_SUPPORT.set(identifier, support);\n    LEGACY_SUPPORT.set(record, support);\n  }\n\n  return support;\n}\n\nexport class LegacySupport {\n  declare record: MinimalLegacyRecord;\n  declare store: Store;\n  declare graph: Graph;\n  declare cache: Cache;\n  declare references: Record<string, BelongsToReference | HasManyReference>;\n  declare identifier: StableRecordIdentifier;\n  declare _manyArrayCache: Record<string, ManyArray>;\n  declare _relationshipPromisesCache: Record<string, Promise<ManyArray | OpaqueRecordInstance>>;\n  declare _relationshipProxyCache: Record<string, PromiseManyArray | PromiseBelongsTo | undefined>;\n  declare _pending: Record<string, Promise<StableRecordIdentifier | null> | undefined>;\n\n  declare isDestroying: boolean;\n  declare isDestroyed: boolean;\n\n  constructor(record: MinimalLegacyRecord) {\n    this.record = record;\n    this.store = storeFor(record)!;\n    this.identifier = recordIdentifierFor(record);\n    this.cache = peekCache(record);\n\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      const graphFor = (importSync('@ember-data/graph/-private') as typeof import('@ember-data/graph/-private'))\n        .graphFor;\n\n      this.graph = graphFor(this.store);\n    }\n\n    this._manyArrayCache = Object.create(null) as Record<string, ManyArray>;\n    this._relationshipPromisesCache = Object.create(null) as Record<string, Promise<ManyArray | OpaqueRecordInstance>>;\n    this._relationshipProxyCache = Object.create(null) as Record<string, PromiseManyArray | PromiseBelongsTo>;\n    this._pending = Object.create(null) as Record<string, Promise<StableRecordIdentifier | null>>;\n    this.references = Object.create(null) as Record<string, BelongsToReference>;\n  }\n\n  _syncArray(array: LiveArray) {\n    // It’s possible the parent side of the relationship may have been destroyed by this point\n    if (this.isDestroyed || this.isDestroying) {\n      return;\n    }\n    const currentState = array[SOURCE];\n    const identifier = this.identifier;\n\n    const [identifiers, jsonApi] = this._getCurrentState(identifier, (array as ManyArray).key);\n\n    if (jsonApi.meta) {\n      array.meta = jsonApi.meta;\n    }\n\n    if (jsonApi.links) {\n      array.links = jsonApi.links;\n    }\n\n    currentState.length = 0;\n    fastPush(currentState, identifiers);\n  }\n\n  mutate(mutation: LocalRelationshipOperation): void {\n    this.cache.mutate(mutation);\n  }\n\n  _findBelongsTo(\n    key: string,\n    resource: SingleResourceRelationship,\n    relationship: ResourceEdge,\n    options?: BaseFinderOptions\n  ): Promise<OpaqueRecordInstance | null> {\n    // TODO @runspired follow up if parent isNew then we should not be attempting load here\n    // TODO @runspired follow up on whether this should be in the relationship requests cache\n    return this._findBelongsToByJsonApiResource(resource, this.identifier, relationship, options).then(\n      (identifier: StableRecordIdentifier | null) =>\n        handleCompletedRelationshipRequest(this, key, relationship, identifier),\n      (e: Error) => handleCompletedRelationshipRequest(this, key, relationship, null, e)\n    );\n  }\n\n  reloadBelongsTo(key: string, options?: BaseFinderOptions): Promise<OpaqueRecordInstance | null> {\n    const loadingPromise = this._relationshipPromisesCache[key] as Promise<OpaqueRecordInstance | null> | undefined;\n    if (loadingPromise) {\n      return loadingPromise;\n    }\n\n    const relationship = this.graph.get(this.identifier, key);\n    assert(`Expected ${key} to be a belongs-to relationship`, isBelongsTo(relationship));\n\n    const resource = this.cache.getRelationship(this.identifier, key) as SingleResourceRelationship;\n    relationship.state.hasFailedLoadAttempt = false;\n    relationship.state.shouldForceReload = true;\n    const promise = this._findBelongsTo(key, resource, relationship, options);\n    if (this._relationshipProxyCache[key]) {\n      // @ts-expect-error\n      return this._updatePromiseProxyFor('belongsTo', key, { promise });\n    }\n    return promise;\n  }\n\n  getBelongsTo(key: string, options?: BaseFinderOptions): PromiseBelongsTo | OpaqueRecordInstance | null {\n    const { identifier, cache } = this;\n    const resource = cache.getRelationship(this.identifier, key) as SingleResourceRelationship;\n    const relatedIdentifier = resource && resource.data ? resource.data : null;\n    assert(`Expected a stable identifier`, !relatedIdentifier || isStableIdentifier(relatedIdentifier));\n\n    const store = this.store;\n    const relationship = this.graph.get(this.identifier, key);\n    assert(`Expected ${key} to be a belongs-to relationship`, isBelongsTo(relationship));\n\n    const isAsync = relationship.definition.isAsync;\n    const _belongsToState: BelongsToProxyMeta = {\n      key,\n      store,\n      legacySupport: this,\n      modelName: relationship.definition.type,\n    };\n\n    if (isAsync) {\n      if (relationship.state.hasFailedLoadAttempt) {\n        return this._relationshipProxyCache[key] as PromiseBelongsTo;\n      }\n\n      const promise = this._findBelongsTo(key, resource, relationship, options);\n      const isLoaded = relatedIdentifier && store._instanceCache.recordIsLoaded(relatedIdentifier);\n\n      return this._updatePromiseProxyFor('belongsTo', key, {\n        promise,\n        content: isLoaded ? store._instanceCache.getRecord(relatedIdentifier) : null,\n        _belongsToState,\n      });\n    } else {\n      if (relatedIdentifier === null) {\n        return null;\n      } else {\n        assert(\n          `You looked up the '${key}' relationship on a '${identifier.type}' with id ${\n            identifier.id || 'null'\n          } but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async (\\`belongsTo(<type>, { async: true, inverse: <inverse> })\\`)`,\n          store._instanceCache.recordIsLoaded(relatedIdentifier, true)\n        );\n        return store._instanceCache.getRecord(relatedIdentifier);\n      }\n    }\n  }\n\n  setDirtyBelongsTo(key: string, value: OpaqueRecordInstance | null) {\n    return this.cache.mutate(\n      {\n        op: 'replaceRelatedRecord',\n        record: this.identifier,\n        field: key,\n        value: extractIdentifierFromRecord(value),\n      },\n      // @ts-expect-error\n      true\n    );\n  }\n\n  _getCurrentState<T>(\n    identifier: StableRecordIdentifier,\n    field: string\n  ): [StableRecordIdentifier<TypeFromInstanceOrString<T>>[], CollectionRelationship] {\n    const jsonApi = this.cache.getRelationship(identifier, field) as CollectionRelationship;\n    const cache = this.store._instanceCache;\n    const identifiers: StableRecordIdentifier<TypeFromInstanceOrString<T>>[] = [];\n    if (jsonApi.data) {\n      for (let i = 0; i < jsonApi.data.length; i++) {\n        const relatedIdentifier = jsonApi.data[i] as StableRecordIdentifier<TypeFromInstanceOrString<T>>;\n        assert(`Expected a stable identifier`, isStableIdentifier(relatedIdentifier));\n        if (cache.recordIsLoaded(relatedIdentifier, true)) {\n          identifiers.push(relatedIdentifier);\n        }\n      }\n    }\n\n    return [identifiers, jsonApi];\n  }\n\n  getManyArray<T>(key: string, definition?: UpgradedMeta): ManyArray<T> {\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      let manyArray: ManyArray<T> | undefined = this._manyArrayCache[key] as ManyArray<T> | undefined;\n      if (!definition) {\n        definition = this.graph.get(this.identifier, key).definition;\n      }\n\n      if (!manyArray) {\n        const [identifiers, doc] = this._getCurrentState<T>(this.identifier, key);\n\n        manyArray = new ManyArray<T>({\n          store: this.store,\n          type: definition.type as TypeFromInstanceOrString<T>,\n          identifier: this.identifier,\n          cache: this.cache,\n          identifiers,\n          key,\n          meta: doc.meta || null,\n          links: doc.links || null,\n          isPolymorphic: definition.isPolymorphic,\n          isAsync: definition.isAsync,\n          _inverseIsAsync: definition.inverseIsAsync,\n          // @ts-expect-error Typescript doesn't have a way for us to thread the generic backwards so it infers unknown instead of T\n          manager: this,\n          isLoaded: !definition.isAsync,\n          allowMutation: true,\n        });\n        this._manyArrayCache[key] = manyArray;\n      }\n\n      return manyArray;\n    }\n    assert('hasMany only works with the @ember-data/json-api package');\n  }\n\n  fetchAsyncHasMany(\n    key: string,\n    relationship: CollectionEdge,\n    manyArray: ManyArray,\n    options?: BaseFinderOptions\n  ): Promise<ManyArray> {\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      let loadingPromise = this._relationshipPromisesCache[key] as Promise<ManyArray> | undefined;\n      if (loadingPromise) {\n        return loadingPromise;\n      }\n\n      const jsonApi = this.cache.getRelationship(this.identifier, key) as CollectionRelationship;\n      const promise = this._findHasManyByJsonApiResource(jsonApi, this.identifier, relationship, options);\n\n      if (!promise) {\n        manyArray.isLoaded = true;\n        return Promise.resolve(manyArray);\n      }\n\n      loadingPromise = promise.then(\n        () => handleCompletedRelationshipRequest(this, key, relationship, manyArray),\n        (e: Error) => handleCompletedRelationshipRequest(this, key, relationship, manyArray, e)\n      );\n      this._relationshipPromisesCache[key] = loadingPromise;\n      return loadingPromise;\n    }\n    assert('hasMany only works with the @ember-data/json-api package');\n  }\n\n  reloadHasMany<T>(key: string, options?: BaseFinderOptions): Promise<ManyArray<T>> | PromiseManyArray<T> {\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      const loadingPromise = this._relationshipPromisesCache[key];\n      if (loadingPromise) {\n        return loadingPromise as Promise<ManyArray<T>>;\n      }\n      const relationship = this.graph.get(this.identifier, key) as CollectionEdge;\n      const { definition, state } = relationship;\n\n      state.hasFailedLoadAttempt = false;\n      state.shouldForceReload = true;\n      const manyArray = this.getManyArray(key, definition);\n      const promise = this.fetchAsyncHasMany(key, relationship, manyArray, options);\n\n      if (this._relationshipProxyCache[key]) {\n        return this._updatePromiseProxyFor('hasMany', key, { promise }) as PromiseManyArray<T>;\n      }\n\n      return promise as Promise<ManyArray<T>>;\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  getHasMany(key: string, options?: BaseFinderOptions): PromiseManyArray | ManyArray {\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      const relationship = this.graph.get(this.identifier, key) as CollectionEdge;\n      const { definition, state } = relationship;\n      const manyArray = this.getManyArray(key, definition);\n\n      if (definition.isAsync) {\n        if (state.hasFailedLoadAttempt) {\n          return this._relationshipProxyCache[key] as PromiseManyArray;\n        }\n\n        const promise = this.fetchAsyncHasMany(key, relationship, manyArray, options);\n\n        return this._updatePromiseProxyFor('hasMany', key, { promise, content: manyArray });\n      } else {\n        assert(\n          `You looked up the '${key}' relationship on a '${this.identifier.type}' with id ${\n            this.identifier.id || 'null'\n          } but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async ('hasMany(<type>, { async: true, inverse: <inverse> })')`,\n          !anyUnloaded(this.store, relationship)\n        );\n\n        return manyArray;\n      }\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  _updatePromiseProxyFor(kind: 'hasMany', key: string, args: HasManyProxyCreateArgs): PromiseManyArray;\n  _updatePromiseProxyFor(kind: 'belongsTo', key: string, args: BelongsToProxyCreateArgs): PromiseBelongsTo;\n  _updatePromiseProxyFor(\n    kind: 'belongsTo',\n    key: string,\n    args: { promise: Promise<OpaqueRecordInstance | null> }\n  ): PromiseBelongsTo;\n  _updatePromiseProxyFor(\n    kind: 'hasMany' | 'belongsTo',\n    key: string,\n    args: BelongsToProxyCreateArgs | HasManyProxyCreateArgs | { promise: Promise<OpaqueRecordInstance | null> }\n  ): PromiseBelongsTo | PromiseManyArray {\n    let promiseProxy = this._relationshipProxyCache[key];\n    if (kind === 'hasMany') {\n      const { promise, content } = args as HasManyProxyCreateArgs;\n      if (promiseProxy) {\n        assert(`Expected a PromiseManyArray`, '_update' in promiseProxy);\n        promiseProxy._update(promise, content);\n      } else {\n        promiseProxy = this._relationshipProxyCache[key] = new PromiseManyArray(promise, content);\n      }\n      return promiseProxy;\n    }\n    if (promiseProxy) {\n      const { promise, content } = args as BelongsToProxyCreateArgs;\n      assert(`Expected a PromiseBelongsTo`, '_belongsToState' in promiseProxy);\n\n      if (content !== undefined) {\n        promiseProxy.set('content', content);\n      }\n      void promiseProxy.set('promise', promise);\n    } else {\n      promiseProxy = (PromiseBelongsTo as unknown as PromiseBelongsToFactory).create(args as BelongsToProxyCreateArgs);\n      this._relationshipProxyCache[key] = promiseProxy;\n    }\n\n    return promiseProxy;\n  }\n\n  referenceFor(kind: 'belongsTo', name: string): BelongsToReference;\n  referenceFor(kind: 'hasMany', name: string): HasManyReference;\n  referenceFor(kind: 'belongsTo' | 'hasMany', name: string) {\n    let reference = this.references[name];\n\n    if (!reference) {\n      if (macroCondition(!dependencySatisfies('@ember-data/graph', '*'))) {\n        // TODO @runspired while this feels odd, it is not a regression in capability because we do\n        // not today support references pulling from RecordDatas other than our own\n        // because of the intimate API access involved. This is something we will need to redesign.\n        assert(`snapshot.belongsTo only supported for @ember-data/json-api`);\n      }\n      const { graph, identifier } = this;\n      const relationship = graph.get(identifier, name);\n\n      if (DEBUG) {\n        if (kind) {\n          const modelName = identifier.type;\n          const actualRelationshipKind = relationship.definition.kind;\n          assert(\n            `You tried to get the '${name}' relationship on a '${modelName}' via record.${kind}('${name}'), but the relationship is of kind '${actualRelationshipKind}'. Use record.${actualRelationshipKind}('${name}') instead.`,\n            actualRelationshipKind === kind\n          );\n        }\n      }\n\n      const relationshipKind = relationship.definition.kind;\n\n      if (relationshipKind === 'belongsTo') {\n        reference = new BelongsToReference(this.store, graph, identifier, relationship as ResourceEdge, name);\n      } else if (relationshipKind === 'hasMany') {\n        reference = new HasManyReference(this.store, graph, identifier, relationship as CollectionEdge, name);\n      }\n\n      this.references[name] = reference;\n    }\n\n    return reference;\n  }\n\n  _findHasManyByJsonApiResource(\n    resource: CollectionResourceRelationship,\n    parentIdentifier: StableRecordIdentifier,\n    relationship: CollectionEdge,\n    options: BaseFinderOptions = {}\n  ): Promise<void | unknown[]> | void {\n    if (macroCondition(dependencySatisfies('@ember-data/graph', '*'))) {\n      if (!resource) {\n        return;\n      }\n      const { definition, state } = relationship;\n      upgradeStore(this.store);\n      const adapter = this.store.adapterFor?.(definition.type);\n      const { isStale, hasDematerializedInverse, hasReceivedData, isEmpty, shouldForceReload } = state;\n      const allInverseRecordsAreLoaded = areAllInverseRecordsLoaded(this.store, resource);\n      const identifiers = resource.data;\n      const shouldFindViaLink =\n        resource.links &&\n        resource.links.related &&\n        (typeof adapter?.findHasMany === 'function' || typeof identifiers === 'undefined') &&\n        (shouldForceReload || hasDematerializedInverse || isStale || (!allInverseRecordsAreLoaded && !isEmpty));\n\n      const field = this.store.schema.fields({ type: definition.inverseType }).get(definition.key);\n      assert(\n        `Expected a hasMany field definition for ${definition.inverseType}.${definition.key}`,\n        field && field.kind === 'hasMany'\n      );\n\n      const request = {\n        useLink: shouldFindViaLink,\n        field,\n        links: resource.links,\n        meta: resource.meta,\n        options,\n        record: parentIdentifier,\n      };\n\n      // fetch via link\n      if (shouldFindViaLink) {\n        assert(`Expected collection to be an array`, !identifiers || Array.isArray(identifiers));\n        assert(`Expected stable identifiers`, !identifiers || identifiers.every(isStableIdentifier));\n\n        const req = field.options.linksMode\n          ? {\n              url: getRelatedLink(resource),\n              op: 'findHasMany',\n              method: 'GET' as const,\n              records: identifiers || [],\n              data: request,\n              [EnableHydration]: false,\n            }\n          : {\n              op: 'findHasMany',\n              records: identifiers || [],\n              data: request,\n              cacheOptions: { [Symbol.for('wd:skip-cache')]: true },\n            };\n        return this.store.request(req) as unknown as Promise<void>;\n      }\n\n      const preferLocalCache = hasReceivedData && !isEmpty;\n      const hasLocalPartialData =\n        hasDematerializedInverse || (isEmpty && Array.isArray(identifiers) && identifiers.length > 0);\n      const attemptLocalCache = !shouldForceReload && !isStale && (preferLocalCache || hasLocalPartialData);\n\n      if (attemptLocalCache && allInverseRecordsAreLoaded) {\n        return;\n      }\n\n      const hasData = hasReceivedData && !isEmpty;\n      if (attemptLocalCache || hasData || hasLocalPartialData) {\n        assert(`Expected collection to be an array`, Array.isArray(identifiers));\n        assert(`Expected stable identifiers`, identifiers.every(isStableIdentifier));\n\n        options.reload = options.reload || !attemptLocalCache || undefined;\n        return this.store.request({\n          op: 'findHasMany',\n          records: identifiers,\n          data: request,\n          cacheOptions: { [Symbol.for('wd:skip-cache')]: true },\n        }) as unknown as Promise<void>;\n      }\n\n      // we were explicitly told we have no data and no links.\n      //   TODO if the relationshipIsStale, should we hit the adapter anyway?\n      return;\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  _findBelongsToByJsonApiResource(\n    resource: SingleResourceRelationship,\n    parentIdentifier: StableRecordIdentifier,\n    relationship: ResourceEdge,\n    options: BaseFinderOptions = {}\n  ): Promise<StableRecordIdentifier | null> {\n    if (!resource) {\n      return Promise.resolve(null);\n    }\n    const key = relationship.definition.key;\n\n    // interleaved promises mean that we MUST cache this here\n    // in order to prevent infinite re-render if the request\n    // fails.\n    if (this._pending[key]) {\n      return this._pending[key];\n    }\n\n    const identifier = resource.data ? resource.data : null;\n    assert(`Expected a stable identifier`, !identifier || isStableIdentifier(identifier));\n\n    const { isStale, hasDematerializedInverse, hasReceivedData, isEmpty, shouldForceReload } = relationship.state;\n\n    const allInverseRecordsAreLoaded = areAllInverseRecordsLoaded(this.store, resource);\n    const shouldFindViaLink =\n      resource.links?.related &&\n      (shouldForceReload || hasDematerializedInverse || isStale || (!allInverseRecordsAreLoaded && !isEmpty));\n\n    const field = this.store.schema.fields(this.identifier).get(relationship.definition.key);\n    assert(\n      `Attempted to access a belongsTo relationship but no definition exists for it`,\n      field && field.kind === 'belongsTo'\n    );\n    const request = {\n      useLink: shouldFindViaLink,\n      field,\n      links: resource.links,\n      meta: resource.meta,\n      options,\n      record: parentIdentifier,\n    };\n\n    // fetch via link\n    if (shouldFindViaLink) {\n      const req = field.options.linksMode\n        ? {\n            url: getRelatedLink(resource),\n            op: 'findBelongsTo',\n            method: 'GET' as const,\n            records: identifier ? [identifier] : [],\n            data: request,\n            [EnableHydration]: false,\n          }\n        : {\n            op: 'findBelongsTo',\n            records: identifier ? [identifier] : [],\n            data: request,\n            cacheOptions: { [Symbol.for('wd:skip-cache')]: true },\n          };\n      const future = this.store.request<StableRecordIdentifier | null>(req);\n      this._pending[key] = future\n        .then((doc) =>\n          field.options.linksMode\n            ? (doc.content as unknown as Document<StableRecordIdentifier | null>).data!\n            : doc.content\n        )\n        .finally(() => {\n          this._pending[key] = undefined;\n        });\n      return this._pending[key];\n    }\n\n    const preferLocalCache = hasReceivedData && allInverseRecordsAreLoaded && !isEmpty;\n    const hasLocalPartialData = hasDematerializedInverse || (isEmpty && resource.data);\n    // null is explicit empty, undefined is \"we don't know anything\"\n    const localDataIsEmpty = !identifier;\n    const attemptLocalCache = !shouldForceReload && !isStale && (preferLocalCache || hasLocalPartialData);\n\n    // we dont need to fetch and are empty\n    if (attemptLocalCache && localDataIsEmpty) {\n      return Promise.resolve(null);\n    }\n\n    // we dont need to fetch because we are local state\n    const resourceIsLocal = identifier?.id === null;\n    if ((attemptLocalCache && allInverseRecordsAreLoaded) || resourceIsLocal) {\n      return Promise.resolve(identifier);\n    }\n\n    // we may need to fetch\n    if (identifier) {\n      assert(`Cannot fetch belongs-to relationship with no information`, identifier);\n      options.reload = options.reload || !attemptLocalCache || undefined;\n\n      this._pending[key] = this.store\n        .request<StableRecordIdentifier | null>({\n          op: 'findBelongsTo',\n          records: [identifier],\n          data: request,\n          cacheOptions: { [Symbol.for('wd:skip-cache')]: true },\n        })\n        .then((doc) => doc.content)\n        .finally(() => {\n          this._pending[key] = undefined;\n        });\n      return this._pending[key];\n    }\n\n    // we were explicitly told we have no data and no links.\n    //   TODO if the relationshipIsStale, should we hit the adapter anyway?\n    return Promise.resolve(null);\n  }\n\n  destroy() {\n    this.isDestroying = true;\n\n    let cache: Record<string, { destroy(): void } | undefined> = this._manyArrayCache;\n    this._manyArrayCache = Object.create(null) as Record<string, ManyArray>;\n    Object.keys(cache).forEach((key) => {\n      cache[key]!.destroy();\n    });\n\n    cache = this._relationshipProxyCache;\n    this._relationshipProxyCache = Object.create(null) as Record<string, PromiseManyArray | PromiseBelongsTo>;\n    Object.keys(cache).forEach((key) => {\n      const proxy = cache[key]!;\n      if (proxy.destroy) {\n        proxy.destroy();\n      }\n    });\n\n    cache = this.references;\n    this.references = Object.create(null) as Record<string, BelongsToReference | HasManyReference>;\n    Object.keys(cache).forEach((key) => {\n      cache[key]!.destroy();\n    });\n    this.isDestroyed = true;\n  }\n}\n\nfunction getRelatedLink(resource: SingleResourceRelationship | CollectionResourceRelationship): string {\n  const related = resource.links?.related;\n  assert(`Expected a related link`, related);\n\n  return typeof related === 'object' ? related.href : related;\n}\n\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge,\n  value: StableRecordIdentifier | null\n): OpaqueRecordInstance | null;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: CollectionEdge,\n  value: ManyArray\n): ManyArray;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge,\n  value: null,\n  error: Error\n): never;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: CollectionEdge,\n  value: ManyArray,\n  error: Error\n): never;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge | CollectionEdge,\n  value: ManyArray | StableRecordIdentifier | null,\n  error?: Error\n): ManyArray | OpaqueRecordInstance | null {\n  delete recordExt._relationshipPromisesCache[key];\n  relationship.state.shouldForceReload = false;\n  const isHasMany = relationship.definition.kind === 'hasMany';\n\n  if (isHasMany) {\n    // we don't notify the record property here to avoid refetch\n    // only the many array\n    (value as ManyArray).notify();\n  }\n\n  if (error) {\n    relationship.state.hasFailedLoadAttempt = true;\n    const proxy = recordExt._relationshipProxyCache[key];\n    // belongsTo relationships are sometimes unloaded\n    // when a load fails, in this case we need\n    // to make sure that we aren't proxying\n    // to destroyed content\n    // for the sync belongsTo reload case there will be no proxy\n    // for the async reload case there will be no proxy if the ui\n    // has never been accessed\n    if (proxy && !isHasMany) {\n      // @ts-expect-error unsure why this is not resolving the boolean but async belongsTo is weird\n      if (proxy.content && proxy.content.isDestroying) {\n        (proxy as PromiseBelongsTo).set('content', null);\n      }\n      recordExt.store.notifications._flush();\n    }\n\n    throw error;\n  }\n\n  if (isHasMany) {\n    (value as ManyArray).isLoaded = true;\n  } else {\n    recordExt.store.notifications._flush();\n  }\n\n  relationship.state.hasFailedLoadAttempt = false;\n  // only set to not stale if no error is thrown\n  relationship.state.isStale = false;\n\n  return isHasMany || !value ? value : recordExt.store.peekRecord(value as StableRecordIdentifier);\n}\n\ntype PromiseProxyRecord = { then(): void; content: OpaqueRecordInstance | null | undefined };\n\nfunction extractIdentifierFromRecord(record: PromiseProxyRecord | OpaqueRecordInstance | null) {\n  if (!record) {\n    return null;\n  }\n\n  return recordIdentifierFor(record);\n}\n\nfunction anyUnloaded(store: Store, relationship: CollectionEdge) {\n  const graph = store._graph;\n  assert(`Expected a Graph instance to be available`, graph);\n  const relationshipData = graph.getData(\n    relationship.identifier,\n    relationship.definition.key\n  ) as CollectionRelationship;\n  const state = relationshipData.data;\n  const cache = store._instanceCache;\n  const unloaded = state?.find((s) => {\n    const isLoaded = cache.recordIsLoaded(s, true);\n    return !isLoaded;\n  });\n\n  return unloaded || false;\n}\n\nexport function areAllInverseRecordsLoaded(store: Store, resource: InnerRelationshipDocument): boolean {\n  const instanceCache = store._instanceCache;\n  const identifiers = resource.data;\n\n  if (Array.isArray(identifiers)) {\n    assert(`Expected stable identifiers`, identifiers.every(isStableIdentifier));\n    // treat as collection\n    // check for unloaded records\n    return identifiers.every((identifier: StableRecordIdentifier) => instanceCache.recordIsLoaded(identifier));\n  }\n\n  // treat as single resource\n  if (!identifiers) return true;\n\n  assert(`Expected stable identifiers`, isStableIdentifier(identifiers));\n  return instanceCache.recordIsLoaded(identifiers);\n}\n\nfunction isBelongsTo(relationship: GraphEdge): relationship is ResourceEdge {\n  return relationship.definition.kind === 'belongsTo';\n}\n","import { A, type NativeArray } from '@ember/array';\nimport ArrayProxy from '@ember/array/proxy';\nimport { computed, get } from '@ember/object';\nimport { mapBy, not } from '@ember/object/computed';\n\nimport type RecordState from './record-state';\n\ntype ValidationError = {\n  attribute: string;\n  message: string;\n};\n/**\n  @module @ember-data/model\n*/\ninterface ArrayProxyWithCustomOverrides<T> extends Omit<ArrayProxy<T>, 'clear' | 'content'> {\n  // Omit causes `content` to be merged with the class def for ArrayProxy\n  // which then causes it to be seen as a property, disallowing defining it\n  // as an accessor. This restores our ability to define it as an accessor.\n  content: NativeArray<T>;\n  clear(): void;\n  _has(name: string): boolean;\n}\n\n// we force the type here to our own construct because mixin and extend patterns\n// lose generic signatures. We also do this because we need to Omit `clear` from\n// the type of ArrayProxy as we override it's signature.\nconst ArrayProxyWithCustomOverrides = ArrayProxy as unknown as new <T>() => ArrayProxyWithCustomOverrides<T>;\n\n/**\n  Holds validation errors for a given record, organized by attribute names.\n\n  This class is not directly instantiable.\n\n  Every `Model` has an `errors` property that is an instance of\n  `Errors`. This can be used to display validation error\n  messages returned from the server when a `record.save()` rejects.\n\n  For Example, if you had a `User` model that looked like this:\n\n  ```app/models/user.js\n  import Model, { attr } from '@ember-data/model';\n\n  export default class UserModel extends Model {\n    @attr('string') username;\n    @attr('string') email;\n  }\n  ```\n  And you attempted to save a record that did not validate on the backend:\n\n  ```javascript\n  let user = store.createRecord('user', {\n    username: 'tomster',\n    email: 'invalidEmail'\n  });\n  user.save();\n  ```\n\n  Your backend would be expected to return an error response that described\n  the problem, so that error messages can be generated on the app.\n\n  API responses will be translated into instances of `Errors` differently,\n  depending on the specific combination of adapter and serializer used. You\n  may want to check the documentation or the source code of the libraries\n  that you are using, to know how they expect errors to be communicated.\n\n  Errors can be displayed to the user by accessing their property name\n  to get an array of all the error objects for that property. Each\n  error object is a JavaScript object with two keys:\n\n  - `message` A string containing the error message from the backend\n  - `attribute` The name of the property associated with this error message\n\n  ```handlebars\n  <label>Username: <Input @value={{@model.username}} /> </label>\n  {{#each @model.errors.username as |error|}}\n    <div class=\"error\">\n      {{error.message}}\n    </div>\n  {{/each}}\n\n  <label>Email: <Input @value={{@model.email}} /> </label>\n  {{#each @model.errors.email as |error|}}\n    <div class=\"error\">\n      {{error.message}}\n    </div>\n  {{/each}}\n  ```\n\n  You can also access the special `messages` property on the error\n  object to get an array of all the error strings.\n\n  ```handlebars\n  {{#each @model.errors.messages as |message|}}\n    <div class=\"error\">\n      {{message}}\n    </div>\n  {{/each}}\n  ```\n\n  @class Errors\n  @public\n  @extends Ember.ArrayProxy\n */\nexport class Errors extends ArrayProxyWithCustomOverrides<ValidationError> {\n  declare __record: { currentState: RecordState };\n  /**\n    @property errorsByAttributeName\n    @type {MapWithDefault}\n    @private\n  */\n  @computed()\n  get errorsByAttributeName(): Map<string, NativeArray<ValidationError>> {\n    return new Map();\n  }\n\n  /**\n    Returns errors for a given attribute\n\n    ```javascript\n    let user = store.createRecord('user', {\n      username: 'tomster',\n      email: 'invalidEmail'\n    });\n    user.save().catch(function(){\n      user.errors.errorsFor('email'); // returns:\n      // [{attribute: \"email\", message: \"Doesn't look like a valid email.\"}]\n    });\n    ```\n\n    @method errorsFor\n    @public\n    @param {String} attribute\n    @return {Array}\n  */\n  errorsFor(attribute: string): NativeArray<ValidationError> {\n    const map = this.errorsByAttributeName;\n\n    let errors = map.get(attribute);\n\n    if (errors === undefined) {\n      errors = A<ValidationError>();\n      map.set(attribute, errors);\n    }\n\n    // Errors may be a native array with extensions turned on. Since we access\n    // the array via a method, and not a computed or using `Ember.get`, it does\n    // not entangle properly with autotracking, so we entangle manually by\n    // getting the `[]` property.\n    get(errors, '[]');\n\n    return errors;\n  }\n\n  /**\n    An array containing all of the error messages for this\n    record. This is useful for displaying all errors to the user.\n\n    ```handlebars\n    {{#each @model.errors.messages as |message|}}\n      <div class=\"error\">\n        {{message}}\n      </div>\n    {{/each}}\n    ```\n\n    @property messages\n    @public\n    @type {Array}\n  */\n  @mapBy('content', 'message')\n  declare messages: string[];\n\n  /**\n    @property content\n    @type {Array}\n    @private\n  */\n  @computed()\n  get content(): NativeArray<ValidationError> {\n    return A();\n  }\n\n  /**\n    @method unknownProperty\n    @private\n  */\n  unknownProperty(attribute: string) {\n    const errors = this.errorsFor(attribute);\n    if (errors.length === 0) {\n      return undefined;\n    }\n    return errors;\n  }\n\n  /**\n    Total number of errors.\n\n    @property length\n    @type {Number}\n    @public\n    @readOnly\n  */\n\n  /**\n    `true` if we have no errors.\n\n    @property isEmpty\n    @type {Boolean}\n    @public\n    @readOnly\n  */\n  @not('length')\n  declare isEmpty: boolean;\n\n  /**\n   Manually adds errors to the record. This will trigger the `becameInvalid` event/ lifecycle method on\n    the record and transition the record into an `invalid` state.\n\n   Example\n   ```javascript\n    let errors = user.errors;\n\n    // add multiple errors\n    errors.add('password', [\n      'Must be at least 12 characters',\n      'Must contain at least one symbol',\n      'Cannot contain your name'\n    ]);\n\n    errors.errorsFor('password');\n    // =>\n    // [\n    //   { attribute: 'password', message: 'Must be at least 12 characters' },\n    //   { attribute: 'password', message: 'Must contain at least one symbol' },\n    //   { attribute: 'password', message: 'Cannot contain your name' },\n    // ]\n\n    // add a single error\n    errors.add('username', 'This field is required');\n\n    errors.errorsFor('username');\n    // =>\n    // [\n    //   { attribute: 'username', message: 'This field is required' },\n    // ]\n   ```\n    @method add\n    @public\n    @param {string} attribute - the property name of an attribute or relationship\n    @param {string[]|string} messages - an error message or array of error messages for the attribute\n   */\n  add(attribute: string, messages: string[] | string): void {\n    const errors = this._findOrCreateMessages(attribute, messages);\n    this.addObjects(errors);\n\n    this.errorsFor(attribute).addObjects(errors);\n    this.__record.currentState.notify('isValid');\n\n    this.notifyPropertyChange(attribute);\n  }\n\n  /**\n    @method _findOrCreateMessages\n    @private\n  */\n  _findOrCreateMessages(attribute: string, messages: string | string[]): ValidationError[] {\n    const errors = this.errorsFor(attribute);\n    const messagesArray = Array.isArray(messages) ? messages : [messages];\n    const _messages: ValidationError[] = new Array(messagesArray.length) as ValidationError[];\n\n    for (let i = 0; i < messagesArray.length; i++) {\n      const message = messagesArray[i];\n      const err = errors.findBy('message', message);\n      if (err) {\n        _messages[i] = err;\n      } else {\n        _messages[i] = {\n          attribute: attribute,\n          message,\n        };\n      }\n    }\n\n    return _messages;\n  }\n\n  /**\n   Manually removes all errors for a given member from the record.\n     This will transition the record into a `valid` state, and\n    triggers the `becameValid` event and lifecycle method.\n\n   Example:\n\n   ```javascript\n    let errors = user.errors;\n    errors.add('phone', ['error-1', 'error-2']);\n\n    errors.errorsFor('phone');\n    // =>\n    // [\n    //   { attribute: 'phone', message: 'error-1' },\n    //   { attribute: 'phone', message: 'error-2' },\n    // ]\n\n    errors.remove('phone');\n\n    errors.errorsFor('phone');\n    // => undefined\n   ```\n   @method remove\n    @public\n   @param {string} member - the property name of an attribute or relationship\n   */\n  remove(attribute: string) {\n    if (this.isEmpty) {\n      return;\n    }\n\n    const content = this.rejectBy('attribute', attribute);\n    this.content.setObjects(content);\n\n    // Although errorsByAttributeName.delete is technically enough to sync errors state, we also\n    // must mutate the array as well for autotracking\n    const errors = this.errorsFor(attribute);\n    for (let i = 0; i < errors.length; i++) {\n      if (errors[i].attribute === attribute) {\n        // .replace from Ember.NativeArray is necessary. JS splice will not work.\n        errors.replace(i, 1);\n      }\n    }\n    this.errorsByAttributeName.delete(attribute);\n\n    this.__record.currentState.notify('isValid');\n    this.notifyPropertyChange(attribute);\n    this.notifyPropertyChange('length');\n  }\n\n  /**\n   Manually clears all errors for the record.\n     This will transition the record into a `valid` state, and\n     will trigger the `becameValid` event and lifecycle method.\n\n  Example:\n\n   ```javascript\n   let errors = user.errors;\n   errors.add('username', ['error-a']);\n   errors.add('phone', ['error-1', 'error-2']);\n\n   errors.errorsFor('username');\n   // =>\n   // [\n   //   { attribute: 'username', message: 'error-a' },\n   // ]\n\n   errors.errorsFor('phone');\n   // =>\n   // [\n   //   { attribute: 'phone', message: 'error-1' },\n   //   { attribute: 'phone', message: 'error-2' },\n   // ]\n\n   errors.clear();\n\n   errors.errorsFor('username');\n   // => undefined\n\n   errors.errorsFor('phone');\n   // => undefined\n\n   errors.messages\n   // => []\n   ```\n   @method clear\n   @public\n   */\n  clear(): void {\n    if (this.isEmpty) {\n      return;\n    }\n\n    const errorsByAttributeName = this.errorsByAttributeName;\n    const attributes: string[] = [];\n\n    errorsByAttributeName.forEach(function (_, attribute) {\n      attributes.push(attribute);\n    });\n\n    errorsByAttributeName.clear();\n    attributes.forEach((attribute) => {\n      this.notifyPropertyChange(attribute);\n    });\n\n    this.__record.currentState.notify('isValid');\n    super.clear();\n  }\n\n  /**\n    Checks if there are error messages for the given attribute.\n\n    ```app/controllers/user/edit.js\n    export default class UserEditController extends Controller {\n      @action\n      save(user) {\n        if (user.errors.has('email')) {\n          return alert('Please update your email before attempting to save.');\n        }\n        user.save();\n      }\n    }\n    ```\n\n    @method has\n    @public\n    @param {String} attribute\n    @return {Boolean} true if there some errors on given attribute\n  */\n  has(attribute: string): boolean {\n    return this.errorsFor(attribute).length > 0;\n  }\n}\n","import { importSync } from '@embroider/macros';\n\nimport type { Snapshot } from '@ember-data/legacy-compat/-private';\nimport { upgradeStore } from '@ember-data/legacy-compat/-private';\nimport type Store from '@ember-data/store';\nimport { recordIdentifierFor } from '@ember-data/store';\nimport { peekCache } from '@ember-data/store/-private';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { ChangedAttributesHash } from '@warp-drive/core-types/cache';\nimport { RecordStore } from '@warp-drive/core-types/symbols';\n\nimport type { Errors } from './errors';\nimport { lookupLegacySupport } from './legacy-relationships-support';\nimport type RecordState from './record-state';\nimport type BelongsToReference from './references/belongs-to';\nimport type HasManyReference from './references/has-many';\nimport type { MaybeBelongsToFields, MaybeHasManyFields } from './type-utils';\n\nexport interface MinimalLegacyRecord {\n  errors: Errors;\n  ___recordState: RecordState;\n  currentState: RecordState;\n  isDestroyed: boolean;\n  isDestroying: boolean;\n  isReloading: boolean;\n  isValid: boolean;\n  [RecordStore]: Store;\n\n  deleteRecord(): void;\n  unloadRecord(): void;\n  save<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<this>;\n  destroyRecord<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<this>;\n}\n\nexport function rollbackAttributes<T extends MinimalLegacyRecord>(this: T) {\n  const { currentState } = this;\n  const { isNew } = currentState;\n\n  this[RecordStore]._join(() => {\n    peekCache(this).rollbackAttrs(recordIdentifierFor(this));\n    this.errors.clear();\n    currentState.cleanErrorRequests();\n    if (isNew) {\n      this.unloadRecord();\n    }\n  });\n}\n\nexport function unloadRecord<T extends MinimalLegacyRecord>(this: T) {\n  if (this.currentState.isNew && (this.isDestroyed || this.isDestroying)) {\n    return;\n  }\n  this[RecordStore].unloadRecord(this);\n}\n\nexport function belongsTo<T extends MinimalLegacyRecord, K extends MaybeBelongsToFields<T>>(\n  this: T,\n  prop: K\n): BelongsToReference<T, K> {\n  return lookupLegacySupport(this).referenceFor('belongsTo', prop) as BelongsToReference<T, K>;\n}\n\nexport function hasMany<T extends MinimalLegacyRecord, K extends MaybeHasManyFields<T>>(\n  this: T,\n  prop: K\n): HasManyReference<T, K> {\n  return lookupLegacySupport(this).referenceFor('hasMany', prop) as HasManyReference<T, K>;\n}\n\nexport function reload<T extends MinimalLegacyRecord>(this: T, options: Record<string, unknown> = {}): Promise<T> {\n  options.isReloading = true;\n  options.reload = true;\n\n  const identifier = recordIdentifierFor(this);\n  assert(`You cannot reload a record without an ID`, identifier.id);\n\n  this.isReloading = true;\n  const promise = this[RecordStore].request({\n    op: 'findRecord',\n    data: {\n      options,\n      record: identifier,\n    },\n    cacheOptions: { [Symbol.for('wd:skip-cache')]: true },\n  })\n    .then(() => this)\n    .finally(() => {\n      this.isReloading = false;\n    });\n\n  return promise;\n}\n\nexport function changedAttributes<T extends MinimalLegacyRecord>(this: T): ChangedAttributesHash {\n  return peekCache(this).changedAttrs(recordIdentifierFor(this));\n}\n\nexport function serialize<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): unknown {\n  upgradeStore(this[RecordStore]);\n  return this[RecordStore].serializeRecord(this, options);\n}\n\nexport function deleteRecord<T extends MinimalLegacyRecord>(this: T): void {\n  // ensure we've populated currentState prior to deleting a new record\n  if (this.currentState) {\n    this[RecordStore].deleteRecord(this);\n  }\n}\n\nexport function save<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<T> {\n  let promise: Promise<T>;\n\n  if (this.currentState.isNew && this.currentState.isDeleted) {\n    promise = Promise.resolve(this);\n  } else {\n    this.errors.clear();\n    promise = this[RecordStore].saveRecord(this, options);\n  }\n\n  return promise;\n}\n\nexport function destroyRecord<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<T> {\n  const { isNew } = this.currentState;\n  this.deleteRecord();\n  if (isNew) {\n    return Promise.resolve(this);\n  }\n  return this.save(options).then((_) => {\n    this.unloadRecord();\n    return this;\n  });\n}\n\nexport function createSnapshot<T extends MinimalLegacyRecord>(this: T): Snapshot<T> {\n  const store = this[RecordStore];\n\n  upgradeStore(store);\n  if (!store._fetchManager) {\n    const FetchManager = (\n      importSync('@ember-data/legacy-compat/-private') as typeof import('@ember-data/legacy-compat/-private')\n    ).FetchManager;\n    store._fetchManager = new FetchManager(store);\n  }\n\n  // @ts-expect-error Typescript isn't able to curry narrowed args that are divorced from each other.\n  return store._fetchManager.createSnapshot<T>(recordIdentifierFor(this));\n}\n","import { cacheFor } from '@ember/object/internals';\n\nimport type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport type { LegacyRelationshipField as RelationshipSchema } from '@warp-drive/core-types/schema/fields';\n\nimport { LEGACY_SUPPORT } from './legacy-relationships-support';\nimport type { Model } from './model';\n\nexport default function notifyChanges(\n  identifier: StableRecordIdentifier,\n  value: NotificationType,\n  key: string | undefined,\n  record: Model,\n  store: Store\n) {\n  switch (value) {\n    case 'added':\n    case 'attributes':\n      if (key) {\n        notifyAttribute(store, identifier, key, record);\n      } else {\n        record.eachAttribute((name) => {\n          notifyAttribute(store, identifier, name, record);\n        });\n      }\n      break;\n\n    case 'relationships':\n      if (key) {\n        const meta = (record.constructor as typeof Model).relationshipsByName.get(key);\n        assert(`Expected to find a relationship for ${key} on ${identifier.type}`, meta);\n        notifyRelationship(identifier, key, record, meta);\n      } else {\n        record.eachRelationship((name, meta) => {\n          notifyRelationship(identifier, name, record, meta);\n        });\n      }\n      break;\n\n    case 'identity':\n      record.notifyPropertyChange('id');\n      break;\n  }\n}\n\nfunction notifyRelationship(identifier: StableRecordIdentifier, key: string, record: Model, meta: RelationshipSchema) {\n  if (meta.kind === 'belongsTo') {\n    record.notifyPropertyChange(key);\n  } else if (meta.kind === 'hasMany') {\n    const support = LEGACY_SUPPORT.get(identifier);\n    const manyArray = support && support._manyArrayCache[key];\n    const hasPromise = support && support._relationshipPromisesCache[key];\n\n    if (manyArray && hasPromise) {\n      // do nothing, we will notify the ManyArray directly\n      // once the fetch has completed.\n      return;\n    }\n\n    if (manyArray) {\n      manyArray.notify();\n\n      //We need to notifyPropertyChange in the adding case because we need to make sure\n      //we fetch the newly added record in case it is unloaded\n      //TODO(Igor): Consider whether we could do this only if the record state is unloaded\n      assert(`Expected options to exist on relationship meta`, meta.options);\n      assert(`Expected async to exist on relationship meta options`, 'async' in meta.options);\n      if (meta.options.async) {\n        record.notifyPropertyChange(key);\n      }\n    }\n  }\n}\n\nfunction notifyAttribute(store: Store, identifier: StableRecordIdentifier, key: string, record: Model) {\n  const currentValue = cacheFor(record, key);\n  const cache = store.cache;\n  if (currentValue !== cache.getAttr(identifier, key)) {\n    record.notifyPropertyChange(key);\n  }\n}\n","import type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store';\nimport { storeFor } from '@ember-data/store';\nimport type { RequestState, RequestStateService } from '@ember-data/store/-private';\nimport { recordIdentifierFor } from '@ember-data/store/-private';\nimport { cached, notifySignal } from '@ember-data/tracking';\nimport { defineSignal, subscribed as tagged } from '@ember-data/tracking/-private';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport type { Cache } from '@warp-drive/core-types/cache';\n\nimport type { Errors } from './errors';\nimport type { MinimalLegacyRecord } from './model-methods';\n\nconst SOURCE_POINTER_REGEXP = /^\\/?data\\/(attributes|relationships)\\/(.*)/;\nconst SOURCE_POINTER_PRIMARY_REGEXP = /^\\/?data/;\nconst PRIMARY_ATTRIBUTE_KEY = 'base';\nfunction isInvalidError(error: unknown): error is Error & { isAdapterError: true; code: 'InvalidError' } {\n  return (\n    !!error &&\n    error instanceof Error &&\n    'isAdapterError' in error &&\n    error.isAdapterError === true &&\n    'code' in error &&\n    error.code === 'InvalidError'\n  );\n}\n\n/**\nHistorically EmberData managed a state machine\nfor each record, the localState for which\nwas reflected onto Model.\n\nThis implements the flags and stateName for backwards compat\nwith the state tree that used to be possible (listed below).\n\nstateName and dirtyType are candidates for deprecation.\n\nroot\n  empty\n    deleted    // hidden from stateName\n    preloaded  // hidden from stateName\n\n  loading\n     empty     // hidden from stateName\n     preloaded // hidden from stateName\n\n  loaded\n    saved\n    updated\n      uncommitted\n      invalid\n      inFlight\n    created\n      uncommitted\n      invalid\n      inFlight\n\n  deleted\n    saved\n      new      // hidden from stateName\n    uncommitted\n    invalid\n    inFlight\n\n  @internal\n*/\nexport default class RecordState {\n  declare store: Store;\n  declare identifier: StableRecordIdentifier;\n  declare record: MinimalLegacyRecord;\n  declare rs: RequestStateService;\n\n  declare pendingCount: number;\n  declare fulfilledCount: number;\n  declare rejectedCount: number;\n  declare cache: Cache;\n  declare _errorRequests: RequestState[];\n  declare _lastError: RequestState | null;\n  declare handler: object;\n\n  constructor(record: MinimalLegacyRecord) {\n    const store = storeFor(record)!;\n    const identity = recordIdentifierFor(record);\n\n    this.identifier = identity;\n    this.record = record;\n    this.cache = store.cache;\n\n    this.pendingCount = 0;\n    this.fulfilledCount = 0;\n    this.rejectedCount = 0;\n    this._errorRequests = [];\n    this._lastError = null;\n\n    const requests = store.getRequestStateService();\n    const notifications = store.notifications;\n\n    const handleRequest = (req: RequestState) => {\n      if (req.type === 'mutation') {\n        switch (req.state) {\n          case 'pending':\n            this.isSaving = true;\n            break;\n          case 'rejected':\n            this.isSaving = false;\n            this._lastError = req;\n            if (!(req.response && isInvalidError(req.response.data))) {\n              this._errorRequests.push(req);\n            }\n\n            notifyErrorsStateChanged(this);\n            break;\n          case 'fulfilled':\n            this._errorRequests = [];\n            this._lastError = null;\n            this.isSaving = false;\n            this.notify('isDirty');\n            notifyErrorsStateChanged(this);\n            break;\n        }\n      } else {\n        switch (req.state) {\n          case 'pending':\n            this.pendingCount++;\n            this.notify('isLoading');\n            break;\n          case 'rejected':\n            this.pendingCount--;\n            this._lastError = req;\n            if (!(req.response && isInvalidError(req.response.data))) {\n              this._errorRequests.push(req);\n            }\n            this.notify('isLoading');\n            notifyErrorsStateChanged(this);\n            break;\n          case 'fulfilled':\n            this.pendingCount--;\n            this.fulfilledCount++;\n            this.notify('isLoading');\n            this.notify('isDirty');\n            notifyErrorsStateChanged(this);\n            this._errorRequests = [];\n            this._lastError = null;\n            break;\n        }\n      }\n    };\n\n    requests.subscribeForRecord(identity, handleRequest);\n\n    // we instantiate lazily\n    // so we grab anything we don't have yet\n    const lastRequest = requests.getLastRequestForRecord(identity);\n    if (lastRequest) {\n      handleRequest(lastRequest);\n    }\n\n    this.handler = notifications.subscribe(\n      identity,\n      (identifier: StableRecordIdentifier, type: NotificationType, key?: string) => {\n        switch (type) {\n          case 'state':\n            this.notify('isSaved');\n            this.notify('isNew');\n            this.notify('isDeleted');\n            this.notify('isDirty');\n            break;\n          case 'attributes':\n            this.notify('isEmpty');\n            this.notify('isDirty');\n            break;\n          case 'errors':\n            this.updateInvalidErrors(this.record.errors);\n            this.notify('isValid');\n            break;\n        }\n      }\n    );\n  }\n\n  destroy() {\n    storeFor(this.record)!.notifications.unsubscribe(this.handler);\n  }\n\n  notify(key: keyof this & string) {\n    notifySignal(this, key);\n  }\n\n  updateInvalidErrors(errors: Errors) {\n    assert(\n      `Expected the Cache instance for ${this.identifier.lid}  to implement getErrors(identifier)`,\n      typeof this.cache.getErrors === 'function'\n    );\n    const jsonApiErrors = this.cache.getErrors(this.identifier);\n\n    errors.clear();\n\n    for (let i = 0; i < jsonApiErrors.length; i++) {\n      const error = jsonApiErrors[i];\n\n      if (error.source && error.source.pointer) {\n        const keyMatch = error.source.pointer.match(SOURCE_POINTER_REGEXP);\n        let key: string | undefined;\n\n        if (keyMatch) {\n          key = keyMatch[2];\n        } else if (error.source.pointer.search(SOURCE_POINTER_PRIMARY_REGEXP) !== -1) {\n          key = PRIMARY_ATTRIBUTE_KEY;\n        }\n\n        if (key) {\n          const errMsg = error.detail || error.title;\n          assert(`Expected field error to have a detail or title to use as the message`, errMsg);\n          errors.add(key, errMsg);\n        }\n      }\n    }\n  }\n\n  cleanErrorRequests() {\n    this.notify('isValid');\n    this.notify('isError');\n    this.notify('adapterError');\n    this._errorRequests = [];\n    this._lastError = null;\n  }\n\n  declare isSaving: boolean;\n\n  @tagged\n  get isLoading() {\n    return !this.isLoaded && this.pendingCount > 0 && this.fulfilledCount === 0;\n  }\n\n  @tagged\n  get isLoaded() {\n    if (this.isNew) {\n      return true;\n    }\n    return this.fulfilledCount > 0 || !this.isEmpty;\n  }\n\n  @tagged\n  get isSaved() {\n    const rd = this.cache;\n    if (this.isDeleted) {\n      assert(`Expected Cache to implement isDeletionCommitted()`, typeof rd.isDeletionCommitted === 'function');\n      return rd.isDeletionCommitted(this.identifier);\n    }\n    if (this.isNew || this.isEmpty || !this.isValid || this.isDirty || this.isLoading) {\n      return false;\n    }\n    return true;\n  }\n\n  @tagged\n  get isEmpty() {\n    const rd = this.cache;\n    // TODO this is not actually an RFC'd concept. Determine the\n    // correct heuristic to replace this with.\n    assert(`Expected Cache to implement isEmpty()`, typeof rd.isEmpty === 'function');\n    return !this.isNew && rd.isEmpty(this.identifier);\n  }\n\n  @tagged\n  get isNew() {\n    const rd = this.cache;\n    assert(`Expected Cache to implement isNew()`, typeof rd.isNew === 'function');\n    return rd.isNew(this.identifier);\n  }\n\n  @tagged\n  get isDeleted() {\n    const rd = this.cache;\n    assert(`Expected Cache to implement isDeleted()`, typeof rd.isDeleted === 'function');\n    return rd.isDeleted(this.identifier);\n  }\n\n  @tagged\n  get isValid() {\n    return this.record.errors.length === 0;\n  }\n\n  @tagged\n  get isDirty() {\n    const rd = this.cache;\n    if (this.isEmpty || rd.isDeletionCommitted(this.identifier) || (this.isDeleted && this.isNew)) {\n      return false;\n    }\n    return this.isDeleted || this.isNew || rd.hasChangedAttrs(this.identifier);\n  }\n\n  @tagged\n  get isError() {\n    const errorReq = this._errorRequests[this._errorRequests.length - 1];\n    if (!errorReq) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  @tagged\n  get adapterError() {\n    const request = this._lastError;\n    if (!request) {\n      return null;\n    }\n    return request.state === 'rejected' && request.response!.data;\n  }\n\n  @cached\n  get isPreloaded() {\n    return !this.isEmpty && this.isLoading;\n  }\n\n  @cached\n  get stateName() {\n    // we might be empty while loading so check this first\n    if (this.isLoading) {\n      return 'root.loading';\n\n      // got nothing yet or were unloaded\n    } else if (this.isEmpty) {\n      return 'root.empty';\n\n      // deleted substates\n    } else if (this.isDeleted) {\n      if (this.isSaving) {\n        return 'root.deleted.inFlight';\n      } else if (this.isSaved) {\n        // TODO ensure isSaved isn't true from previous requests\n        return 'root.deleted.saved';\n      } else if (!this.isValid) {\n        return 'root.deleted.invalid';\n      } else {\n        return 'root.deleted.uncommitted';\n      }\n\n      // loaded.created substates\n    } else if (this.isNew) {\n      if (this.isSaving) {\n        return 'root.loaded.created.inFlight';\n      } else if (!this.isValid) {\n        return 'root.loaded.created.invalid';\n      }\n      return 'root.loaded.created.uncommitted';\n\n      // loaded.updated substates\n    } else if (this.isSaving) {\n      return 'root.loaded.updated.inFlight';\n    } else if (!this.isValid) {\n      return 'root.loaded.updated.invalid';\n    } else if (this.isDirty) {\n      return 'root.loaded.updated.uncommitted';\n\n      // if nothing remains, we are loaded saved!\n    } else {\n      return 'root.loaded.saved';\n    }\n  }\n\n  @cached\n  get dirtyType() {\n    // we might be empty while loading so check this first\n    if (this.isLoading || this.isEmpty) {\n      return '';\n\n      // deleted substates\n    } else if (this.isDirty && this.isDeleted) {\n      return 'deleted';\n\n      // loaded.created substates\n    } else if (this.isNew) {\n      return 'created';\n\n      // loaded.updated substates\n    } else if (this.isSaving || !this.isValid || this.isDirty) {\n      return 'updated';\n\n      // if nothing remains, we are loaded saved!\n    } else {\n      return '';\n    }\n  }\n}\ndefineSignal(RecordState.prototype, 'isSaving', false);\n\nfunction notifyErrorsStateChanged(state: RecordState) {\n  state.notify('isValid');\n  state.notify('isError');\n  state.notify('adapterError');\n}\n","/**\n  @module @ember-data/model\n */\n\nimport EmberObject from '@ember/object';\n\nimport type { Snapshot } from '@ember-data/legacy-compat/-private';\nimport type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store';\nimport { recordIdentifierFor, storeFor } from '@ember-data/store';\nimport { coerceId } from '@ember-data/store/-private';\nimport { compat, notifySignal } from '@ember-data/tracking';\nimport { defineSignal, subscribed as tagged } from '@ember-data/tracking/-private';\nimport { DEBUG } from '@warp-drive/build-config/env';\nimport { assert } from '@warp-drive/build-config/macros';\nimport type { StableRecordIdentifier } from '@warp-drive/core-types';\nimport type { Cache, ChangedAttributesHash } from '@warp-drive/core-types/cache';\nimport type { LegacyAttributeField, LegacyRelationshipField } from '@warp-drive/core-types/schema/fields';\nimport { RecordStore } from '@warp-drive/core-types/symbols';\n\nimport { Errors } from './errors';\nimport { LEGACY_SUPPORT } from './legacy-relationships-support';\nimport type { MinimalLegacyRecord } from './model-methods';\nimport {\n  belongsTo,\n  changedAttributes,\n  createSnapshot,\n  deleteRecord,\n  destroyRecord,\n  hasMany,\n  reload,\n  rollbackAttributes,\n  save,\n  serialize,\n  unloadRecord,\n} from './model-methods';\nimport notifyChanges from './notify-changes';\nimport RecordState from './record-state';\nimport type BelongsToReference from './references/belongs-to';\nimport type HasManyReference from './references/has-many';\nimport type {\n  _MaybeBelongsToFields,\n  isSubClass,\n  MaybeAttrFields,\n  MaybeHasManyFields,\n  MaybeRelationshipFields,\n} from './type-utils';\n\nexport type ModelCreateArgs = {\n  _createProps: Record<string, unknown>;\n  // TODO @deprecate consider deprecating accessing record properties during init which the below is necessary for\n  _secretInit: {\n    identifier: StableRecordIdentifier;\n    cache: Cache;\n    store: Store;\n    cb: (record: Model, cache: Cache, identifier: StableRecordIdentifier, store: Store) => void;\n  };\n};\n\nexport type StaticModel = typeof Model & { create(options: ModelCreateArgs): Model };\nexport type ModelFactory = { class: StaticModel };\nexport type FactoryCache = Record<string, ModelFactory>;\n// we put this on the store for interop because it's used by modelFor and\n// instantiateRecord as well.\nexport type ModelStore = Store & { _modelFactoryCache: FactoryCache };\n\n/*\n * This decorator allows us to lazily compute\n * an expensive getter on first-access and thereafter\n * never recompute it.\n */\nfunction computeOnce(target: object, propertyName: string, desc: PropertyDescriptor) {\n  const cache = new WeakMap<object, { hasComputed: boolean; value: unknown }>();\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const getter = desc.get;\n  desc.get = function () {\n    let meta = cache.get(this);\n\n    if (!meta) {\n      meta = { hasComputed: false, value: undefined };\n      cache.set(this, meta);\n    }\n\n    if (!meta.hasComputed) {\n      meta.value = (getter as () => unknown).call(this);\n      meta.hasComputed = true;\n    }\n\n    return meta.value;\n  };\n  return desc;\n}\n\n/**\n  Base class from which Models can be defined.\n\n  ```js\n  import Model, { attr } from '@ember-data/model';\n\n  export default class User extends Model {\n    @attr name;\n  }\n  ```\n\n  Models are used both to define the static schema for a\n  particular resource type as well as the class to instantiate\n  to present that data from cache.\n\n  @class Model\n  @public\n  @extends Ember.EmberObject\n*/\n\ninterface Model {\n  serialize<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): unknown;\n  destroyRecord<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<this>;\n  unloadRecord<T extends MinimalLegacyRecord>(this: T): void;\n  changedAttributes<T extends MinimalLegacyRecord>(this: T): ChangedAttributesHash;\n  rollbackAttributes<T extends MinimalLegacyRecord>(this: T): void;\n  _createSnapshot<T extends MinimalLegacyRecord>(this: T): Snapshot<T>;\n  save<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<this>;\n  reload<T extends MinimalLegacyRecord>(this: T, options?: Record<string, unknown>): Promise<T>;\n\n  // belongsTo<T extends MinimalLegacyRecord, K extends MaybeBelongsToFields<T>>(\n  //   this: T,\n  //   prop: K\n  // ): BelongsToReference<T, K>;\n  belongsTo<T extends Model, K extends keyof T & string>(\n    this: T,\n    prop: K & (K extends _MaybeBelongsToFields<T> ? K : never)\n  ): BelongsToReference<T, K>;\n  hasMany<T extends MinimalLegacyRecord, K extends MaybeHasManyFields<T>>(this: T, prop: K): HasManyReference<T, K>;\n  deleteRecord<T extends MinimalLegacyRecord>(this: T): void;\n}\nclass Model extends EmberObject implements MinimalLegacyRecord {\n  // set during create by the store\n  declare store: Store;\n  declare ___recordState: RecordState;\n  declare ___private_notifications: object;\n  declare [RecordStore]: Store;\n\n  init(options: ModelCreateArgs) {\n    if (DEBUG) {\n      if (!options?._secretInit && !options?._createProps) {\n        throw new Error(\n          'You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.'\n        );\n      }\n    }\n    const createProps = options._createProps;\n    const _secretInit = options._secretInit;\n    (options as Record<string, unknown>)._createProps = null;\n    (options as Record<string, unknown>)._secretInit = null;\n\n    const store = (this.store = _secretInit.store);\n    super.init(options);\n\n    this[RecordStore] = store;\n\n    const identity = _secretInit.identifier;\n    _secretInit.cb(this, _secretInit.cache, identity, _secretInit.store);\n\n    this.___recordState = DEBUG\n      ? new RecordState(this as unknown as MinimalLegacyRecord)\n      : (null as unknown as RecordState);\n\n    this.setProperties(createProps);\n\n    const notifications = store.notifications;\n    this.___private_notifications = notifications.subscribe(\n      identity,\n      (identifier: StableRecordIdentifier, type: NotificationType, field?: string): void => {\n        notifyChanges(identifier, type, field, this, store);\n      }\n    );\n  }\n\n  // @ts-expect-error destroy should not return a value, but ember's types force it to\n  destroy(): this {\n    const identifier = recordIdentifierFor(this);\n    this.___recordState?.destroy();\n    const store = storeFor(this)!;\n    store.notifications.unsubscribe(this.___private_notifications);\n    // Legacy behavior is to notify the relationships on destroy\n    // such that they \"clear\". It's uncertain this behavior would\n    // be good for a new model paradigm, likely cheaper and safer\n    // to simply not notify, for this reason the store does not itself\n    // notify individual changes once the delete has been signaled,\n    // this decision is left to model instances.\n\n    this.eachRelationship((name, meta) => {\n      if (meta.kind === 'belongsTo') {\n        this.notifyPropertyChange(name);\n      }\n    });\n    LEGACY_SUPPORT.get(this as unknown as MinimalLegacyRecord)?.destroy();\n    LEGACY_SUPPORT.delete(this as unknown as MinimalLegacyRecord);\n    LEGACY_SUPPORT.delete(identifier);\n\n    super.destroy();\n  }\n\n  /**\n    If this property is `true` the record is in the `empty`\n    state. Empty is the first state all records enter after they have\n    been created. Most records created by the store will quickly\n    transition to the `loading` state if data needs to be fetched from\n    the server or the `created` state if the record is created on the\n    client. A record can also enter the empty state if the adapter is\n    unable to locate the record.\n\n    @property isEmpty\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isEmpty(): boolean {\n    return this.currentState.isEmpty;\n  }\n\n  /**\n    If this property is `true` the record is in the `loading` state. A\n    record enters this state when the store asks the adapter for its\n    data. It remains in this state until the adapter provides the\n    requested data.\n\n    @property isLoading\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isLoading(): boolean {\n    return this.currentState.isLoading;\n  }\n\n  /**\n    If this property is `true` the record is in the `loaded` state. A\n    record enters this state when its data is populated. Most of a\n    record's lifecycle is spent inside substates of the `loaded`\n    state.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isLoaded; // true\n\n    const { content: { data: model } } = await store.request(findRecord({ type: 'model', id: '1' }));\n    model.isLoaded;\n    ```\n\n    @property isLoaded\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isLoaded(): boolean {\n    return this.currentState.isLoaded;\n  }\n\n  /**\n    If this property is `true` the record is in the `dirty` state. The\n    record has local changes that have not yet been saved by the\n    adapter. This includes records that have been created (but not yet\n    saved) or deleted.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.hasDirtyAttributes; // true\n\n    const { content: { data: model } } = await store.request(findRecord({ type: 'model', id: '1' }));\n\n    model.hasDirtyAttributes; // false\n    model.foo = 'some value';\n    model.hasDirtyAttributes; // true\n    ```\n\n    @since 1.13.0\n    @property hasDirtyAttributes\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get hasDirtyAttributes(): boolean {\n    return this.currentState.isDirty;\n  }\n\n  /**\n    If this property is `true` the record is in the `saving` state. A\n    record enters the saving state when `save` is called, but the\n    adapter has not yet acknowledged that the changes have been\n    persisted to the backend.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isSaving; // false\n    let promise = record.save();\n    record.isSaving; // true\n    promise.then(function() {\n      record.isSaving; // false\n    });\n    ```\n\n    @property isSaving\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isSaving(): boolean {\n    return this.currentState.isSaving;\n  }\n\n  /**\n    If this property is `true` the record is in the `deleted` state\n    and has been marked for deletion. When `isDeleted` is true and\n    `hasDirtyAttributes` is true, the record is deleted locally but the deletion\n    was not yet persisted. When `isSaving` is true, the change is\n    in-flight. When both `hasDirtyAttributes` and `isSaving` are false, the\n    change has persisted.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isDeleted;    // false\n    record.deleteRecord();\n\n    // Locally deleted\n    record.isDeleted;           // true\n    record.hasDirtyAttributes;  // true\n    record.isSaving;            // false\n\n    // Persisting the deletion\n    let promise = record.save();\n    record.isDeleted;    // true\n    record.isSaving;     // true\n\n    // Deletion Persisted\n    promise.then(function() {\n      record.isDeleted;          // true\n      record.isSaving;           // false\n      record.hasDirtyAttributes; // false\n    });\n    ```\n\n    @property isDeleted\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isDeleted(): boolean {\n    return this.currentState.isDeleted;\n  }\n\n  /**\n    If this property is `true` the record is in the `new` state. A\n    record will be in the `new` state when it has been created on the\n    client and the adapter has not yet report that it was successfully\n    saved.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isNew; // true\n\n    record.save().then(function(model) {\n      model.isNew; // false\n    });\n    ```\n\n    @property isNew\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isNew(): boolean {\n    return this.currentState.isNew;\n  }\n\n  /**\n    If this property is `true` the record is in the `valid` state.\n\n    A record will be in the `valid` state when the adapter did not report any\n    server-side validation failures.\n\n    @property isValid\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isValid(): boolean {\n    return this.currentState.isValid;\n  }\n\n  /**\n    If the record is in the dirty state this property will report what\n    kind of change has caused it to move into the dirty\n    state. Possible values are:\n\n    - `created` The record has been created by the client and not yet saved to the adapter.\n    - `updated` The record has been updated by the client and not yet saved to the adapter.\n    - `deleted` The record has been deleted by the client and not yet saved to the adapter.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.dirtyType; // 'created'\n    ```\n\n    @property dirtyType\n    @public\n    @type {String}\n    @readOnly\n  */\n  @compat\n  get dirtyType(): 'created' | 'updated' | 'deleted' | '' {\n    return this.currentState.dirtyType;\n  }\n\n  /**\n    If `true` the adapter reported that it was unable to save local\n    changes to the backend for any reason other than a server-side\n    validation error.\n\n    Example\n\n    ```javascript\n    record.isError; // false\n    record.set('foo', 'valid value');\n    record.save().then(null, function() {\n      record.isError; // true\n    });\n    ```\n\n    @property isError\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @compat\n  get isError(): boolean {\n    return this.currentState.isError;\n  }\n  set isError(v) {\n    if (DEBUG) {\n      throw new Error(`isError is not directly settable`);\n    }\n  }\n\n  /**\n    If `true` the store is attempting to reload the record from the adapter.\n\n    Example\n\n    ```javascript\n    record.isReloading; // false\n    record.reload();\n    record.isReloading; // true\n    ```\n\n    @property isReloading\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  declare isReloading: boolean;\n\n  /**\n    All ember models have an id property. This is an identifier\n    managed by an external source. These are always coerced to be\n    strings before being used internally. Note when declaring the\n    attributes for a model it is an error to declare an id\n    attribute.\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.id; // null\n\n    const { content: { data: model } } = await store.request(findRecord({ type: 'model', id: '1' }));\n    model.id; // '1'\n    ```\n\n    @property id\n    @public\n    @type {String}\n  */\n  @tagged\n  get id(): string | null {\n    // this guard exists, because some dev-only deprecation code\n    // (addListener via validatePropertyInjections) invokes toString before the\n    // object is real.\n    if (DEBUG) {\n      try {\n        return recordIdentifierFor(this).id;\n      } catch {\n        return null;\n      }\n    }\n    return recordIdentifierFor(this).id;\n  }\n  set id(id) {\n    const normalizedId = coerceId(id);\n    const identifier = recordIdentifierFor(this);\n    const didChange = normalizedId !== identifier.id;\n    assert(\n      `Cannot set ${identifier.type} record's id to ${id}, because id is already ${identifier.id}`,\n      !didChange || identifier.id === null\n    );\n\n    if (normalizedId !== null && didChange) {\n      this.store._instanceCache.setRecordId(identifier, normalizedId);\n      this.store.notifications.notify(identifier, 'identity');\n    }\n  }\n\n  toString() {\n    return `<model::${(this.constructor as unknown as { modelName: string }).modelName}:${this.id}>`;\n  }\n\n  /**\n    @property currentState\n    @private\n    @type {Object}\n  */\n  // TODO we can probably make this a computeOnce\n  // we likely do not need to notify the currentState root anymore\n  @tagged\n  get currentState() {\n    // descriptors are called with the wrong `this` context during mergeMixins\n    // when using legacy/classic ember classes. Basically: lazy in prod and eager in dev.\n    // so we do this to try to steer folks to the nicer \"dont user currentState\"\n    // error.\n    if (!DEBUG) {\n      if (!this.___recordState) {\n        this.___recordState = new RecordState(this as unknown as MinimalLegacyRecord);\n      }\n    }\n    return this.___recordState;\n  }\n  set currentState(_v) {\n    throw new Error('cannot set currentState');\n  }\n\n  /**\n    The store service instance which created this record instance\n\n   @property store\n    @public\n   */\n\n  /**\n    When the record is in the `invalid` state this object will contain\n    any errors returned by the adapter. When present the errors hash\n    contains keys corresponding to the invalid property names\n    and values which are arrays of Javascript objects with two keys:\n\n    - `message` A string containing the error message from the backend\n    - `attribute` The name of the property associated with this error message\n\n    ```javascript\n    record.errors.length; // 0\n    record.set('foo', 'invalid value');\n    record.save().catch(function() {\n      record.errors.foo;\n      // [{message: 'foo should be a number.', attribute: 'foo'}]\n    });\n    ```\n\n    The `errors` property is useful for displaying error messages to\n    the user.\n\n    ```handlebars\n    <label>Username: <Input @value={{@model.username}} /> </label>\n    {{#each @model.errors.username as |error|}}\n      <div class=\"error\">\n        {{error.message}}\n      </div>\n    {{/each}}\n    <label>Email: <Input @value={{@model.email}} /> </label>\n    {{#each @model.errors.email as |error|}}\n      <div class=\"error\">\n        {{error.message}}\n      </div>\n    {{/each}}\n    ```\n\n\n    You can also access the special `messages` property on the error\n    object to get an array of all the error strings.\n\n    ```handlebars\n    {{#each @model.errors.messages as |message|}}\n      <div class=\"error\">\n        {{message}}\n      </div>\n    {{/each}}\n    ```\n\n    @property errors\n    @public\n    @type {Errors}\n  */\n  @computeOnce\n  get errors(): Errors {\n    const errors = (Errors as unknown as { create(obj: object): Errors }).create({ __record: this });\n    this.currentState.updateInvalidErrors(errors);\n    return errors;\n  }\n\n  /**\n    This property holds the `AdapterError` object with which\n    last adapter operation was rejected.\n\n    @property adapterError\n    @public\n    @type {AdapterError}\n  */\n  @compat\n  get adapterError() {\n    return this.currentState.adapterError;\n  }\n  set adapterError(v) {\n    throw new Error(`adapterError is not directly settable`);\n  }\n\n  /**\n    Create a JSON representation of the record, using the serialization\n    strategy of the store's adapter.\n\n   `serialize` takes an optional hash as a parameter, currently\n    supported options are:\n\n   - `includeId`: `true` if the record's ID should be included in the\n      JSON representation.\n\n    @method serialize\n    @public\n    @param {Object} options\n    @return {Object} an object whose values are primitive JSON values only\n  */\n  /*\n    We hook the default implementation to ensure\n    our tagged properties are properly notified\n    as well. We still super for everything because\n    sync observers require a direct call occuring\n    to trigger their flush. We wouldn't need to\n    super in 4.0+ where sync observers are removed.\n   */\n  // @ts-expect-error no return is necessary, but Ember's types are forcing it\n  notifyPropertyChange(prop: string): this {\n    notifySignal(this, prop as keyof this & string);\n    super.notifyPropertyChange(prop);\n  }\n\n  /**\n    Marks the record as deleted but does not save it. You must call\n    `save` afterwards if you want to persist it. You might use this\n    method if you want to allow the user to still `rollbackAttributes()`\n    after a delete was made.\n\n    Example\n\n    ```js\n    import Component from '@glimmer/component';\n\n    export default class extends Component {\n      softDelete = () => {\n        this.args.model.deleteRecord();\n      }\n\n      confirm = () => {\n        this.args.model.save();\n      }\n\n      undo = () => {\n        this.args.model.rollbackAttributes();\n      }\n    }\n    ```\n\n    @method deleteRecord\n    @public\n  */\n\n  /**\n    Same as `deleteRecord`, but saves the record immediately.\n\n    Example\n\n    ```js\n    import Component from '@glimmer/component';\n\n    export default class extends Component {\n      delete = () => {\n        this.args.model.destroyRecord().then(function() {\n          this.transitionToRoute('model.index');\n        });\n      }\n    }\n    ```\n\n    If you pass an object on the `adapterOptions` property of the options\n    argument it will be passed to your adapter via the snapshot\n\n    ```js\n    record.destroyRecord({ adapterOptions: { subscribe: false } });\n    ```\n\n    ```app/adapters/post.js\n    import MyCustomAdapter from './custom-adapter';\n\n    export default class PostAdapter extends MyCustomAdapter {\n      deleteRecord(store, type, snapshot) {\n        if (snapshot.adapterOptions.subscribe) {\n          // ...\n        }\n        // ...\n      }\n    }\n    ```\n\n    @method destroyRecord\n    @public\n    @param {Object} options\n    @return {Promise} a promise that will be resolved when the adapter returns\n    successfully or rejected if the adapter returns with an error.\n  */\n\n  /**\n    Unloads the record from the store. This will not send a delete request\n    to your server, it just unloads the record from memory.\n\n    @method unloadRecord\n    @public\n  */\n\n  /**\n    Returns an object, whose keys are changed properties, and value is\n    an [oldProp, newProp] array.\n\n    The array represents the diff of the canonical state with the local state\n    of the model. Note: if the model is created locally, the canonical state is\n    empty since the adapter hasn't acknowledged the attributes yet:\n\n    Example\n\n    ```app/models/mascot.js\n    import Model, { attr } from '@ember-data/model';\n\n    export default class MascotModel extends Model {\n      @attr('string') name;\n      @attr('boolean', {\n        defaultValue: false\n      })\n      isAdmin;\n    }\n    ```\n\n    ```javascript\n    let mascot = store.createRecord('mascot');\n\n    mascot.changedAttributes(); // {}\n\n    mascot.set('name', 'Tomster');\n    mascot.changedAttributes(); // { name: [undefined, 'Tomster'] }\n\n    mascot.set('isAdmin', true);\n    mascot.changedAttributes(); // { isAdmin: [undefined, true], name: [undefined, 'Tomster'] }\n\n    mascot.save().then(function() {\n      mascot.changedAttributes(); // {}\n\n      mascot.set('isAdmin', false);\n      mascot.changedAttributes(); // { isAdmin: [true, false] }\n    });\n    ```\n\n    @method changedAttributes\n    @public\n    @return {Object} an object, whose keys are changed properties,\n      and value is an [oldProp, newProp] array.\n  */\n\n  /**\n    If the model `hasDirtyAttributes` this function will discard any unsaved\n    changes. If the model `isNew` it will be removed from the store.\n\n    Example\n\n    ```javascript\n    record.name; // 'Untitled Document'\n    record.set('name', 'Doc 1');\n    record.name; // 'Doc 1'\n    record.rollbackAttributes();\n    record.name; // 'Untitled Document'\n    ```\n\n    @since 1.13.0\n    @method rollbackAttributes\n    @public\n  */\n\n  /**\n    @method _createSnapshot\n    @private\n  */\n  // TODO @deprecate in favor of a public API or examples of how to test successfully\n\n  /**\n    Save the record and persist any changes to the record to an\n    external source via the adapter.\n\n    Example\n\n    ```javascript\n    record.set('name', 'Tomster');\n    record.save().then(function() {\n      // Success callback\n    }, function() {\n      // Error callback\n    });\n    ```\n\n   If you pass an object using the `adapterOptions` property of the options\n   argument it will be passed to your adapter via the snapshot.\n\n    ```js\n    record.save({ adapterOptions: { subscribe: false } });\n    ```\n\n    ```app/adapters/post.js\n    import MyCustomAdapter from './custom-adapter';\n\n    export default class PostAdapter extends MyCustomAdapter {\n      updateRecord(store, type, snapshot) {\n        if (snapshot.adapterOptions.subscribe) {\n          // ...\n        }\n        // ...\n      }\n    }\n    ```\n\n    @method save\n    @public\n    @param {Object} options\n    @return {Promise} a promise that will be resolved when the adapter returns\n    successfully or rejected if the adapter returns with an error.\n  */\n\n  /**\n    Reload the record from the adapter.\n\n    This will only work if the record has already finished loading.\n\n    Example\n\n    ```js\n    import Component from '@glimmer/component';\n\n    export default class extends Component {\n      async reload = () => {\n        await this.args.model.reload();\n        // do something with the reloaded model\n      }\n    }\n    ```\n\n    @method reload\n    @public\n    @param {Object} options optional, may include `adapterOptions` hash which will be passed to adapter request\n\n   @return {Promise} a promise that will be resolved with the record when the\n    adapter returns successfully or rejected if the adapter returns\n    with an error.\n  */\n\n  attr() {\n    assert(\n      'The `attr` method is not available on Model, a Snapshot was probably expected. Are you passing a Model instead of a Snapshot to your serializer?',\n      false\n    );\n  }\n\n  /**\n    Get the reference for the specified belongsTo relationship.\n\n    For instance, given the following model\n\n    ```app/models/blog-post.js\n    import Model, { belongsTo } from '@ember-data/model';\n\n    export default class BlogPost extends Model {\n      @belongsTo('user', { async: true, inverse: null }) author;\n    }\n    ```\n\n    Then the reference for the author relationship would be\n    retrieved from a record instance like so:\n\n    ```js\n    blogPost.belongsTo('author');\n    ```\n\n    A `BelongsToReference` is a low-level API that allows access\n    and manipulation of a belongsTo relationship.\n\n    It is especially useful when you're dealing with `async` relationships\n    as it allows synchronous access to the relationship data if loaded, as\n    well as APIs for loading, reloading the data or accessing available\n    information without triggering a load.\n\n    It may also be useful when using `sync` relationships that need to be\n    loaded/reloaded with more precise timing than marking the\n    relationship as `async` and relying on autofetch would have allowed.\n\n    However,keep in mind that marking a relationship as `async: false` will introduce\n    bugs into your application if the data is not always guaranteed to be available\n    by the time the relationship is accessed. Ergo, it is recommended when using this\n    approach to utilize `links` for unloaded relationship state instead of identifiers.\n\n    Reference APIs are entangled with the relationship's underlying state,\n    thus any getters or cached properties that utilize these will properly\n    invalidate if the relationship state changes.\n\n    References are \"stable\", meaning that multiple calls to retrieve the reference\n    for a given relationship will always return the same HasManyReference.\n\n    @method belongsTo\n    @public\n    @param {String} name of the relationship\n    @since 2.5.0\n    @return {BelongsToReference} reference for this relationship\n  */\n\n  /**\n    Get the reference for the specified hasMany relationship.\n\n    For instance, given the following model\n\n    ```app/models/blog-post.js\n    import Model, { hasMany } from '@ember-data/model';\n\n    export default class BlogPost extends Model {\n      @hasMany('comment', { async: true, inverse: null }) comments;\n    }\n    ```\n\n    Then the reference for the comments relationship would be\n    retrieved from a record instance like so:\n\n    ```js\n    blogPost.hasMany('comments');\n    ```\n\n    A `HasManyReference` is a low-level API that allows access\n    and manipulation of a hasMany relationship.\n\n    It is especially useful when you are dealing with `async` relationships\n    as it allows synchronous access to the relationship data if loaded, as\n    well as APIs for loading, reloading the data or accessing available\n    information without triggering a load.\n\n    It may also be useful when using `sync` relationships with `@ember-data/model`\n    that need to be loaded/reloaded with more precise timing than marking the\n    relationship as `async` and relying on autofetch would have allowed.\n\n    However,keep in mind that marking a relationship as `async: false` will introduce\n    bugs into your application if the data is not always guaranteed to be available\n    by the time the relationship is accessed. Ergo, it is recommended when using this\n    approach to utilize `links` for unloaded relationship state instead of identifiers.\n\n    Reference APIs are entangled with the relationship's underlying state,\n    thus any getters or cached properties that utilize these will properly\n    invalidate if the relationship state changes.\n\n    References are \"stable\", meaning that multiple calls to retrieve the reference\n    for a given relationship will always return the same HasManyReference.\n\n    @method hasMany\n    @public\n    @param {String} name of the relationship\n    @since 2.5.0\n    @return {HasManyReference} reference for this relationship\n  */\n\n  /**\n   Given a callback, iterates over each of the relationships in the model,\n   invoking the callback with the name of each relationship and its relationship\n   descriptor.\n\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, descriptor);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `descriptor` the meta object that describes this relationship\n\n   The relationship descriptor argument is an object with the following properties.\n\n   - **name** <span class=\"type\">String</span> the name of this relationship on the Model\n   - **kind** <span class=\"type\">String</span> \"hasMany\" or \"belongsTo\"\n   - **options** <span class=\"type\">Object</span> the original options hash passed when the relationship was declared\n   - **parentType** <span class=\"type\">Model</span> the type of the Model that owns this relationship\n   - **type** <span class=\"type\">String</span> the type name of the related Model\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```app/serializers/application.js\n   import JSONSerializer from '@ember-data/serializer/json';\n\n   export default class ApplicationSerializer extends JSONSerializer {\n      serialize(record, options) {\n      let json = {};\n\n      record.eachRelationship(function(name, descriptor) {\n        if (descriptor.kind === 'hasMany') {\n          let serializedHasManyName = name.toUpperCase() + '_IDS';\n          json[serializedHasManyName] = record.get(name).map(r => r.id);\n        }\n      });\n\n      return json;\n    }\n  }\n   ```\n\n   @method eachRelationship\n   @public\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  eachRelationship<T>(\n    callback: (this: NoInfer<T> | undefined, key: MaybeRelationshipFields<this>, meta: LegacyRelationshipField) => void,\n    binding?: T\n  ): void {\n    (this.constructor as typeof Model).eachRelationship<T, this>(callback, binding);\n  }\n\n  relationshipFor(name: string): LegacyRelationshipField | undefined {\n    return (this.constructor as typeof Model).relationshipsByName.get(name);\n  }\n\n  inverseFor(name: string) {\n    return (this.constructor as typeof Model).inverseFor(name, storeFor(this)!);\n  }\n\n  eachAttribute<T>(\n    callback: (\n      this: NoInfer<T> | undefined,\n      key: isSubClass<this> extends true ? MaybeAttrFields<this> : string,\n      meta: LegacyAttributeField\n    ) => void,\n    binding?: T\n  ): void {\n    (this.constructor as typeof Model).eachAttribute<T, this>(callback, binding);\n  }\n\n  static isModel = true;\n\n  /**\n    Create should only ever be called by the store. To create an instance of a\n    `Model` in a dirty state use `store.createRecord`.\n\n   To create instances of `Model` in a clean state, use `store.push`\n\n    @method create\n    @private\n    @static\n  */\n\n  /**\n   Represents the model's class name as a string. This can be used to look up the model's class name through\n   `Store`'s modelFor method.\n\n   `modelName` is generated for you by EmberData. It will be a lowercased, dasherized string.\n   For example:\n\n   ```javascript\n   store.modelFor('post').modelName; // 'post'\n   store.modelFor('blog-post').modelName; // 'blog-post'\n   ```\n\n   The most common place you'll want to access `modelName` is in your serializer's `payloadKeyFromModelName` method. For example, to change payload\n   keys to underscore (instead of dasherized), you might use the following code:\n\n   ```javascript\n   import RESTSerializer from '@ember-data/serializer/rest';\n   import { underscore } from '<app-name>/utils/string-utils';\n\n   export default const PostSerializer = RESTSerializer.extend({\n     payloadKeyFromModelName(modelName) {\n       return underscore(modelName);\n     }\n   });\n   ```\n   @property modelName\n    @public\n   @type String\n   @readonly\n   @static\n  */\n  static modelName: string = null as unknown as string;\n\n  /*\n   These class methods below provide relationship\n   introspection abilities about relationships.\n\n   A note about the computed properties contained here:\n\n   **These properties are effectively sealed once called for the first time.**\n   To avoid repeatedly doing expensive iteration over a model's fields, these\n   values are computed once and then cached for the remainder of the runtime of\n   your application.\n\n   If your application needs to modify a class after its initial definition\n   (for example, using `reopen()` to add additional attributes), make sure you\n   do it before using your model with the store, which uses these properties\n   extensively.\n   */\n\n  /**\n   For a given relationship name, returns the model type of the relationship.\n\n   For example, if you define a model like this:\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment') comments;\n   }\n   ```\n\n   Calling `store.modelFor('post').typeForRelationship('comments', store)` will return `Comment`.\n\n   @method typeForRelationship\n    @public\n   @static\n   @param {String} name the name of the relationship\n   @param {store} store an instance of Store\n   @return {Model} the type of the relationship, or undefined\n   */\n  static typeForRelationship(name: string, store: Store) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const relationship = this.relationshipsByName.get(name);\n    return relationship && store.modelFor(relationship.type);\n  }\n\n  @computeOnce\n  static get inverseMap(): Record<string, LegacyRelationshipField | null> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    return Object.create(null) as Record<string, LegacyRelationshipField | null>;\n  }\n\n  /**\n   Find the relationship which is the inverse of the one asked for.\n\n   For example, if you define models like this:\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n      @hasMany('message') comments;\n    }\n   ```\n\n   ```app/models/message.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class MessageModel extends Model {\n      @belongsTo('post') owner;\n    }\n   ```\n\n   ``` js\n   store.modelFor('post').inverseFor('comments', store) // { type: 'message', name: 'owner', kind: 'belongsTo' }\n   store.modelFor('message').inverseFor('owner', store) // { type: 'post', name: 'comments', kind: 'hasMany' }\n   ```\n\n   @method inverseFor\n    @public\n   @static\n   @param {String} name the name of the relationship\n   @param {Store} store\n   @return {Object} the inverse relationship, or null\n   */\n  static inverseFor(name: string, store: Store): LegacyRelationshipField | null {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    const inverseMap = this.inverseMap;\n    if (inverseMap[name]) {\n      return inverseMap[name];\n    } else {\n      const inverse = this._findInverseFor(name, store);\n      inverseMap[name] = inverse;\n      return inverse;\n    }\n  }\n\n  //Calculate the inverse, ignoring the cache\n  static _findInverseFor(name: string, store: Store): LegacyRelationshipField | null {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const relationship = this.relationshipsByName.get(name)!;\n    assert(`No relationship named '${name}' on '${this.modelName}' exists.`, relationship);\n\n    if (!relationship) {\n      return null;\n    }\n\n    const { options } = relationship;\n    assert(\n      `Expected the relationship ${name} on ${this.modelName} to define an inverse.`,\n      options.inverse === null || (typeof options.inverse === 'string' && options.inverse.length > 0)\n    );\n\n    if (options.inverse === null) {\n      return null;\n    }\n\n    const schemaExists = store.schema.hasResource(relationship);\n\n    assert(\n      `No associated schema found for '${relationship.type}' while calculating the inverse of ${name} on ${this.modelName}`,\n      schemaExists\n    );\n\n    if (!schemaExists) {\n      return null;\n    }\n\n    const inverseField = store.schema.fields(relationship).get(options.inverse);\n    assert(\n      `No inverse relationship found for '${name}' on '${this.modelName}'`,\n      inverseField && (inverseField.kind === 'belongsTo' || inverseField.kind === 'hasMany')\n    );\n\n    return inverseField || null;\n  }\n\n  /**\n   The model's relationships as a map, keyed on the type of the\n   relationship. The value of each entry is an array containing a descriptor\n   for each relationship with that type, describing the name of the relationship\n   as well as the type.\n\n   For example, given the following model definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n      @hasMany('post') posts;\n    }\n   ```\n\n   This computed property would return a map describing these\n   relationships, like this:\n\n   ```javascript\n   import Blog from 'app/models/blog';\n   import User from 'app/models/user';\n   import Post from 'app/models/post';\n\n   let relationships = Blog.relationships;\n   relationships.user;\n   //=> [ { name: 'users', kind: 'hasMany' },\n   //     { name: 'owner', kind: 'belongsTo' } ]\n   relationships.post;\n   //=> [ { name: 'posts', kind: 'hasMany' } ]\n   ```\n\n   @property relationships\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n\n  @computeOnce\n  static get relationships(): Map<string, LegacyRelationshipField[]> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const map = new Map<string, LegacyRelationshipField[]>();\n    const relationshipsByName = this.relationshipsByName;\n\n    // Loop through each computed property on the class\n    relationshipsByName.forEach((desc) => {\n      const { type } = desc;\n\n      if (!map.has(type)) {\n        map.set(type, []);\n      }\n\n      map.get(type)!.push(desc);\n    });\n\n    return map;\n  }\n\n  /**\n   A hash containing lists of the model's relationships, grouped\n   by the relationship kind. For example, given a model with this\n   definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import Blog from 'app/models/blog';\n\n   let relationshipNames = Blog.relationshipNames;\n   relationshipNames.hasMany;\n   //=> ['users', 'posts']\n   relationshipNames.belongsTo;\n   //=> ['owner']\n   ```\n\n   @property relationshipNames\n    @public\n   @static\n   @type Object\n   @readOnly\n   */\n  @computeOnce\n  static get relationshipNames() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    const names: { hasMany: string[]; belongsTo: string[] } = {\n      hasMany: [],\n      belongsTo: [],\n    };\n\n    this.eachComputedProperty((name, meta) => {\n      if (isRelationshipSchema(meta)) {\n        names[meta.kind].push(name);\n      }\n    });\n\n    return names;\n  }\n\n  /**\n   An array of types directly related to a model. Each type will be\n   included once, regardless of the number of relationships it has with\n   the model.\n\n   For example, given a model with this definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import Blog from 'app/models/blog';\n\n   let relatedTypes = Blog.relatedTypes');\n   //=> ['user', 'post']\n   ```\n\n   @property relatedTypes\n   @public\n   @static\n   @type Array\n   @readOnly\n   */\n  @computeOnce\n  static get relatedTypes(): string[] {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const types: string[] = [];\n\n    const rels = this.relationshipsObject;\n    const relationships = Object.keys(rels);\n\n    // create an array of the unique types involved\n    // in relationships\n    for (let i = 0; i < relationships.length; i++) {\n      const name = relationships[i];\n      const meta = rels[name];\n      const modelName = meta.type;\n\n      if (!types.includes(modelName)) {\n        types.push(modelName);\n      }\n    }\n\n    return types;\n  }\n\n  /**\n   A map whose keys are the relationships of a model and whose values are\n   relationship descriptors.\n\n   For example, given a model with this\n   definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import Blog from 'app/models/blog';\n\n   let relationshipsByName = Blog.relationshipsByName;\n   relationshipsByName.users;\n   //=> { name: 'users', kind: 'hasMany', type: 'user', options: Object }\n   relationshipsByName.owner;\n   //=> { name: 'owner', kind: 'belongsTo', type: 'user', options: Object }\n   ```\n\n   @property relationshipsByName\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n  @computeOnce\n  static get relationshipsByName(): Map<string, LegacyRelationshipField> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    const map = new Map();\n    const rels = this.relationshipsObject;\n    const relationships = Object.keys(rels);\n\n    for (let i = 0; i < relationships.length; i++) {\n      const name = relationships[i];\n      const value = rels[name];\n\n      map.set(value.name, value);\n    }\n\n    return map;\n  }\n\n  @computeOnce\n  static get relationshipsObject(): Record<string, LegacyRelationshipField> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const relationships = Object.create(null) as Record<string, LegacyRelationshipField>;\n    const modelName = this.modelName;\n    this.eachComputedProperty((name: string, meta: unknown) => {\n      if (!isRelationshipSchema(meta)) {\n        return;\n      }\n      // TODO deprecate key being here\n      (meta as unknown as { key: string }).key = name;\n      meta.name = name;\n      relationships[name] = meta;\n\n      assert(`Expected options in meta`, meta.options && typeof meta.options === 'object');\n      assert(\n        `You should not specify both options.as and options.inverse as null on ${modelName}.${meta.name}, as if there is no inverse field there is no abstract type to conform to. You may have intended for this relationship to be polymorphic, or you may have mistakenly set inverse to null.`,\n        !(meta.options.inverse === null && meta.options.as?.length)\n      );\n    });\n    return relationships;\n  }\n\n  /**\n   A map whose keys are the fields of the model and whose values are strings\n   describing the kind of the field. A model's fields are the union of all of its\n   attributes and relationships.\n\n   For example:\n\n   ```app/models/blog.js\n   import Model, { attr, belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n\n      @attr('string') title;\n    }\n   ```\n\n   ```js\n   import Blog from 'app/models/blog'\n\n   let fields = Blog.fields;\n   fields.forEach(function(kind, field) {\n      // do thing\n    });\n\n   // prints:\n   // users, hasMany\n   // owner, belongsTo\n   // posts, hasMany\n   // title, attribute\n   ```\n\n   @property fields\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n  @computeOnce\n  static get fields(): Map<string, 'attribute' | 'belongsTo' | 'hasMany'> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    const map = new Map();\n\n    this.eachComputedProperty((name, meta) => {\n      if (isRelationshipSchema(meta)) {\n        map.set(name, meta.kind);\n      } else if (isAttributeSchema(meta)) {\n        map.set(name, 'attribute');\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   Given a callback, iterates over each of the relationships in the model,\n   invoking the callback with the name of each relationship and its relationship\n   descriptor.\n\n   @method eachRelationship\n    @public\n   @static\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  static eachRelationship<T, Schema extends Model>(\n    callback: (\n      this: T | undefined,\n      key: MaybeRelationshipFields<Schema>,\n      relationship: LegacyRelationshipField\n    ) => void,\n    binding?: T\n  ): void {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.relationshipsByName.forEach((relationship, name) => {\n      callback.call(binding, name as MaybeRelationshipFields<Schema>, relationship);\n    });\n  }\n\n  /**\n   Given a callback, iterates over each of the types related to a model,\n   invoking the callback with the related type's class. Each type will be\n   returned just once, regardless of how many different relationships it has\n   with a model.\n\n   @method eachRelatedType\n    @public\n   @static\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  static eachRelatedType<T>(callback: (this: T | undefined, type: string) => void, binding?: T) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const relationshipTypes = this.relatedTypes;\n\n    for (let i = 0; i < relationshipTypes.length; i++) {\n      const type = relationshipTypes[i];\n      callback.call(binding, type);\n    }\n  }\n\n  /**\n   *\n   * @method determineRelationshipType\n   * @private\n   * @deprecated\n   */\n  static determineRelationshipType(\n    knownSide: LegacyRelationshipField,\n    store: Store\n  ): 'oneToOne' | 'oneToMany' | 'manyToOne' | 'manyToMany' | 'oneToNone' | 'manyToNone' {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const knownKey = knownSide.name;\n    const knownKind = knownSide.kind;\n    const inverse = this.inverseFor(knownKey, store);\n    // let key;\n\n    if (!inverse) {\n      return knownKind === 'belongsTo' ? 'oneToNone' : 'manyToNone';\n    }\n\n    // key = inverse.name;\n    const otherKind = inverse.kind;\n\n    if (otherKind === 'belongsTo') {\n      return knownKind === 'belongsTo' ? 'oneToOne' : 'manyToOne';\n    } else {\n      return knownKind === 'belongsTo' ? 'oneToMany' : 'manyToMany';\n    }\n  }\n\n  /**\n   A map whose keys are the attributes of the model (properties\n   described by attr) and whose values are the meta object for the\n   property.\n\n   Example\n\n   ```app/models/person.js\n   import Model, { attr } from '@ember-data/model';\n\n   export default class PersonModel extends Model {\n      @attr('string') firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n   ```\n\n   ```javascript\n   import Person from 'app/models/person'\n\n   let attributes = Person.attributes\n\n   attributes.forEach(function(meta, name) {\n      // do thing\n    });\n\n   // prints:\n   // firstName {type: \"string\", kind: 'attribute', options: Object, parentType: function, name: \"firstName\"}\n   // lastName {type: \"string\", kind: 'attribute', options: Object, parentType: function, name: \"lastName\"}\n   // birthday {type: \"date\", kind: 'attribute', options: Object, parentType: function, name: \"birthday\"}\n   ```\n\n   @property attributes\n    @public\n   @static\n   @type {Map}\n   @readOnly\n   */\n  @computeOnce\n  static get attributes(): Map<string, LegacyAttributeField> {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const map = new Map<string, LegacyAttributeField>();\n\n    this.eachComputedProperty((name, meta) => {\n      if (isAttributeSchema(meta)) {\n        assert(\n          \"You may not set 'id' as an attribute on your model. Please remove any lines that look like: `id: attr('<type>')` from \" +\n            this.toString(),\n          name !== 'id'\n        );\n\n        // TODO deprecate key being here\n        (meta as unknown as { key: string }).key = name;\n        meta.name = name;\n        map.set(name, meta);\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   A map whose keys are the attributes of the model (properties\n   described by attr) and whose values are type of transformation\n   applied to each attribute. This map does not include any\n   attributes that do not have an transformation type.\n\n   Example\n\n   ```app/models/person.js\n   import Model, { attr } from '@ember-data/model';\n\n   export default class PersonModel extends Model {\n      @attr firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n   ```\n\n   ```javascript\n   import Person from 'app/models/person';\n\n   let transformedAttributes = Person.transformedAttributes\n\n   transformedAttributes.forEach(function(field, type) {\n      // do thing\n    });\n\n   // prints:\n   // lastName string\n   // birthday date\n   ```\n\n   @property transformedAttributes\n    @public\n   @static\n   @type {Map}\n   @readOnly\n   */\n  @computeOnce\n  static get transformedAttributes() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const map = new Map<string, string>();\n\n    this.eachAttribute((name: string, meta: LegacyAttributeField) => {\n      if (meta.type) {\n        map.set(name, meta.type);\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   Iterates through the attributes of the model, calling the passed function on each\n   attribute.\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, meta);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `meta` the meta object for the attribute property in the iteration\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```javascript\n   import Model, { attr } from '@ember-data/model';\n\n   class PersonModel extends Model {\n      @attr('string') firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n\n   PersonModel.eachAttribute(function(name, meta) {\n      // do thing\n    });\n\n   // prints:\n   // firstName {type: \"string\", kind: 'attribute', options: Object, parentType: function, name: \"firstName\"}\n   // lastName {type: \"string\", kind: 'attribute', options: Object, parentType: function, name: \"lastName\"}\n   // birthday {type: \"date\", kind: 'attribute', options: Object, parentType: function, name: \"birthday\"}\n   ```\n\n   @method eachAttribute\n    @public\n   @param {Function} callback The callback to execute\n   @param {Object} [binding] the value to which the callback's `this` should be bound\n   @static\n   */\n  static eachAttribute<T, Schema extends Model>(\n    callback: (this: T | undefined, key: MaybeAttrFields<Schema>, attribute: LegacyAttributeField) => void,\n    binding?: T\n  ): void {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.attributes.forEach((meta, name) => {\n      callback.call(binding, name as MaybeAttrFields<Schema>, meta);\n    });\n  }\n\n  /**\n   Iterates through the transformedAttributes of the model, calling\n   the passed function on each attribute. Note the callback will not be\n   called for any attributes that do not have an transformation type.\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, type);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `type` a string containing the name of the type of transformed\n   applied to the attribute\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```javascript\n   import Model, { attr } from '@ember-data/model';\n\n   let Person = Model.extend({\n      firstName: attr(),\n      lastName: attr('string'),\n      birthday: attr('date')\n    });\n\n   Person.eachTransformedAttribute(function(name, type) {\n      // do thing\n    });\n\n   // prints:\n   // lastName string\n   // birthday date\n   ```\n\n   @method eachTransformedAttribute\n    @public\n   @param {Function} callback The callback to execute\n   @param {Object} [binding] the value to which the callback's `this` should be bound\n   @static\n   */\n  static eachTransformedAttribute<T, Schema extends Model>(\n    callback: (this: T | undefined, key: Exclude<keyof Schema & string, keyof Model & string>, type: string) => void,\n    binding?: T\n  ): void {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.transformedAttributes.forEach((type: string, name) => {\n      callback.call(binding, name as Exclude<keyof Schema & string, keyof Model & string>, type);\n    });\n  }\n\n  /**\n   Returns the name of the model class.\n\n   @method toString\n    @public\n   @static\n   */\n  static toString() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    return `model:${this.modelName}`;\n  }\n}\n\n// @ts-expect-error TS doesn't know how to do `this` function overloads\nModel.prototype.save = save;\n// @ts-expect-error TS doesn't know how to do `this` function overloads\nModel.prototype.destroyRecord = destroyRecord;\nModel.prototype.unloadRecord = unloadRecord;\nModel.prototype.hasMany = hasMany;\nModel.prototype.belongsTo = belongsTo;\nModel.prototype.serialize = serialize;\nModel.prototype._createSnapshot = createSnapshot;\nModel.prototype.deleteRecord = deleteRecord;\nModel.prototype.changedAttributes = changedAttributes;\nModel.prototype.rollbackAttributes = rollbackAttributes;\nModel.prototype.reload = reload;\n\ndefineSignal(Model.prototype, 'isReloading', false);\n\n// this is required to prevent `init` from passing\n// the values initialized during create to `setUnknownProperty`\n(Model.prototype as unknown as { _createProps: null })._createProps = null;\n(Model.prototype as unknown as { _secretInit: null })._secretInit = null;\n\nif (DEBUG) {\n  const lookupDescriptor = function lookupDescriptor(obj: object, keyName: string) {\n    let current: object = obj;\n    do {\n      const descriptor = Object.getOwnPropertyDescriptor(current, keyName);\n      if (descriptor !== undefined) {\n        return descriptor;\n      }\n      current = Object.getPrototypeOf(current) as object;\n    } while (current !== null);\n    return null;\n  };\n\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const init = Model.prototype.init;\n  Model.prototype.init = function (createArgs: ModelCreateArgs) {\n    init.call(this, createArgs);\n\n    const ourDescriptor = lookupDescriptor(Model.prototype, 'currentState');\n    const theirDescriptor = lookupDescriptor(this, 'currentState');\n\n    if (!ourDescriptor || !theirDescriptor) {\n      throw new Error(\n        `Unable to determine if 'currentState' is a reserved property name on instances of classes extending Model. Please ensure that 'currentState' is not defined as a property on ${this.constructor.toString()}`\n      );\n    }\n\n    const realState = this.___recordState;\n    if (ourDescriptor.get !== theirDescriptor.get || realState !== this.currentState) {\n      throw new Error(\n        `'currentState' is a reserved property name on instances of classes extending Model. Please choose a different property name for ${this.constructor.toString()}`\n      );\n    }\n\n    const ID_DESCRIPTOR = lookupDescriptor(Model.prototype, 'id');\n    const idDesc = lookupDescriptor(this, 'id');\n\n    if (!ID_DESCRIPTOR || !idDesc) {\n      throw new Error(\n        `Unable to determine if 'id' is a reserved property name on instances of classes extending Model. Please ensure that 'id' is not defined as a property on ${this.constructor.toString()}`\n      );\n    }\n\n    if (idDesc.get !== ID_DESCRIPTOR.get) {\n      throw new Error(\n        `You may not set 'id' as an attribute on your model. Please remove any lines that look like: \\`id: attr('<type>')\\` from ${this.constructor.toString()}`\n      );\n    }\n  };\n\n  delete (Model as unknown as { reopen: unknown }).reopen;\n  delete (Model as unknown as { reopenClass: unknown }).reopenClass;\n}\n\nexport { Model };\n\nfunction isRelationshipSchema(meta: unknown): meta is LegacyRelationshipField {\n  const hasKind = typeof meta === 'object' && meta !== null && 'kind' in meta && 'options' in meta;\n  return hasKind && (meta.kind === 'hasMany' || meta.kind === 'belongsTo');\n}\n\nfunction isAttributeSchema(meta: unknown): meta is LegacyAttributeField {\n  return typeof meta === 'object' && meta !== null && 'kind' in meta && meta.kind === 'attribute';\n}\n"],"names":["isElementDescriptor","args","maybeTarget","maybeKey","maybeDesc","length","undefined","normalizeModelName","type","macroCondition","getGlobalConfig","WarpDrive","deprecations","DEPRECATE_NON_STRICT_TYPES","result","dasherize","deprecate","id","until","for","since","available","enabled","PromiseObject","ObjectProxy","extend","PromiseProxyMixin","deferred","WeakMap","deferDecorator","proto","prop","desc","map","get","Map","set","findDeferredDecorator","target","_a","cursor","prototype","decorateFieldV2","decorators","initializer","configurable","enumerable","writable","decorator","Object","defineProperty","decorateMethodV2","origDesc","getOwnPropertyDescriptor","value","call","initializeDeferredDecorator","constructor","LegacyPromiseProxy","Symbol","Extended","PromiseBelongsTo","key","legacySupport","_belongsToState","ref","referenceFor","n","cached","meta","env","DEBUG","test","Error","modelName","computed","reload","options","content","reloadBelongsTo","PromiseManyArray","promise","_update","isDestroyed","DEPRECATE_COMPUTED_CHAINS","compat","forEach","cb","then","s","f","catch","finally","destroy","links","tapPromise","create","defineSignal","proxy","isPending","isSettled","isFulfilled","isRejected","Promise","resolve","error","assertPolymorphicType","parentIdentifier","parentDefinition","addedIdentifier","store","inverseIsImplicit","isPolymorphic","schema","fields","inverseKey","kind","as","isResourceIdentiferWithRelatedLinks","Boolean","related","HasManyReference","___token","___identifier","___relatedTokenMap","graph","hasManyRelationship","definition","notifications","subscribe","_","bucket","notifiedKey","_ref","unsubscribe","token","clear","identifiers","ensureRefCanSubscribe","resource","_resource","data","resourceIdentifier","identifier","identifierCache","getOrCreateRecordIdentifier","delete","cache","getRelationship","remoteType","ids","link","href","push","doc","skipFetch","dataDoc","Array","isArray","isResourceData","isMaybeResource","_push","i","relationshipMeta","added","newData","_join","op","record","field","load","_isLoaded","hasRelationshipDataProperty","state","hasReceivedData","relationship","getData","every","_instanceCache","recordIsLoaded","support","LEGACY_SUPPORT","getManyArray","fetchSyncRel","isAsync","areAllInverseRecordsLoaded","reloadHasMany","getHasMany","object","keys","filter","k","rel","loaded","edge","accessed","BelongsToReference","belongsToRelationship","___relatedToken","peekRecord","getBelongsTo","getOrSetGlobal","lookupLegacySupport","recordIdentifierFor","isDestroying","LegacySupport","storeFor","peekCache","dependencySatisfies","graphFor","importSync","_manyArrayCache","_relationshipPromisesCache","_relationshipProxyCache","_pending","references","_syncArray","array","currentState","SOURCE","jsonApi","_getCurrentState","fastPush","mutate","mutation","_findBelongsTo","_findBelongsToByJsonApiResource","handleCompletedRelationshipRequest","e","loadingPromise","isBelongsTo","hasFailedLoadAttempt","shouldForceReload","_updatePromiseProxyFor","relatedIdentifier","isStableIdentifier","isLoaded","getRecord","setDirtyBelongsTo","extractIdentifierFromRecord","manyArray","ManyArray","_inverseIsAsync","inverseIsAsync","manager","allowMutation","fetchAsyncHasMany","_findHasManyByJsonApiResource","anyUnloaded","promiseProxy","name","reference","actualRelationshipKind","relationshipKind","upgradeStore","adapter","adapterFor","isStale","hasDematerializedInverse","isEmpty","allInverseRecordsAreLoaded","shouldFindViaLink","findHasMany","inverseType","request","useLink","req","linksMode","url","getRelatedLink","method","records","EnableHydration","cacheOptions","preferLocalCache","hasLocalPartialData","attemptLocalCache","hasData","future","localDataIsEmpty","resourceIsLocal","recordExt","isHasMany","notify","_flush","_graph","relationshipData","unloaded","find","instanceCache","ArrayProxyWithCustomOverrides","ArrayProxy","Errors","errorsByAttributeName","errorsFor","attribute","errors","A","g","mapBy","void 0","unknownProperty","not","add","messages","_findOrCreateMessages","addObjects","__record","notifyPropertyChange","messagesArray","_messages","message","err","findBy","remove","rejectBy","setObjects","replace","attributes","has","rollbackAttributes","isNew","RecordStore","rollbackAttrs","cleanErrorRequests","unloadRecord","belongsTo","hasMany","isReloading","changedAttributes","changedAttrs","serialize","serializeRecord","deleteRecord","save","isDeleted","saveRecord","destroyRecord","createSnapshot","_fetchManager","FetchManager","notifyChanges","notifyAttribute","eachAttribute","relationshipsByName","notifyRelationship","eachRelationship","hasPromise","async","currentValue","cacheFor","getAttr","SOURCE_POINTER_REGEXP","SOURCE_POINTER_PRIMARY_REGEXP","PRIMARY_ATTRIBUTE_KEY","isInvalidError","isAdapterError","code","RecordState","identity","pendingCount","fulfilledCount","rejectedCount","_errorRequests","_lastError","requests","getRequestStateService","handleRequest","isSaving","response","notifyErrorsStateChanged","subscribeForRecord","lastRequest","getLastRequestForRecord","handler","updateInvalidErrors","notifySignal","lid","getErrors","jsonApiErrors","source","pointer","keyMatch","match","search","errMsg","detail","title","isLoading","tagged","isSaved","rd","isDeletionCommitted","isValid","isDirty","hasChangedAttrs","isError","errorReq","adapterError","isPreloaded","stateName","dirtyType","computeOnce","propertyName","getter","hasComputed","Model","EmberObject","init","_secretInit","_createProps","createProps","___recordState","setProperties","___private_notifications","hasDirtyAttributes","v","normalizedId","coerceId","didChange","setRecordId","toString","_v","attr","callback","binding","relationshipFor","inverseFor","isModel","typeForRelationship","modelFor","inverseMap","inverse","_findInverseFor","schemaExists","hasResource","inverseField","relationships","relationshipNames","names","eachComputedProperty","isRelationshipSchema","relatedTypes","types","rels","relationshipsObject","includes","isAttributeSchema","eachRelatedType","relationshipTypes","determineRelationshipType","knownSide","knownKey","knownKind","otherKind","transformedAttributes","eachTransformedAttribute","_createSnapshot","lookupDescriptor","obj","keyName","current","descriptor","getPrototypeOf","createArgs","ourDescriptor","theirDescriptor","realState","ID_DESCRIPTOR","idDesc","reopen","reopenClass","hasKind"],"mappings":";;;;;;;;;;;;;;;;;;;AAOO,SAASA,mBAAmBA,CAACC,IAAe,EAAyD;EAC1G,MAAM,CAACC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,CAAC,GAAGH,IAAI;AAE/C,EAAA;AACE;IACAA,IAAI,CAACI,MAAM,KAAK,CAAC;AACjB;AACC,IAAA,OAAOH,WAAW,KAAK,UAAU,IAAK,OAAOA,WAAW,KAAK,QAAQ,IAAIA,WAAW,KAAK,IAAK,CAAC;AAChG;IACA,OAAOC,QAAQ,KAAK,QAAQ;AAC5B;AACE,IAAA,OAAOC,SAAS,KAAK,QAAQ,IAC7BA,SAAS,KAAK,IAAI,IAClB,YAAY,IAAIA,SAAS,IACzB,cAAc,IAAIA,SAAS;AAC3B;AACAA,IAAAA,SAAS,KAAKE,SAAS;AAAC;AAE9B;AAEO,SAASC,kBAAkBA,CAACC,IAAY,EAAU;EACvD,IAAAC,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAAC,YAAA,CAAAC,0BAAA,CAAgC,EAAA;AAC9B,IAAA,MAAMC,MAAM,GAAGC,SAAS,CAACP,IAAI,CAAC;AAE9BQ,IAAAA,SAAS,CACP,CAAA,mBAAA,EAAsBR,IAAI,CAAA,0DAAA,EAA6DM,MAAM,CAAA,cAAA,EAAiBN,IAAI,CAAA,EAAA,CAAI,EACtHM,MAAM,KAAKN,IAAI,EACf;AACES,MAAAA,EAAE,EAAE,uCAAuC;AAC3CC,MAAAA,KAAK,EAAE,KAAK;AACZC,MAAAA,GAAG,EAAE,YAAY;AACjBC,MAAAA,KAAK,EAAE;AACLC,QAAAA,SAAS,EAAE,MAAM;AACjBC,QAAAA,OAAO,EAAE;AACX;AACF,KACF,CAAC;AAED,IAAA,OAAOR,MAAM;AACf;AAEA,EAAA,OAAON,IAAI;AACb;;AC9CO,MAAMe,aAAa,GAAGC,WAAW,CAACC,MAAM,CAACC,iBAAiB,CAAC;;ACoBlE,MAAMC,QAAA,sBAGEC,OAAA,EAAA;AAER,SAASC,eACPC,KAAA,EACAC,IAAA,EACAC,IAAA,EACM;AACF,EAAA,IAAAC,GAAA,GAAMN,QAAA,CAASO,GAAA,CAAIJ,KAAK,CAAA;EAC5B,IAAI,CAACG,GAAA,EAAK;AACRA,IAAAA,GAAA,sBAAUE,GAAA,EAAA;AACDR,IAAAA,QAAA,CAAAS,GAAA,CAAIN,KAAA,EAAOG,GAAG,CAAA;AACzB;AACIA,EAAAA,GAAA,CAAAG,GAAA,CAAIL,IAAA,EAAMC,IAAI,CAAA;AACpB;AAEA,SAASK,qBACPC,CAAAA,MAAA,EACAP,IAAA,EACwB;AArB1B,EAAA,IAAAQ,EAAA;AAsBE,EAAA,IAAIC,MAAA,GAAkBF,MAAA,CAAeG,SAAA;AACrC,EAAA,OAAOD,MAAA,EAAQ;AACb,IAAA,IAAIR,IAAA,GAAA,CAAOO,EAAA,GAAAZ,QAAA,CAASO,GAAA,CAAIM,MAAM,MAAnB,IAAAD,GAAAA,MAAAA,GAAAA,EAAA,CAAsBL,GAAA,CAAIH,IAAA,CAAA;AACrC,IAAA,IAAIC,IAAA,EAAM;AACD,MAAA,OAAAA,IAAA;AACT;IACAQ,MAAA,GAAUA,MAAA,CAAeC,SAAA;AAC3B;AACF;AAWA,SAASC,eAAAA,CACPD,SAAA,EACAV,IAAA,EACAY,UAAA,EACAC,WAAA,EACM;AACN,EAAA,IAAIZ,IAAA,GAAmB;AACrBa,IAAAA,YAAA,EAAc,IAAA;AACdC,IAAAA,UAAA,EAAY,IAAA;AACZC,IAAAA,QAAA,EAAU,IAAA;AACVH,IAAAA,WAAA,EAAa;AAAA,GAAA;AAEf,EAAA,IAAIA,WAAA,EAAa;IACfZ,IAAA,CAAKY,WAAA,GAAcA,WAAA;AACrB;EACA,KAASI,IAAAA,SAAA,IAAaL,UAAA,EAAY;IAChCX,IAAA,GAAOgB,SAAA,CAAUP,SAAA,EAAWV,IAAA,EAAMC,IAAI,CAAA,IAAKA,IAAA;AAC7C;AACI,EAAA,IAAAA,IAAA,CAAKY,WAAA,KAAgB,MAAW,EAAA;AAC3BK,IAAAA,MAAA,CAAAC,cAAA,CAAeT,SAAA,EAAWV,IAAA,EAAMC,IAAI,CAAA;GACtC,MAAA;AACUH,IAAAA,cAAA,CAAAY,SAAA,EAAWV,IAAA,EAAMC,IAAI,CAAA;AACtC;AACF;AAUA,SAASmB,iBACPV,SAAA,EACAV,IAAA,EACAY,UAAA,EACM;EACN,MAAMS,QAAA,GAAWH,MAAA,CAAOI,wBAAA,CAAyBZ,SAAA,EAAWV,IAAI,CAAA;AAC5D,EAAA,IAAAC,IAAA,GAAmB;IAAE,GAAGoB;AAAA,GAAA;EAC5B,KAASJ,IAAAA,SAAA,IAAaL,UAAA,EAAY;IAChCX,IAAA,GAAOgB,SAAA,CAAUP,SAAA,EAAWV,IAAA,EAAMC,IAAI,CAAA,IAAKA,IAAA;AAC7C;AACI,EAAA,IAAAA,IAAA,CAAKY,WAAA,KAAgB,MAAW,EAAA;AAClCZ,IAAAA,IAAA,CAAKsB,KAAA,GAAQtB,IAAA,CAAKY,WAAA,GAAcZ,IAAA,CAAKY,WAAA,CAAYW,IAAA,CAAKd,SAAS,CAAI,GAAA,MAAA;IACnET,IAAA,CAAKY,WAAA,GAAc,MAAA;AACrB;AACOK,EAAAA,MAAA,CAAAC,cAAA,CAAeT,SAAA,EAAWV,IAAA,EAAMC,IAAI,CAAA;AAC7C;AAEA,SAASwB,2BACPlB,CAAAA,MAAA,EACAP,IAAA,EACM;EACN,IAAIC,IAAA,GAAOK,qBAAA,CAAsBC,MAAA,CAAOmB,WAAA,EAAa1B,IAAI,CAAA;AACzD,EAAA,IAAIC,IAAA,EAAM;AACDiB,IAAAA,MAAA,CAAAC,cAAA,CAAeZ,MAAA,EAAQP,IAAA,EAAM;MAClCe,UAAA,EAAYd,IAAA,CAAKc,UAAA;MACjBD,YAAA,EAAcb,IAAA,CAAKa,YAAA;MACnBE,QAAA,EAAUf,IAAA,CAAKe,QAAA;AACfO,MAAAA,KAAA,EAAOtB,IAAA,CAAKY,WAAA,GAAcZ,IAAA,CAAKY,WAAA,CAAYW,IAAA,CAAKjB,MAAM,CAAI,GAAA;KAC3D,CAAA;AACH;AACF;;ACvGO,MAAMoB,kBAAkB,GAAGC,MAAM,CAACxC,GAAG,CAAC,oBAAoB,CAAC;;AAMlE;;AAGA,MAAMyC,QAAiD,GACrDrC,aAAmE;;AAErE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMsC,gBAAgB,SAAsBD,QAAQ,CAAI;EAGtD,IACI3C,EAAEA,GAAkB;IACtB,MAAM;MAAE6C,GAAG;AAAEC,MAAAA;KAAe,GAAG,IAAI,CAACC,eAAe;IACnD,MAAMC,GAAG,GAAGF,aAAa,CAACG,YAAY,CAAC,WAAW,EAAEJ,GAAG,CAAC;AAExD,IAAA,OAAOG,GAAG,CAAChD,EAAE,EAAE;AACjB;;AAEA;AACA;AACA;AAAA,EAAA;IAAAkD,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,IAAA,EAAA,CAVC2B,MAAM,CAAA,CAAA;AAAA;EAWP,IACIC,IAAIA,GAAG;AACT;AACA,IAAO;MACL5D,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,QAAA;AAAA,UAAA,MAAA,IAAAC,KAAA,CACE,mFAAmF,GACjF,CAAG,EAAA,IAAI,CAACT,eAAe,CAACU,SAAS,CAAA,CAAA,EAAI,IAAI,CAACV,eAAe,CAACF,GAAG,CAAA,EAAA,CAAI,GACjE,4DAA4D,CAAA;AAAA;AAAA,OAAA,EACzD,CAAA,GAAA,EAAA;AAET;AACA,IAAA;AACF;AAAC,EAAA;AAAAK,IAAAA,gBAAA,CAAA1B,IAAAA,CAAAA,SAAA,EAZAkC,MAAAA,EAAAA,CAAAA,QAAQ,EAAE,CAAA,CAAA;AAAA;EAcX,MAAMC,MAAMA,CAACC,OAAgC,EAAiB;IAC5DpE,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,MAAA,IAAA,CAAAA,IAAA,EAAA;QAAA,MAAAC,IAAAA,KAAA,CAAO,wEAAwE,CAAA;AAAA;AAAA,KAAA,EAAE,IAAI,CAACK,OAAO,KAAKxE,SAAS,CAAA,GAAA,EAAA;IAC3G,MAAM;MAAEwD,GAAG;AAAEC,MAAAA;KAAe,GAAG,IAAI,CAACC,eAAe;AACnD,IAAA,MAAMD,aAAa,CAACgB,eAAe,CAACjB,GAAG,EAAEe,OAAO,CAAC;AACjD,IAAA,OAAO,IAAI;AACb;EAEA,CAACnB,kBAAkB,IAAI,IAAI;AAC7B;;ACvEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACO,MAAMsB,gBAAgB,CAAc;AAKzCvB,EAAAA,WAAWA,CAACwB,OAA8B,EAAEH,OAAsB,EAAE;AAClE,IAAA,IAAI,CAACI,OAAO,CAACD,OAAO,EAAEH,OAAO,CAAC;IAC9B,IAAI,CAACK,WAAW,GAAG,KAAK;AAC1B;;AAEA;AACF;AACA;AACA;AACA;EACE,IACI9E,MAAMA,GAAW;AACnB;AACA;IACA,IAAAI,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAAC,YAAA,CAAAwE,yBAAA,CAA+B,EAAA;AAC7B;MACA,IAAI,CAAC,IAAI,CAAC;AACZ;IACA,OAAO,IAAI,CAACN,OAAO,GAAG,IAAI,CAACA,OAAO,CAACzE,MAAM,GAAG,CAAC;AAC/C;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATE,EAAA;IAAA8D,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,QAAA,EAAA,CAXC4C,MAAM,CAAA,CAAA;AAAA;EAqBPC,OAAOA,CAACC,EAAgD,EAAE;AACxD,IAAA,IAAI,IAAI,CAACT,OAAO,IAAI,IAAI,CAACzE,MAAM,EAAE;AAC/B,MAAA,IAAI,CAACyE,OAAO,CAACQ,OAAO,CAACC,EAAE,CAAC;AAC1B;AACF;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEX,MAAMA,CAACC,OAAoC,EAAE;IAC3CpE,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,MAAA,IAAA,CAAAA,IAAA,EAAA;QAAA,MAAAC,IAAAA,KAAA,CAAO,wEAAwE,CAAA;AAAA;KAAE,EAAA,IAAI,CAACK,OAAO,CAAA,GAAA,EAAA;AAC7F,IAAA,KAAK,IAAI,CAACA,OAAO,CAACF,MAAM,CAACC,OAAO,CAAC;AACjC,IAAA,OAAO,IAAI;AACb;;AAEA;;AAEA;AACF;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;;AAGE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEW,EAAAA,IAAIA,CAACC,CAA+C,EAAEC,CAAgD,EAAE;IACtG,OAAO,IAAI,CAACT,OAAO,CAAEO,IAAI,CAACC,CAAC,EAAEC,CAAC,CAAC;AACjC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEC,KAAKA,CAACJ,EAAiD,EAAE;AACvD,IAAA,OAAO,IAAI,CAACN,OAAO,CAAEU,KAAK,CAACJ,EAAE,CAAC;AAChC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEK,OAAOA,CAACL,EAAmD,EAAE;AAC3D,IAAA,OAAO,IAAI,CAACN,OAAO,CAAEW,OAAO,CAACL,EAAE,CAAC;AAClC;;AAEA;;AAEAM,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACV,WAAW,GAAG,IAAI;IACvB,IAAI,CAACL,OAAO,GAAG,IAAI;IACnB,IAAI,CAACG,OAAO,GAAG,IAAI;AACrB;;AAEA;;AAEA;AACF;AACA;AACA;AACA;EACE,IACIa,KAAKA,GAAG;IACV,OAAO,IAAI,CAAChB,OAAO,GAAG,IAAI,CAACA,OAAO,CAACgB,KAAK,GAAGxF,SAAS;AACtD;;AAEA;AACF;AACA;AACA;AACA;AAJE,EAAA;IAAA6D,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,OAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;EAUP,IACIhB,IAAIA,GAAG;IACT,OAAO,IAAI,CAACS,OAAO,GAAG,IAAI,CAACA,OAAO,CAACT,IAAI,GAAG/D,SAAS;AACrD;;AAEA;AAAA,EAAA;IAAA6D,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,MAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;AAOPH,EAAAA,OAAOA,CAACD,OAA8B,EAAEH,OAAsB,EAAE;IAC9D,IAAIA,OAAO,KAAKxE,SAAS,EAAE;MACzB,IAAI,CAACwE,OAAO,GAAGA,OAAO;AACxB;IAEA,IAAI,CAACG,OAAO,GAAGc,UAAU,CAAC,IAAI,EAAEd,OAAO,CAAC;AAC1C;AAEA,EAAA,OAAOe,MAAMA,CAAI;IAAEf,OAAO;AAAEH,IAAAA;AAAmC,GAAC,EAAuB;AACrF,IAAA,OAAO,IAAI,IAAI,CAACG,OAAO,EAAEH,OAAO,CAAC;AACnC;EAEA,CAACpB,kBAAkB,IAAI,IAAI;AAC7B;AACAuC,YAAY,CAACjB,gBAAgB,CAACvC,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC;AACzDwD,YAAY,CAACjB,gBAAgB,CAACvC,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC;AAC5DwD,YAAY,CAACjB,gBAAgB,CAACvC,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC;AAC7DwD,YAAY,CAACjB,gBAAgB,CAACvC,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC;AAC9DwD,YAAY,CAACjB,gBAAgB,CAACvC,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC;;AAE5D;AACA;AACA;AACA;AACA,IAAAhC,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAAC,YAAA,CAAAwE,yBAAA,CAA+B,EAAA;AAC7B,EAAA,MAAMpD,IAAI,GAAG;AACXc,IAAAA,UAAU,EAAE,IAAI;AAChBD,IAAAA,YAAY,EAAE,KAAK;IACnBX,GAAG,EAAE,YAAkC;MACrC,OAAO,IAAI,CAAC4C,OAAO,EAAEzE,MAAM,IAAI,IAAI,CAACyE,OAAO;AAC7C;GACD;EACDO,MAAM,CAACrD,IAAI,CAAC;;AAEZ;AACA;AACA;AACA;;EAEAiB,MAAM,CAACC,cAAc,CAAC8B,gBAAgB,CAACvC,SAAS,EAAE,IAAI,EAAET,IAAI,CAAC;AAC/D;AAEA,SAAS+D,UAAUA,CAAIG,KAA0B,EAAEjB,OAA8B,EAAE;EACjFiB,KAAK,CAACC,SAAS,GAAG,IAAI;EACtBD,KAAK,CAACE,SAAS,GAAG,KAAK;EACvBF,KAAK,CAACG,WAAW,GAAG,KAAK;EACzBH,KAAK,CAACI,UAAU,GAAG,KAAK;EACxB,OAAOC,OAAO,CAACC,OAAO,CAACvB,OAAO,CAAC,CAACO,IAAI,CACjCV,OAAO,IAAK;IACXoB,KAAK,CAACC,SAAS,GAAG,KAAK;IACvBD,KAAK,CAACG,WAAW,GAAG,IAAI;IACxBH,KAAK,CAACE,SAAS,GAAG,IAAI;IACtBF,KAAK,CAACpB,OAAO,GAAGA,OAAO;AACvB,IAAA,OAAOA,OAAO;GACf,EACA2B,KAAK,IAAK;IACTP,KAAK,CAACC,SAAS,GAAG,KAAK;IACvBD,KAAK,CAACG,WAAW,GAAG,KAAK;IACzBH,KAAK,CAACI,UAAU,GAAG,IAAI;IACvBJ,KAAK,CAACE,SAAS,GAAG,IAAI;AACtB,IAAA,MAAMK,KAAK;AACb,GACF,CAAC;AACH;;ACpPA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAIC,qBAKK;AAET,IAAAjG,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAW,EAAA;AACT;EACAmC,qBAAqB,GAAG,SAASA,qBAAqBA,CACpDC,gBAAwC,EACxCC,gBAA8B,EAC9BC,eAAuC,EACvCC,KAAY,EACZ;IACA,IAAIF,gBAAgB,CAACG,iBAAiB,EAAE;AACtC,MAAA;AACF;IACA,IAAIH,gBAAgB,CAACI,aAAa,EAAE;AAClC,MAAA,MAAM3C,IAAI,GAAGyC,KAAK,CAACG,MAAM,CAACC,MAAM,CAACL,eAAe,CAAC,EAAE3E,GAAG,CAAC0E,gBAAgB,CAACO,UAAU,CAAC;AACnF,MAAA,IAAI9C,IAAI,EAAE;QACR5D,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,UAAA,IAAA,CAAAA,IAAA,EAAA;YAAA,MAAAC,IAAAA,KAAA,CACE,CAAA,kCAAA,EAAqCmC,gBAAgB,CAACO,UAAU,CAAON,IAAAA,EAAAA,eAAe,CAACrG,IAAI,CAAkC,gCAAA,CAAA,CAAA;AAAA;SAC7H6D,EAAAA,IAAI,CAAC+C,IAAI,KAAK,WAAW,IAAI/C,IAAI,CAAC+C,IAAI,KAAK,SAAS,CAAA,GAAA,EAAA;QAEtD3G,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,UAAA,IAAA,CAAAA,IAAA,EAAA;YAAA,MAAAC,IAAAA,KAAA,CACE,CAAA,iCAAA,EAAoCmC,gBAAgB,CAACO,UAAU,CAAA,MAAA,EAASN,eAAe,CAACrG,IAAI,CAAA,2BAAA,EAA8BoG,gBAAgB,CAACpG,IAAI,CAAyCoG,sCAAAA,EAAAA,gBAAgB,CAAC9C,GAAG,CAAsB6C,mBAAAA,EAAAA,gBAAgB,CAACnG,IAAI,CAA0CoG,uCAAAA,EAAAA,gBAAgB,CAACpG,IAAI,CAAgB,cAAA,CAAA,CAAA;AAAA;SACtU6D,EAAAA,IAAI,EAAEQ,OAAO,EAAEwC,EAAE,KAAKT,gBAAgB,CAACpG,IAAI,CAAA,GAAA,EAAA;AAE/C;AACF;GACD;AACH;;ACXA,SAAS8G,qCAAmCA,CAC1ChE,KAAiE,EACiB;AAClF,EAAA,OAAOiE,OAAO,CAACjE,KAAK,IAAIA,KAAK,CAACwC,KAAK,IAAIxC,KAAK,CAACwC,KAAK,CAAC0B,OAAO,CAAC;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACe,MAAMC,gBAAgB,CAInC;AAIA;AACF;AACA;AACA;AACA;AACA;;AAGE;AACF;AACA;AACA;AACA;AACA;;AAGE;EACAC,QAAQ;EACRC,aAAa;EACbC,kBAAkB;EAIlBnE,WAAWA,CACTqD,KAAY,EACZe,KAAY,EACZlB,gBAAqE,EACrEmB,mBAAmC,EACnChE,GAAM,EACN;IACA,IAAI,CAAC+D,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC/D,GAAG,GAAGA,GAAG;IACd,IAAI,CAACgE,mBAAmB,GAAGA,mBAAmB;AAC9C,IAAA,IAAI,CAACtH,IAAI,GAAGsH,mBAAmB,CAACC,UAAU,CAACvH,IAAyC;IAEpF,IAAI,CAACsG,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACa,aAAa,GAAGhB,gBAAgB;AACrC,IAAA,IAAI,CAACe,QAAQ,GAAGZ,KAAK,CAACkB,aAAa,CAACC,SAAS,CAC3CtB,gBAAgB,EAChB,CAACuB,CAAyB,EAAEC,MAAwB,EAAEC,WAAoB,KAAK;AAC7E,MAAA,IAAID,MAAM,KAAK,eAAe,IAAIC,WAAW,KAAKtE,GAAG,EAAE;QACrD,IAAI,CAACuE,IAAI,EAAE;AACb;AACF,KACF,CAAC;AACD,IAAA,IAAI,CAACT,kBAAkB,GAAG,IAAIzF,GAAG,EAAE;AACnC;AACF;;AAEA;AACF;AACA;AACA;AACA;AACE0D,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACiB,KAAK,CAACkB,aAAa,CAACM,WAAW,CAAC,IAAI,CAACZ,QAAQ,CAAC;AACnD,IAAA,IAAI,CAACE,kBAAkB,CAACtC,OAAO,CAAEiD,KAAK,IAAK;MACzC,IAAI,CAACzB,KAAK,CAACkB,aAAa,CAACM,WAAW,CAACC,KAAK,CAAC;AAC7C,KAAC,CAAC;AACF,IAAA,IAAI,CAACX,kBAAkB,CAACY,KAAK,EAAE;AACjC;;AAEA;AACF;AACA;AACA;AACA;AACA;EACE,IAEIC,WAAWA,GAAgE;IAC7EC,qBAAqB,CAAC,IAAI,CAAC;AAC3B;AACA,IAAA,IAAI,CAACL,IAAI;AAET,IAAA,MAAMM,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AAEjC,IAAA,MAAM3G,GAAG,GAAG,IAAI,CAAC2F,kBAAkB;AACnC,IAAA,IAAI,CAACA,kBAAkB,GAAG,IAAIzF,GAAG,EAAE;AAEnC,IAAA,IAAIwG,QAAQ,IAAIA,QAAQ,CAACE,IAAI,EAAE;AAC7B,MAAA,OAAOF,QAAQ,CAACE,IAAI,CAAC5G,GAAG,CAAE6G,kBAAkB,IAAK;QAC/C,MAAMC,UAAU,GAAG,IAAI,CAACjC,KAAK,CAACkC,eAAe,CAACC,2BAA2B,CAACH,kBAAkB,CAAC;AAC7F,QAAA,IAAIP,KAAK,GAAGtG,GAAG,CAACC,GAAG,CAAC6G,UAAU,CAAC;AAE/B,QAAA,IAAIR,KAAK,EAAE;AACTtG,UAAAA,GAAG,CAACiH,MAAM,CAACH,UAAU,CAAC;AACxB,SAAC,MAAM;AACLR,UAAAA,KAAK,GAAG,IAAI,CAACzB,KAAK,CAACkB,aAAa,CAACC,SAAS,CACxCc,UAAU,EACV,CAACb,CAAyB,EAAEC,MAAwB,EAAEC,WAAoB,KAAK;YAC7E,IAAID,MAAM,KAAK,UAAU,IAAKA,MAAM,KAAK,YAAY,IAAIC,WAAW,KAAK,IAAK,EAAE;cAC9E,IAAI,CAACC,IAAI,EAAE;AACb;AACF,WACF,CAAC;AACH;QACA,IAAI,CAACT,kBAAkB,CAACxF,GAAG,CAAC2G,UAAU,EAAER,KAAK,CAAC;AAE9C,QAAA,OAAOQ,UAAU;AACnB,OAAC,CAAC;AACJ;AAEA9G,IAAAA,GAAG,CAACqD,OAAO,CAAEiD,KAAK,IAAK;MACrB,IAAI,CAACzB,KAAK,CAACkB,aAAa,CAACM,WAAW,CAACC,KAAK,CAAC;AAC7C,KAAC,CAAC;IACFtG,GAAG,CAACuG,KAAK,EAAE;AAEX,IAAA,OAAO,EAAE;AACX;AAAC,EAAA;AAAArE,IAAAA,gBAAA,CAAA1B,IAAAA,CAAAA,SAAA,EAxCA4C,aAAAA,EAAAA,CAAAA,MAAM,EADNjB,MAAM,CAAA,CAAA;AAAA;AA2CPwE,EAAAA,SAASA,GAAG;AACV,IAAA,MAAMO,KAAK,GAAG,IAAI,CAACrC,KAAK,CAACqC,KAAK;IAC9B,OAAOA,KAAK,CAACC,eAAe,CAAC,IAAI,CAACzB,aAAa,EAAE,IAAI,CAAC7D,GAAG,CAAC;AAC5D;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQEuF,EAAAA,UAAUA,GAAmB;AAC3B,IAAA,MAAM/F,KAAK,GAAG,IAAI,CAACsF,SAAS,EAAE;IAC9B,IAAItF,KAAK,IAAIA,KAAK,CAACwC,KAAK,IAAIxC,KAAK,CAACwC,KAAK,CAAC0B,OAAO,EAAE;AAC/C,MAAA,OAAO,MAAM;AACf;AAEA,IAAA,OAAO,KAAK;AACd;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQE8B,EAAAA,GAAGA,GAAyB;IAC1B,OAAO,IAAI,CAACb,WAAW,CAACxG,GAAG,CAAE8G,UAAU,IAAKA,UAAU,CAAC9H,EAAE,CAAC;AAC5D;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMEsI,EAAAA,IAAIA,GAAkB;AACpB,IAAA,MAAMZ,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AAEjC,IAAA,IAAItB,qCAAmC,CAACqB,QAAQ,CAAC,EAAE;MACjD,IAAIA,QAAQ,CAAC7C,KAAK,EAAE;AAClB,QAAA,MAAM0B,OAAO,GAAGmB,QAAQ,CAAC7C,KAAK,CAAC0B,OAAO;AACtC,QAAA,OAAO,CAACA,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAGA,OAAO,CAACgC,IAAI;AACzE;AACF;AACA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACE1D,EAAAA,KAAKA,GAA2B;AAC9B,IAAA,MAAM6C,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;IAEjC,OAAOD,QAAQ,IAAIA,QAAQ,CAAC7C,KAAK,GAAG6C,QAAQ,CAAC7C,KAAK,GAAG,IAAI;AAC3D;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOEzB,EAAAA,IAAIA,GAAgB;IAClB,IAAIA,IAAiB,GAAG,IAAI;AAC5B,IAAA,MAAMsE,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AACjC,IAAA,IAAID,QAAQ,IAAIA,QAAQ,CAACtE,IAAI,IAAI,OAAOsE,QAAQ,CAACtE,IAAI,KAAK,QAAQ,EAAE;MAClEA,IAAI,GAAGsE,QAAQ,CAACtE,IAAI;AACtB;AACA,IAAA,OAAOA,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAmBE,EAAA,MAAMoF,IAAIA,CACRC,GAA0D,EAC1DC,SAAmB,EACiB;IACpC,MAAM;AAAE7C,MAAAA;AAAM,KAAC,GAAG,IAAI;IACtB,MAAM8C,OAAO,GAAGC,KAAK,CAACC,OAAO,CAACJ,GAAG,CAAC,GAAG;AAAEb,MAAAA,IAAI,EAAEa;AAAI,KAAC,GAAGA,GAAG;IACxD,MAAMK,cAAc,GAAGF,KAAK,CAACC,OAAO,CAACF,OAAO,CAACf,IAAI,CAAC,IAAIe,OAAO,CAACf,IAAI,CAACxI,MAAM,GAAG,CAAC,IAAI2J,eAAe,CAACJ,OAAO,CAACf,IAAI,CAAC,CAAC,CAAC,CAAC;;AAEjH;IACApI,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,MAAA,IAAA,CAAAA,IAAA,EAAA;QAAA,MAAAC,IAAAA,KAAA,CACE,CAA+F,6FAAA,CAAA,CAAA;AAAA;KAC/F,EAAA,OAAO,IAAImF,OAAO,IAAI,MAAM,IAAIA,OAAO,IAAI,MAAM,IAAIA,OAAO,CAAA,GAAA,EAAA;AAG9D,IAAA,MAAMnB,WAAW,GAAG,CAACoB,KAAK,CAACC,OAAO,CAACF,OAAO,CAACf,IAAI,CAAC,GAC5C,EAAE,GACFkB,cAAc,GACXjD,KAAK,CAACmD,KAAK,CAACL,OAAO,EAAE,IAAI,CAAC,GAC3BA,OAAO,CAACf,IAAI,CAAC5G,GAAG,CAAEiI,CAAC,IAAKpD,KAAK,CAACkC,eAAe,CAACC,2BAA2B,CAACiB,CAAC,CAAC,CAAC;IACnF,MAAM;AAAEnB,MAAAA;KAAY,GAAG,IAAI,CAACjB,mBAAmB;IAE/C,IAAArH,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAW,EAAA;AACT,MAAA,MAAM4F,gBAAgB,GAAG,IAAI,CAACrC,mBAAmB,CAACC,UAAU;AAE5DU,MAAAA,WAAW,CAACnD,OAAO,CAAE8E,KAAK,IAAK;QAC7B1D,qBAAqB,CAACqC,UAAU,EAAEoB,gBAAgB,EAAEC,KAAK,EAAEtD,KAAK,CAAC;AACnE,OAAC,CAAC;AACJ;IAEA,MAAMuD,OAAuC,GAAG,EAAE;AAClD;IACA,IAAIR,KAAK,CAACC,OAAO,CAACF,OAAO,CAACf,IAAI,CAAC,EAAE;MAC/BwB,OAAO,CAACxB,IAAI,GAAGJ,WAAW;AAC5B;IACA,IAAI,OAAO,IAAImB,OAAO,EAAE;AACtBS,MAAAA,OAAO,CAACvE,KAAK,GAAG8D,OAAO,CAAC9D,KAAK;AAC/B;IACA,IAAI,MAAM,IAAI8D,OAAO,EAAE;AACrBS,MAAAA,OAAO,CAAChG,IAAI,GAAGuF,OAAO,CAACvF,IAAI;AAC7B;IACAyC,KAAK,CAACwD,KAAK,CAAC,MAAM;AAChB,MAAA,IAAI,CAACzC,KAAK,CAAC4B,IAAI,CAAC;AACdc,QAAAA,EAAE,EAAE,oBAAoB;AACxBC,QAAAA,MAAM,EAAEzB,UAAU;QAClB0B,KAAK,EAAE,IAAI,CAAC3G,GAAG;AACfR,QAAAA,KAAK,EAAE+G;AACT,OAAC,CAAC;AACJ,KAAC,CAAC;IAEF,IAAI,CAACV,SAAS,EAAE,OAAO,IAAI,CAACe,IAAI,EAAE;AACpC;AAEAC,EAAAA,SAASA,GAAG;IACV,MAAMC,2BAA2B,GAAG,IAAI,CAAC9C,mBAAmB,CAAC+C,KAAK,CAACC,eAAe;IAClF,IAAI,CAACF,2BAA2B,EAAE;AAChC,MAAA,OAAO,KAAK;AACd;AAEA,IAAA,MAAMG,YAAY,GAAG,IAAI,CAAClD,KAAK,CAACmD,OAAO,CAAC,IAAI,CAAClD,mBAAmB,CAACiB,UAAU,EAAE,IAAI,CAACjF,GAAG,CAA2B;AAEhH,IAAA,OAAOiH,YAAY,CAAClC,IAAI,EAAEoC,KAAK,CAAElC,UAAU,IAAK;AAC9C,MAAA,OAAO,IAAI,CAACjC,KAAK,CAACoE,cAAc,CAACC,cAAc,CAACpC,UAAU,EAAE,IAAI,CAAC,KAAK,IAAI;AAC5E,KAAC,CAAC;AACJ;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQEzF,EAAAA,KAAKA,GAA8B;IACjC,MAAM8H,OAAsB,GAAIC,cAAc,CAAgDnJ,GAAG,CAC/F,IAAI,CAACyF,aACP,CAAE;AAEF,IAAA,IAAI,CAACe,qBAAqB,CAAC,IAAI,CAAC,EAAE;AAChC;AACA,MAAA,IAAI,CAACL,IAAI;AACT,MAAA,OAAO,IAAI;AACb;AAEA,IAAA,OAAO+C,OAAO,CAACE,YAAY,CAAU,IAAI,CAACxH,GAAG,CAAC;AAChD;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAYE,MAAM4G,IAAIA,CAAC7F,OAA2B,EAA+B;IACnE,MAAMuG,OAAsB,GAAIC,cAAc,CAAgDnJ,GAAG,CAC/F,IAAI,CAACyF,aACP,CAAE;IACF,MAAM4D,YAAY,GAChB,CAAC,IAAI,CAACzD,mBAAmB,CAACC,UAAU,CAACyD,OAAO,IAAI,CAACC,0BAA0B,CAAC,IAAI,CAAC3E,KAAK,EAAE,IAAI,CAAC8B,SAAS,EAAE,CAAC;IAC3G,OAAO2C,YAAY,GACdH,OAAO,CAACM,aAAa,CAAC,IAAI,CAAC5H,GAAG,EAAEe,OAAO,CAAC;AACzC;AACA;IACCuG,OAAO,CAACO,UAAU,CAAC,IAAI,CAAC7H,GAAG,EAAEe,OAAO,CAAsD;AACjG;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAWED,MAAMA,CAACC,OAA2B,EAA+B;IAC/D,MAAMuG,OAAsB,GAAIC,cAAc,CAAgDnJ,GAAG,CAC/F,IAAI,CAACyF,aACP,CAAE;IACF,OAAOyD,OAAO,CAACM,aAAa,CAAC,IAAI,CAAC5H,GAAG,EAAEe,OAAO,CAAC;AACjD;AACF;AACAoB,YAAY,CAACwB,gBAAgB,CAAChF,SAAS,EAAE,MAAM,EAAE,CAAC,CAAC;AAE5C,SAASuH,eAAeA,CAAC4B,MAAmD,EAAoC;EACrH,MAAMC,IAAI,GAAG5I,MAAM,CAAC4I,IAAI,CAACD,MAAM,CAAC,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,MAAM,IAAIA,CAAC,KAAK,KAAK,CAAC;AACzF,EAAA,OAAOF,IAAI,CAACxL,MAAM,GAAG,CAAC;AACxB;AAEA,SAASqI,qBAAqBA,CAACsD,GAAqB,EAAE;AACpD,EAAA,MAAMC,MAAM,GAAGD,GAAG,CAACrB,SAAS,EAAE;EAE9B,IAAI,CAACsB,MAAM,EAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,MAAMC,IAAI,GAAGF,GAAG,CAACnE,KAAK,CAAC3F,GAAG,CAAC8J,GAAG,CAACrE,aAAa,EAAEqE,GAAG,CAAClI,GAAG,CAAC;IACtDrD,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,MAAA,IAAA,CAAAA,IAAA,EAAA;AAAA,QAAA,MAAA,IAAAC,KAAA,CAAO,CAAuCuH,oCAAAA,EAAAA,GAAG,CAACrE,aAAa,CAACnH,IAAI,CAAIwL,CAAAA,EAAAA,GAAG,CAAClI,GAAG,CAAE,CAAA,CAAA;AAAA;KAAE,EAAA,UAAU,IAAIoI,IAAI,CAAA,GAAA,EAAA;IACrGA,IAAI,CAACC,QAAQ,GAAG,IAAI;AAEpB,IAAA,OAAO,KAAK;AACd;AACA,EAAA,OAAO,IAAI;AACb;;ACnuBA,SAAS7E,mCAAmCA,CAC1ChE,KAA6D,EACqB;AAClF,EAAA,OAAOiE,OAAO,CAACjE,KAAK,IAAIA,KAAK,CAACwC,KAAK,IAAIxC,KAAK,CAACwC,KAAK,CAAC0B,OAAO,CAAC;AAC7D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACe,MAAM4E,kBAAkB,CAIrC;AAIA;AACF;AACA;AACA;AACA;AACA;;AAGE;AACF;AACA;AACA;AACA;AACA;;AAGE;;EAOA3I,WAAWA,CACTqD,KAAY,EACZe,KAAY,EACZlB,gBAAqE,EACrE0F,qBAAmC,EACnCvI,GAAM,EACN;IACA,IAAI,CAAC+D,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC/D,GAAG,GAAGA,GAAG;IACd,IAAI,CAACuI,qBAAqB,GAAGA,qBAAqB;AAClD,IAAA,IAAI,CAAC7L,IAAI,GAAG6L,qBAAqB,CAACtE,UAAU,CAACvH,IAAyC;IACtF,IAAI,CAACsG,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACa,aAAa,GAAGhB,gBAAgB;IACrC,IAAI,CAAC2F,eAAe,GAAG,IAAI;AAE3B,IAAA,IAAI,CAAC5E,QAAQ,GAAGZ,KAAK,CAACkB,aAAa,CAACC,SAAS,CAC3CtB,gBAAgB,EAChB,CAACuB,CAAyB,EAAEC,MAAwB,EAAEC,WAAoB,KAAK;AAC7E,MAAA,IAAID,MAAM,KAAK,eAAe,IAAIC,WAAW,KAAKtE,GAAG,EAAE;QACrD,IAAI,CAACuE,IAAI,EAAE;AACb;AACF,KACF,CAAC;;AAED;AACF;AAEAxC,EAAAA,OAAOA,GAAG;AACR;AACA;IACA,IAAI,CAACiB,KAAK,CAACkB,aAAa,CAACM,WAAW,CAAC,IAAI,CAACZ,QAAQ,CAAC;IACnD,IAAI,CAACA,QAAQ,GAAG,IAAyB;IACzC,IAAI,IAAI,CAAC4E,eAAe,EAAE;MACxB,IAAI,CAACxF,KAAK,CAACkB,aAAa,CAACM,WAAW,CAAC,IAAI,CAACgE,eAAe,CAAC;MAC1D,IAAI,CAACA,eAAe,GAAG,IAAI;AAC7B;AACF;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,IAEIvD,UAAUA,GAAqE;IACjF,IAAI,IAAI,CAACuD,eAAe,EAAE;MACxB,IAAI,CAACxF,KAAK,CAACkB,aAAa,CAACM,WAAW,CAAC,IAAI,CAACgE,eAAe,CAAC;MAC1D,IAAI,CAACA,eAAe,GAAG,IAAI;AAC7B;AAEA,IAAA,MAAM3D,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AACjC,IAAA,IAAID,QAAQ,IAAIA,QAAQ,CAACE,IAAI,EAAE;AAC7B,MAAA,MAAME,UAAU,GAAG,IAAI,CAACjC,KAAK,CAACkC,eAAe,CAACC,2BAA2B,CAACN,QAAQ,CAACE,IAAI,CAAC;AACxF,MAAA,IAAI,CAACyD,eAAe,GAAG,IAAI,CAACxF,KAAK,CAACkB,aAAa,CAACC,SAAS,CACvDc,UAAU,EACV,CAACb,CAAyB,EAAEC,MAAwB,EAAEC,WAAoB,KAAK;QAC7E,IAAID,MAAM,KAAK,UAAU,IAAKA,MAAM,KAAK,YAAY,IAAIC,WAAW,KAAK,IAAK,EAAE;UAC9E,IAAI,CAACC,IAAI,EAAE;AACb;AACF,OACF,CAAC;AAED,MAAA,OAAOU,UAAU;AACnB;AAEA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCE,EAAA;AAAA5E,IAAAA,gBAAA,CAAA1B,IAAAA,CAAAA,SAAA,EAzBC4C,YAAAA,EAAAA,CAAAA,MAAM,EADNjB,MAAM,CAAA,CAAA;AAAA;AAkEPnD,EAAAA,EAAEA,GAAkB;AAClB,IAAA,OAAO,IAAI,CAAC8H,UAAU,EAAE9H,EAAE,IAAI,IAAI;AACpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMEsI,EAAAA,IAAIA,GAAkB;AACpB,IAAA,MAAMZ,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AAEjC,IAAA,IAAItB,mCAAmC,CAACqB,QAAQ,CAAC,EAAE;MACjD,IAAIA,QAAQ,CAAC7C,KAAK,EAAE;AAClB,QAAA,MAAM0B,OAAO,GAAGmB,QAAQ,CAAC7C,KAAK,CAAC0B,OAAO;AACtC,QAAA,OAAO,CAACA,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAGA,OAAO,CAACgC,IAAI;AACzE;AACF;AACA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACE1D,EAAAA,KAAKA,GAAiB;AACpB,IAAA,MAAM6C,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;IAEjC,OAAOD,QAAQ,IAAIA,QAAQ,CAAC7C,KAAK,GAAG6C,QAAQ,CAAC7C,KAAK,GAAG,IAAI;AAC3D;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOEzB,EAAAA,IAAIA,GAAgB;IAClB,IAAIA,IAAiB,GAAG,IAAI;AAC5B,IAAA,MAAMsE,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AACjC,IAAA,IAAID,QAAQ,IAAIA,QAAQ,CAACtE,IAAI,IAAI,OAAOsE,QAAQ,CAACtE,IAAI,KAAK,QAAQ,EAAE;MAClEA,IAAI,GAAGsE,QAAQ,CAACtE,IAAI;AACtB;AACA,IAAA,OAAOA,IAAI;AACb;AAEAuE,EAAAA,SAASA,GAAG;AACV;IACA,IAAI,CAACP,IAAI,CAAC;AACV,IAAA,MAAMc,KAAK,GAAG,IAAI,CAACrC,KAAK,CAACqC,KAAK;IAC9B,OAAOA,KAAK,CAACC,eAAe,CAAC,IAAI,CAACzB,aAAa,EAAE,IAAI,CAAC7D,GAAG,CAAC;AAG5D;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQEuF,EAAAA,UAAUA,GAAkB;AAC1B,IAAA,MAAM/F,KAAK,GAAG,IAAI,CAACsF,SAAS,EAAE;AAC9B,IAAA,IAAItB,mCAAmC,CAAChE,KAAK,CAAC,EAAE;AAC9C,MAAA,OAAO,MAAM;AACf;AACA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAgBE,EAAA,MAAMmG,IAAIA,CAACC,GAA2B,EAAEC,SAAmB,EAAkC;IAC3F,MAAM;AAAE7C,MAAAA;AAAM,KAAC,GAAG,IAAI;IACtB,MAAMiD,cAAc,GAAGL,GAAG,CAACb,IAAI,IAAImB,eAAe,CAACN,GAAG,CAACb,IAAI,CAAC;AAC5D,IAAA,MAAMuB,KAAK,GAAGL,cAAc,GACvBjD,KAAK,CAACmD,KAAK,CAACP,GAAG,EAAE,IAAI,CAAC,GACvBA,GAAG,CAACb,IAAI,GACL/B,KAAK,CAACkC,eAAe,CAACC,2BAA2B,CAACS,GAAG,CAACb,IAAI,CAAC,GAC5D,IAAI;IACV,MAAM;AAAEE,MAAAA;KAAY,GAAG,IAAI,CAACsD,qBAAqB;IAEjD,IAAA5L,cAAA,CAAAC,eAAA,EAAA,CAAAC,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAW,EAAA;AACT,MAAA,IAAI6F,KAAK,EAAE;AACT1D,QAAAA,qBAAqB,CAACqC,UAAU,EAAE,IAAI,CAACsD,qBAAqB,CAACtE,UAAU,EAAEqC,KAAK,EAAEtD,KAAK,CAAC;AACxF;AACF;IAEA,MAAMuD,OAAmC,GAAG,EAAE;;AAE9C;IACA,IAAIX,GAAG,CAACb,IAAI,IAAIa,GAAG,CAACb,IAAI,KAAK,IAAI,EAAE;MACjCwB,OAAO,CAACxB,IAAI,GAAGuB,KAAK;AACtB;IACA,IAAI,OAAO,IAAIV,GAAG,EAAE;AAClBW,MAAAA,OAAO,CAACvE,KAAK,GAAG4D,GAAG,CAAC5D,KAAK;AAC3B;IACA,IAAI,MAAM,IAAI4D,GAAG,EAAE;AACjBW,MAAAA,OAAO,CAAChG,IAAI,GAAGqF,GAAG,CAACrF,IAAI;AACzB;IACAyC,KAAK,CAACwD,KAAK,CAAC,MAAM;AAChB,MAAA,IAAI,CAACzC,KAAK,CAAC4B,IAAI,CAAC;AACdc,QAAAA,EAAE,EAAE,oBAAoB;AACxBC,QAAAA,MAAM,EAAEzB,UAAU;QAClB0B,KAAK,EAAE,IAAI,CAAC3G,GAAG;AACfR,QAAAA,KAAK,EAAE+G;AACT,OAAC,CAAC;AACJ,KAAC,CAAC;IAEF,IAAI,CAACV,SAAS,EAAE,OAAO,IAAI,CAACe,IAAI,EAAE;AACpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQEpH,EAAAA,KAAKA,GAAmB;AACtB,IAAA,MAAMqF,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE;AACjC,IAAA,OAAOD,QAAQ,IAAIA,QAAQ,CAACE,IAAI,GAAG,IAAI,CAAC/B,KAAK,CAACyF,UAAU,CAAC5D,QAAQ,CAACE,IAAI,CAAC,GAAG,IAAI;AAChF;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAYE,MAAM6B,IAAIA,CAAC7F,OAAiC,EAA2B;IACrE,MAAMuG,OAAsB,GAAIC,cAAc,CAAgDnJ,GAAG,CAC/F,IAAI,CAACyF,aACP,CAAE;IACF,MAAM4D,YAAY,GAChB,CAAC,IAAI,CAACc,qBAAqB,CAACtE,UAAU,CAACyD,OAAO,IAAI,CAACC,0BAA0B,CAAC,IAAI,CAAC3E,KAAK,EAAE,IAAI,CAAC8B,SAAS,EAAE,CAAC;IAC7G,OAAO2C,YAAY,GACfH,OAAO,CAACrG,eAAe,CAAC,IAAI,CAACjB,GAAG,EAAEe,OAAO,CAAC,CAACW,IAAI,CAAC,MAAM,IAAI,CAAClC,KAAK,EAAE,CAAC;AACnE;AACA;IACC8H,OAAO,CAACoB,YAAY,CAAC,IAAI,CAAC1I,GAAG,EAAEe,OAAO,CAA6B;AAC1E;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBE,EAAA;IAAAvU,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,oBAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;EA4BP,IACI2R,QAAQA,GAAY;AACtB,IAAA,OAAO,IAAI,CAACtJ,YAAY,CAACsJ,QAAQ;AACnC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BE,EAAA;IAAA7S,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,UAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;EA2CP,IACI0P,SAASA,GAAY;AACvB,IAAA,OAAO,IAAI,CAACrH,YAAY,CAACqH,SAAS;AACpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBE,EAAA;IAAA5Q,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,WAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;EA2BP,IACI4O,KAAKA,GAAY;AACnB,IAAA,OAAO,IAAI,CAACvG,YAAY,CAACuG,KAAK;AAChC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARE,EAAA;IAAA9P,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,OAAA,EAAA,CALC4C,MAAM,CAAA,CAAA;AAAA;EAgBP,IACIoT,OAAOA,GAAY;AACrB,IAAA,OAAO,IAAI,CAAC/K,YAAY,CAAC+K,OAAO;AAClC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBE,EAAA;IAAAtU,gBAAA,CAAA,IAAA,CAAA1B,SAAA,EAAA,SAAA,EAAA,CALC4C,MAAM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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAUE;AACF;AACA;AACA;AACA;AACA;;AAGE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAaE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKE;AACF;AACA;AACA;AACE;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQEwY,EAAAA,IAAIA,GAAG;IACL9Z,cAAA,CAAAC,eAAA,EAAAC,CAAAA,SAAA,CAAA2D,GAAA,CAAAC,KAAA,CAAA,GAAA,CAAAC,IAAA,IAAA;AAAA,MAAA;QAAA,MAAAC,IAAAA,KAAA,CACE,kJAAkJ,CAAA;AAAA;AAAA,KAAA,EAC7I,CAAA,GAAA,EAAA;AAET;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAcE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAcE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAcEiR,EAAAA,gBAAgBA,CACd8E,QAAmH,EACnHC,OAAW,EACL;IACL,IAAI,CAAChX,WAAW,CAAkBiS,gBAAgB,CAAU8E,QAAQ,EAAEC,OAAO,CAAC;AACjF;EAEAC,eAAeA,CAAChL,IAAY,EAAuC;IACjE,OAAQ,IAAI,CAACjM,WAAW,CAAkB+R,mBAAmB,CAACtT,GAAG,CAACwN,IAAI,CAAC;AACzE;EAEAiL,UAAUA,CAACjL,IAAY,EAAE;AACvB,IAAA,OAAQ,IAAI,CAACjM,WAAW,CAAkBkX,UAAU,CAACjL,IAAI,EAAE5C,UAAQ,CAAC,IAAI,CAAE,CAAC;AAC7E;AAEAyI,EAAAA,aAAaA,CACXiF,QAIS,EACTC,OAAW,EACL;IACL,IAAI,CAAChX,WAAW,CAAkB8R,aAAa,CAAUiF,QAAQ,EAAEC,OAAO,CAAC;AAC9E;EAEA,OAAOG,OAAO,GAAG,IAAI;;AAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAIE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAME,OAAOlW,SAAS,GAAW,IAAI;;AAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKE;AACF;AACA;AACA;AACA;AACA;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","x_google_ignoreList":[2]}