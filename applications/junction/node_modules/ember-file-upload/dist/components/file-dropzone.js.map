{"version":3,"file":"file-dropzone.js","sources":["../../src/system/drag-listener.ts","../../src/system/drag-listener-modifier.ts","../../src/components/file-dropzone.hbs","../../src/components/file-dropzone.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { type Timer, cancel, next } from '@ember/runloop';\nimport type {\n  DragEventListener,\n  QueuedDragEvent,\n  DragListenerHandlers,\n  FileUploadDragEvent,\n} from '../interfaces.ts';\nimport { action } from '@ember/object';\n\nexport default class DragListener {\n  _dropzone?: Element;\n\n  _listeners: DragEventListener[] = [];\n  _stack: DragEventListener[] = [];\n  _listener: DragEventListener | null = null;\n\n  // Keep a stack of deferred actions to take\n  // on listeners to provide sane events.\n  // `dragleave` / `dragenter` are called on the\n  // same element back to back, which isn't what\n  // we want to provide as an API.\n  _events: QueuedDragEvent[] = [];\n\n  _handlers: DragListenerHandlers = {};\n  _handlersAttached = false;\n  _scheduled: Timer | null = null;\n\n  constructor(dropzone: Element) {\n    this._dropzone = dropzone;\n  }\n\n  beginListening() {\n    if (!this._dropzone) return;\n\n    this._dropzone.addEventListener('dragenter', this.dragenter, {\n      passive: true,\n    });\n    this._dropzone.addEventListener('dragleave', this.dragleave, {\n      passive: true,\n    });\n    this._dropzone.addEventListener('dragover', this.dragover, {\n      passive: false,\n    });\n    this._dropzone.addEventListener('drop', this.drop, {\n      passive: false,\n    });\n\n    this._handlersAttached = true;\n  }\n\n  endListening() {\n    if (!this._dropzone) return;\n    if (!this._handlersAttached) return;\n\n    this._dropzone.removeEventListener('dragenter', this.dragenter);\n    this._dropzone.removeEventListener('dragleave', this.dragleave);\n    this._dropzone.removeEventListener('dragover', this.dragover);\n    this._dropzone.removeEventListener('drop', this.drop);\n  }\n\n  addEventListeners(handlers: DragListenerHandlers) {\n    if (!this._dropzone) return;\n\n    if (this._listeners.length === 0) {\n      this.beginListening();\n    }\n\n    // Listeners are ordered by most specific to least specific\n    let insertAt = this._listeners.length;\n\n    for (let i = 0, len = this._listeners.length; i < len; i++) {\n      const listener = this._listeners[i];\n\n      if (listener) {\n        assert(\n          `Cannot add multiple listeners for the same element ${this._dropzone}, ${listener.element}`,\n          this._dropzone !== listener.element,\n        );\n\n        if (listener.element.contains(this._dropzone)) {\n          insertAt = i;\n        }\n      }\n    }\n\n    this._listeners.splice(insertAt, 0, { element: this._dropzone, handlers });\n  }\n\n  removeEventListeners() {\n    this._listeners = this._listeners.filter(\n      (listener) => listener.element !== this._dropzone,\n    );\n    if (this._listeners.length === 0) {\n      this.endListening();\n    }\n  }\n\n  findListener(evt: FileUploadDragEvent) {\n    return this._listeners.find(({ element }) => {\n      return element === evt.target || element.contains(evt.target as Element);\n    });\n  }\n\n  getEventSource(evt: FileUploadDragEvent) {\n    const types = evt.dataTransfer?.types ?? [];\n    let areSomeTypesFiles = false;\n    for (let i = 0, len = types.length; i < len; i++) {\n      if (types[i] === 'Files' || types[i] === 'application/x-moz-file') {\n        areSomeTypesFiles = true;\n        break;\n      }\n    }\n    return areSomeTypesFiles ? 'os' : 'web';\n  }\n\n  getDataTransferItemDetails(evt: FileUploadDragEvent) {\n    const itemDetails = [];\n\n    if (evt.dataTransfer?.items) {\n      for (let i = 0; i < evt.dataTransfer.items.length; i++) {\n        const item = evt.dataTransfer.items[i];\n\n        if (item) {\n          itemDetails.push({\n            kind: item.kind,\n            type: item.type,\n          });\n        }\n      }\n    }\n\n    return itemDetails;\n  }\n\n  @action\n  dragenter(evt: Event) {\n    const event = evt as FileUploadDragEvent;\n    const listener = this.findListener(event);\n    const lastListener = this._stack[this._stack.length - 1];\n\n    // Trigger dragleave on the previous listener\n    if (lastListener) {\n      this.scheduleEvent('dragleave', lastListener, event);\n    }\n\n    if (listener) {\n      this.scheduleEvent('dragenter', listener, {\n        ...event,\n        source: this.getEventSource(event),\n        dataTransfer: event.dataTransfer,\n        itemDetails: this.getDataTransferItemDetails(event),\n      });\n    }\n    this._listener = listener ?? null;\n  }\n\n  @action\n  dragleave(evt: Event) {\n    const event = evt as FileUploadDragEvent;\n    // Trigger a dragleave if the file leaves the browser\n    if (this._stack[0]) {\n      this.scheduleEvent('dragleave', this._stack[0], event);\n      this._listener = null;\n    }\n  }\n\n  @action\n  dragover(evt: Event) {\n    const event = evt as FileUploadDragEvent;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    const listener = this.findListener(event);\n    if (listener) {\n      if (this._listener) {\n        this.scheduleEvent('dragleave', this._listener, event);\n      }\n      this.scheduleEvent('dragenter', listener, {\n        ...event,\n        source: this.getEventSource(event),\n        dataTransfer: event.dataTransfer,\n        itemDetails: this.getDataTransferItemDetails(event),\n      });\n      if (this._stack.includes(listener)) {\n        listener.handlers?.dragover?.(event);\n      }\n    }\n    this._listener = listener ?? null;\n  }\n\n  scheduleEvent(\n    eventName: QueuedDragEvent['eventName'],\n    listener: QueuedDragEvent['listener'],\n    event: QueuedDragEvent['event'],\n  ) {\n    const isDuplicate = this._events.find((queuedEvent) => {\n      return (\n        queuedEvent.eventName === eventName && queuedEvent.listener === listener\n      );\n    });\n\n    const cancelledEvent = this._events.find((queuedEvent) => {\n      return (\n        (queuedEvent.listener === listener &&\n          queuedEvent.eventName === 'dragleave' &&\n          eventName === 'dragenter') ||\n        (queuedEvent.eventName === 'dragenter' && eventName === 'dragleave')\n      );\n    });\n\n    if (cancelledEvent) {\n      // Remove cancelled event\n      this._events = this._events.filter((queuedEvent) => {\n        return (\n          queuedEvent.listener !== cancelledEvent.listener &&\n          queuedEvent.eventName !== cancelledEvent.eventName &&\n          queuedEvent.event !== cancelledEvent.event\n        );\n      });\n      if (this._events.length === 0) {\n        if (this._scheduled) {\n          cancel(this._scheduled);\n        }\n        this._scheduled = null;\n      }\n    } else if (!isDuplicate) {\n      this._events.push({ eventName, listener, event });\n      if (!this._scheduled) {\n        this._scheduled = next(this, this.sendEvents);\n      }\n    }\n  }\n\n  sendEvents() {\n    this._events.forEach(({ eventName, listener, event }) => {\n      if (eventName === 'dragenter') {\n        this._stack.push(listener);\n      } else if (eventName === 'dragleave') {\n        this._stack.pop();\n      }\n      listener.handlers[eventName]?.(event);\n    });\n\n    this._events = [];\n    this._scheduled = null;\n  }\n\n  @action\n  drop(evt: Event) {\n    const event = evt as FileUploadDragEvent;\n\n    this._stack = [];\n    this._events = [];\n    this._scheduled = null;\n    this._listener = null;\n\n    evt.preventDefault();\n    evt.stopPropagation();\n    const listener = this.findListener(event);\n    listener?.handlers?.drop?.(event);\n  }\n}\n","import Modifier, { type ArgsFor, type NamedArgs } from 'ember-modifier';\nimport type { DragListenerModifierSignature } from '../interfaces.ts';\nimport DragListener from './drag-listener.ts';\nimport { registerDestructor } from '@ember/destroyable';\nimport type Owner from '@ember/owner';\n\nfunction cleanup(instance: DragListenerModifier) {\n  if (!instance.listener) return;\n\n  instance.listener.removeEventListeners();\n}\n\nexport default class DragListenerModifier extends Modifier<DragListenerModifierSignature> {\n  listener?: DragListener;\n\n  constructor(owner: Owner, args: ArgsFor<DragListenerModifierSignature>) {\n    super(owner, args);\n    registerDestructor(this, cleanup);\n  }\n\n  modify(\n    dropzone: Element,\n    _: [],\n    {\n      dragenter,\n      dragleave,\n      dragover,\n      drop,\n    }: NamedArgs<DragListenerModifierSignature>,\n  ) {\n    this.listener = new DragListener(dropzone);\n\n    this.listener.removeEventListeners();\n    this.listener.addEventListeners({\n      dragenter,\n      dragleave,\n      dragover,\n      drop,\n    });\n  }\n}\n","import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"<div\\n  ...attributes\\n  {{this.dragListener\\n    dragenter=this.didEnterDropzone\\n    dragleave=this.didLeaveDropzone\\n    dragover=this.didDragOver\\n    drop=this.didDrop\\n  }}\\n>\\n  {{yield\\n    (hash supported=this.supported active=this.active)\\n    this.queue\\n  }}\\n</div>\\n\")","import Component from '@glimmer/component';\nimport * as s from '@ember/service';\nimport { getOwner } from '@ember/application';\nimport DataTransferWrapper from '../system/data-transfer-wrapper.ts';\nimport { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\nimport { UploadFile } from '../upload-file.ts';\nimport type FileQueueService from '../services/file-queue.ts';\nimport { DEFAULT_QUEUE } from '../services/file-queue.ts';\nimport {\n  type FileUploadDragEvent,\n  type FileDropzoneSignature,\n  FileSource,\n} from '../interfaces.ts';\nimport DragListenerModifier from '../system/drag-listener-modifier.ts';\n\nconst service = s.service ?? s.inject;\n\n/**\n  `FileDropzone` is a component that will allow users to upload files by\n   drag and drop.\n\n  ```hbs\n  <FileDropzone @queue={{queue}} as |dropzone|>\n    {{#if dropzone.active}}\n      Drop to upload\n    {{else if queue.files.length}}\n      Uploading {{queue.files.length}} files. ({{queue.progress}}%)\n    {{else}}\n      <h4>Upload Images</h4>\n      <p>\n        {{#if dropzone.supported}}\n          Drag and drop images onto this area to upload them or\n        {{/if}}\n      </p>\n    {{/if}}\n  </FileDropzone>\n  ```\n\n  @class FileDropzoneComponent\n  @type Ember.Component\n  @yield {Hash} dropzone\n  @yield {boolean} dropzone.supported\n  @yield {boolean} dropzone.active\n  @yield {Queue} queue\n */\nexport default class FileDropzoneComponent extends Component<FileDropzoneSignature> {\n  @service declare fileQueue: FileQueueService;\n\n  @tracked active = false;\n  @tracked dataTransferWrapper?: DataTransferWrapper;\n\n  supported = (() =>\n    typeof window !== 'undefined' &&\n    window.document &&\n    'draggable' in document.createElement('span'))();\n\n  get queue() {\n    if (this.args.queue) {\n      return this.args.queue;\n    }\n\n    return this.fileQueue.findOrCreate(DEFAULT_QUEUE);\n  }\n\n  get multiple() {\n    return this.args.multiple ?? true;\n  }\n\n  get files(): File[] {\n    const files = this.dataTransferWrapper?.files ?? [];\n    if (this.multiple) return files;\n\n    return files.slice(0, 1);\n  }\n\n  get isAllowed() {\n    const { environment } =\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      getOwner(this).resolveRegistration('config:environment') as {\n        environment: string;\n      };\n\n    return (\n      environment === 'test' ||\n      (this.dataTransferWrapper && this.dataTransferWrapper.source === 'os') ||\n      this.args.allowUploadsFromWebsites\n    );\n  }\n\n  get cursor() {\n    return this.args.cursor ?? 'copy';\n  }\n\n  @action\n  didEnterDropzone(event: FileUploadDragEvent) {\n    this.dataTransferWrapper = new DataTransferWrapper(event);\n\n    if (this.isAllowed) {\n      event.dataTransfer.dropEffect = this.cursor;\n      this.active = true;\n\n      this.args.onDragEnter?.(this.files, this.dataTransferWrapper);\n    }\n  }\n\n  @action\n  didLeaveDropzone(event: FileUploadDragEvent) {\n    if (this.dataTransferWrapper) {\n      this.dataTransferWrapper.dataTransfer = event.dataTransfer;\n    }\n    if (this.dataTransferWrapper && this.isAllowed) {\n      if (event.dataTransfer) {\n        event.dataTransfer.dropEffect = this.cursor;\n      }\n      this.args.onDragLeave?.(this.files, this.dataTransferWrapper);\n\n      this.dataTransferWrapper = undefined;\n\n      if (this.isDestroyed) {\n        return;\n      }\n      this.active = false;\n    }\n  }\n\n  @action\n  didDragOver(event: FileUploadDragEvent) {\n    if (this.dataTransferWrapper) {\n      this.dataTransferWrapper.dataTransfer = event.dataTransfer;\n    }\n    if (this.isAllowed) {\n      event.dataTransfer.dropEffect = this.cursor;\n    }\n  }\n\n  @action\n  didDrop(event: FileUploadDragEvent) {\n    if (this.dataTransferWrapper) {\n      this.dataTransferWrapper.dataTransfer = event.dataTransfer;\n    }\n\n    if (!this.isAllowed) {\n      event.dataTransfer.dropEffect = this.cursor;\n      this.dataTransferWrapper = undefined;\n      return;\n    }\n\n    // @TODO - add tests for these or remove them\n    // // Testing support for dragging and dropping images\n    // // from other browser windows\n    // let url;\n\n    // // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // // @ts-ignore\n    // const html = this.dataTransferWrapper.getData('text/html');\n    // if (html) {\n    //   const parsedHtml = parseHTML(html);\n    //   // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //   // @ts-ignore\n    //   const img = parsedHtml.getElementsByTagName('img')[0];\n    //   if (img) {\n    //     url = img.src;\n    //   }\n    // }\n\n    // if (url == null) {\n    //   // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //   // @ts-ignore\n    //   url = this.dataTransferWrapper.getData('text/uri-list');\n    // }\n\n    // if (url) {\n    //   const image = new Image();\n    //   const [filename] = url.split('/').slice(-1);\n    //   image.crossOrigin = 'anonymous';\n    //   image.onload = () => {\n    //     const canvas = document.createElement('canvas');\n    //     canvas.width = image.width;\n    //     canvas.height = image.height;\n\n    //     const ctx = canvas.getContext('2d');\n    //     ctx?.drawImage(image, 0, 0);\n\n    //     if (canvas.toBlob) {\n    //       canvas.toBlob((blob) => {\n    //         // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //         // @ts-ignore\n    //         const [file] = this.addFiles([blob], FileSource.web);\n    //         // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //         // @ts-ignore\n    //         file.name = filename;\n    //       });\n    //     } else {\n    //       const binStr = atob(canvas.toDataURL().split(',')[1]);\n    //       const len = binStr.length;\n    //       const arr = new Uint8Array(len);\n\n    //       for (let i = 0; i < len; i++) {\n    //         arr[i] = binStr.charCodeAt(i);\n    //       }\n    //       const blob = new Blob([arr], { type: 'image/png' });\n    //       // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //       // @ts-ignore\n    //       blob.name = filename;\n    //       // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //       // @ts-ignore\n    //       const [file] = this.addFiles([blob], FileSource.web);\n    //       // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    //       // @ts-ignore\n    //       file.name = filename;\n    //     }\n    //   };\n    //   /* eslint-disable no-console */\n    //   image.onerror = function (e) {\n    //     console.log(e);\n    //   };\n    //   /* eslint-enable no-console */\n    //   image.src = url;\n    // }\n\n    if (this.dataTransferWrapper) {\n      const addedFiles = this.addFiles(this.files);\n      this.args.onDrop?.(addedFiles, this.dataTransferWrapper);\n\n      this.active = false;\n      this.dataTransferWrapper = undefined;\n    }\n  }\n\n  addFiles(files: File[]) {\n    const addedFiles = [];\n    for (const file of files) {\n      if (file instanceof File) {\n        const uploadFile = new UploadFile(file, FileSource.DragAndDrop);\n        if (\n          this.args.filter &&\n          !this.args.filter(file, files, files.indexOf(file))\n        ) {\n          continue;\n        }\n        this.queue.add(uploadFile);\n        addedFiles.push(uploadFile);\n      }\n    }\n    return addedFiles;\n  }\n\n  dragListener = DragListenerModifier;\n}\n"],"names":["DragListener","_class","constructor","dropzone","_defineProperty","_dropzone","beginListening","addEventListener","dragenter","passive","dragleave","dragover","drop","_handlersAttached","endListening","removeEventListener","addEventListeners","handlers","_listeners","length","insertAt","i","len","listener","assert","element","contains","splice","removeEventListeners","filter","findListener","evt","find","target","getEventSource","types","dataTransfer","areSomeTypesFiles","getDataTransferItemDetails","itemDetails","items","item","push","kind","type","event","lastListener","_stack","scheduleEvent","source","_listener","preventDefault","stopPropagation","includes","eventName","isDuplicate","_events","queuedEvent","cancelledEvent","_scheduled","cancel","next","sendEvents","forEach","pop","_applyDecoratedDescriptor","prototype","action","Object","getOwnPropertyDescriptor","cleanup","instance","DragListenerModifier","Modifier","owner","args","registerDestructor","modify","_","service","s","inject","FileDropzoneComponent","Component","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","window","document","createElement","queue","fileQueue","findOrCreate","DEFAULT_QUEUE","multiple","files","dataTransferWrapper","slice","isAllowed","environment","getOwner","resolveRegistration","allowUploadsFromWebsites","cursor","didEnterDropzone","DataTransferWrapper","dropEffect","active","onDragEnter","didLeaveDropzone","onDragLeave","undefined","isDestroyed","didDragOver","didDrop","addedFiles","addFiles","onDrop","file","File","uploadFile","UploadFile","FileSource","DragAndDrop","indexOf","add","configurable","enumerable","writable","initializer","tracked","setComponentTemplate","TEMPLATE"],"mappings":"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"}