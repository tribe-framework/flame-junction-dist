{"version":3,"file":"power-select-multiple.js","sources":["../../src/components/power-select-multiple.ts"],"sourcesContent":["import Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { isEqual } from '@ember/utils';\nimport type { PowerSelectSignature, Select } from './power-select';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\ninterface PowerSelectMultipleSignature extends PowerSelectSignature {\n  // any extra property for multiple selects?\n}\n\nexport default class PowerSelectMultipleComponent extends Component<PowerSelectMultipleSignature> {\n  get computedTabIndex() {\n    if (this.args.triggerComponent === undefined && this.args.searchEnabled) {\n      return '-1';\n    } else {\n      return this.args.tabindex || '0';\n    }\n  }\n\n  // Actions\n  @action\n  handleOpen(select: Select, e: Event): false | void {\n    if (this.args.onOpen && this.args.onOpen(select, e) === false) {\n      return false;\n    }\n    this.focusInput(select);\n  }\n\n  @action\n  handleFocus(select: Select, e: FocusEvent): void {\n    if (this.args.onFocus) {\n      this.args.onFocus(select, e);\n    }\n    this.focusInput(select);\n  }\n\n  @action\n  handleKeydown(select: Select, e: KeyboardEvent): false | void {\n    if (this.args.onKeydown && this.args.onKeydown(select, e) === false) {\n      e.stopPropagation();\n      return false;\n    }\n    if (e.keyCode === 13 && select.isOpen) {\n      e.stopPropagation();\n      if (select.highlighted !== undefined) {\n        if (\n          !select.selected ||\n          select.selected.indexOf(select.highlighted) === -1\n        ) {\n          select.actions.choose(select.highlighted, e);\n          return false;\n        } else {\n          select.actions.close(e);\n          return false;\n        }\n      } else {\n        select.actions.close(e);\n        return false;\n      }\n    }\n  }\n\n  defaultBuildSelection(option: any, select: Select) {\n    const newSelection = Array.isArray(select.selected)\n      ? select.selected.slice(0)\n      : [];\n    let idx = -1;\n    for (let i = 0; i < newSelection.length; i++) {\n      if (isEqual(newSelection[i], option)) {\n        idx = i;\n        break;\n      }\n    }\n    if (idx > -1) {\n      newSelection.splice(idx, 1);\n    } else {\n      newSelection.push(option);\n    }\n    return newSelection;\n  }\n\n  focusInput(select: Select) {\n    if (select) {\n      const input = document.querySelector(\n        `#ember-power-select-trigger-multiple-input-${select.uniqueId}`,\n      ) as HTMLElement;\n      if (input) {\n        input.focus();\n      }\n    }\n  }\n}\n"],"names":["PowerSelectMultipleComponent","Component","computedTabIndex","args","triggerComponent","undefined","searchEnabled","tabindex","handleOpen","select","e","onOpen","focusInput","n","prototype","action","handleFocus","onFocus","handleKeydown","onKeydown","stopPropagation","keyCode","isOpen","highlighted","selected","indexOf","actions","choose","close","defaultBuildSelection","option","newSelection","Array","isArray","slice","idx","i","length","isEqual","splice","push","input","document","querySelector","uniqueId","focus","setComponentTemplate","TEMPLATE"],"mappings":"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"}